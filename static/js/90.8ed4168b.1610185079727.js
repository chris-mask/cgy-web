webpackJsonp([90],{"3HHd":function(e,t,l){var a=l("T1iU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l("rjj0")("1728d7a4",a,!0)},MwCE:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("mvHQ"),s=l.n(a),i=l("c8+v"),r=l("l8D1"),o=l("5ybE"),n=l("Q5rI"),c=l("rN1C"),u=l("fksm"),p={name:"addFreeOrder",data:function(){return{enterprise_list:[],sign_company_list:[],companyTotal:0,companyPage:0,companyPageSize:20,createForm:{unitPrice:0},createVisible:!1,createRule:{crmCompanyIdList:[{required:!0,message:"请选择企业",trigger:"blur"}],signUserId:[{required:!0,message:"请选择签订人",trigger:"blur"}],signDate:[{required:!0,message:"请选择签订日期",trigger:"blur"}],signCompanyId:[{required:!0,message:"请选择签订公司",trigger:"blur"}],applyYear:[{required:!0,message:"请选择年份",trigger:"blur"}],applyLevel:[{required:!0,message:"请选择级别",trigger:"blur"}],applyBatchNo:[{required:!0,message:"请选择批次",trigger:"blur"}],applyNum:[{required:!0,message:"请填写数量",trigger:"blur"}]},listQuery:{page:0,pageSize:20,companyPosition:[1]},salePersonList:[],personList:[],projectForm:{page:0,pageSize:20},projectList:[],loading:!1,projectLevelList:[{label:"国家级",value:1},{label:"省级",value:2},{label:"市级",value:3},{label:"区县级",value:4},{label:"镇街级",value:5}],batchNoList:[{label:"未指定",value:0},{label:"第一批",value:1},{label:"第二批",value:2},{label:"第三批",value:3},{label:"第四批",value:4},{label:"第五批",value:5}],industry_yeart:[{label:"2021",value:"2021"},{label:"2020",value:"2020"},{label:"2019",value:"2019"},{label:"2018",value:"2018"},{label:"2017",value:"2017"},{label:"2016",value:"2016"},{label:"2015",value:"2015"},{label:"2014",value:"2014"},{label:"2013",value:"2013"},{label:"2012",value:"2012"},{label:"2011",value:"2011"},{label:"2010",value:"2010"},{label:"2009",value:"2009"},{label:"2008",value:"2008"},{label:"2007",value:"2007"},{label:"2006",value:"2006"},{label:"2005",value:"2005"},{label:"2004",value:"2004"},{label:"2003",value:"2003"},{label:"2002",value:"2002"},{label:"2001",value:"2001"},{label:"2000",value:"2000"},{label:"1999",value:"1999"},{label:"1998",value:"1998"},{label:"1997",value:"1997"},{label:"1996",value:"1996"},{label:"1995",value:"1995"},{label:"1994",value:"1994"},{label:"1993",value:"1993"},{label:"1992",value:"1992"},{label:"1991",value:"1991"},{label:"1990",value:"1990"},{label:"1989",value:"1989"},{label:"1988",value:"1988"},{label:"1987",value:"1987"},{label:"1986",value:"1986"},{label:"1985",value:"1985"},{label:"1984",value:"1984"},{label:"1983",value:"1983"},{label:"1982",value:"1982"},{label:"1981",value:"1981"},{label:"1980",value:"1980"},{label:"1979",value:"1979"},{label:"1978",value:"1978"},{label:"1977",value:"1977"},{label:"1976",value:"1976"},{label:"1975",value:"1975"},{label:"1974",value:"1974"},{label:"1973",value:"1973"},{label:"1972",value:"1972"},{label:"1971",value:"1971"},{label:"1970",value:"1970"}],is_new_or_not_list:[{label:"老客户",value:1},{label:"新客户",value:0}],sign_customer_list:[{label:"签单客户",value:1},{label:"潜在客户",value:0}],level:3,parentId:0,province_list:[],city_list:[],district_list:[],town_list:[],chooseCompanyList:[],storgCompanyList:[],dialogVisible:!1,btnFlag:0,allowGetRoleUserList:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:ROLE:USER:LIST")}},directives:{loadMore:{bind:function(e,t){e.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&t.value()})}}},activated:function(){this.$route.query.projectBox&&(this.projectBox=JSON.parse(this.$route.query.projectBox)),this.getCompanyData(),this.getCompanyList(),this.getCompanyDeptList(),this.getCommonData(),this.getProjectList(),this.getRegionList(),this.getSignerData(),window.addEventListener("scroll",this.scrollToTop)},destroyed:function(){clearInterval(this.timer),window.removeEventListener("scroll",this.scrollToTop)},methods:{backTop:function(){var e=this,t=setInterval(function(){var l=Math.floor(-e.scrollTop/5);document.documentElement.scrollTop=document.body.scrollTop=e.scrollTop+l,0===e.scrollTop&&clearInterval(t)},16)},goCompanyName:function(e){this.$router.push({path:"/customer/editCustomer",query:{id:e,check:!1,tip:!0}})},scrollToTop:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=e,this.scrollTop>0?this.btnFlag=!0:this.btnFlag=!1},getCompanyData:function(){var e=this;Object(i.z)(this.listQuery).then(function(t){200==t.code?(console.log(t.data,"======data===========>"),e.listQuery.page>0?(e.enterprise_list=e.enterprise_list.concat(t.data.data),e.companyTotal=t.data.total):(e.enterprise_list=t.data.data,e.companyTotal=t.data.total),e.enterprise_list.forEach(function(t){e.$set(t,"selected",!1),e.storgCompanyList.forEach(function(l){t.crmCompanyId==l.crmCompanyId&&(e.$set(t,"selected",!0),setTimeout(function(){e.$refs.enterpriseTable.toggleRowSelection(t)},100))})})):e.$message.warning(t.message)})},pageDown:function(){this.listQuery.page=this.listQuery.page+20,this.getCompanyData()},goSearch:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},getCompanyList:function(){var e=this;Object(r.p)().then(function(t){200==t.code?e.sign_company_list=t.data:e.$message.warning(t.message)})},getCompanyDeptList:function(){var e=this;Object(o.f)({}).then(function(t){200==t.code?e.deptmentList=t.data.deptInfoTreeVos:e.$message.warning(t.message)})},getPersonList:function(e,t){var l=this,a=new FormData;a.append("roleNameList",e),void 0!=t&&a.append("deptIdList",t),this.allowGetRoleUserList.twoAllow?Object(i.E)(a).then(function(e){200==e.code?t?l.salePersonList=e.data:l.personList=e.data:l.$message.warning(e.message)}):this.$message.warning("抱歉，您没有权限获取角色用户列表")},getCommonData:function(){var e=this;Object(n.d)({keyList:"ENTERPRISE_REGISTRATION_STATUS,DICT:CUSTOMER_LEVEL,DICT:ANNUAL_SALES,DICT:STAFF_SIZE,DICT:INDUSTRY_INVOLVED,DICT:COMPANY_TYPE,DICT:TECHNOLOGY_TYPE,DICT:COMPANY_SCALE,DICT:JOB_PROFESSIONAL"}).then(function(t){200==t.code?(e.customer_classification_list=t.data["DICT:CUSTOMER_LEVEL"],e.industry_involved_list=t.data["DICT:INDUSTRY_INVOLVED"],e.technologyTypeList=t.data["DICT:TECHNOLOGY_TYPE"]):e.$message({type:"error",message:t.message})})},getSignerData:function(){var e=this,t=new FormData;t.append("roleName","业务员"),Object(n.u)(t).then(function(t){200==t.code&&(e.user_list=t.data.data)})},getProjectList:function(){var e=this;Object(c.e)(this.projectForm).then(function(t){200==t.code?e.projectForm.page>0?e.projectList=e.projectList.concat(t.data.data):e.projectList=t.data.data:e.$message.warning(t.message)})},projectListMethod:function(e){var t=this;this.projectForm.page=0,this.projectForm.projectName=e,this.loading=!0,setTimeout(function(){t.loading=!1,t.getProjectList(e)},200)},loadMore:function(){this.projectForm.page=this.projectForm.page+20,this.getProjectList()},alreadyProjectChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},nowProjectChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},getRegionList:function(){var e=this;void 0!=this.level&&null!=this.level||(this.level=3),void 0!=this.parentId&&""!=this.parentId||(this.level=3,this.parentId=0);var t={level:this.level,parentId:this.parentId};Object(n.f)(t).then(function(t){200==t.code?(3==e.level&&(e.province_list=t.data),2==e.level&&(e.city_list=t.data),1==e.level&&(e.district_list=t.data),0==e.level&&(e.town_list=t.data)):e.$message({type:"error",message:t.message})})},deptmentChange:function(e){this.getPersonList("业务员,业务主管",e),this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},userChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterInvolved:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterEntYear:function(){console.log(this.listQuery.setUpTheYearList,"listQuery.setUpTheYearList"),this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},alreadyProjectLevelChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},nowProjectLevelChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},bathChange:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},nowHandleFilterYear:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},alreadyHandleFilterYear:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterTechType:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterIsNewOrNot:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterCustomerClassification:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},handleFilterSignCustomer:function(){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},changeProvince:function(e){this.listQuery.page=0,this.listQuery.pageSize=20,this.listQuery.cityId="",this.listQuery.districtId="",this.listQuery.townId="",this.parentId=e,this.level=2,this.getRegionList(),this.getCompanyData()},changeCity:function(e){this.listQuery.districtId="",this.listQuery.townId="",this.listQuery.page=0,this.listQuery.pageSize=20,this.parentId=e,this.level=1,this.getRegionList(),this.getCompanyData()},changeDistrict:function(e){this.listQuery.page=0,this.listQuery.pageSize=20,this.parentId=e,this.level=0,this.getRegionList(),this.getCompanyData()},getTownsId:function(e){this.listQuery.page=0,this.listQuery.pageSize=20,this.getCompanyData()},chooseCompany:function(e,t){var l=this;0==t?(this.$set(e,"selected",!0),this.storgCompanyList.push(e)):(this.$set(e,"selected",!1),this.storgCompanyList.forEach(function(t,a){t.crmCompanyId==e.crmCompanyId&&l.storgCompanyList.splice(a,1)}))},onTableSelect:function(e,t){var l=this;!0===t.selected?this.storgCompanyList.forEach(function(e,a){e.crmCompanyId==t.crmCompanyId&&(l.$set(t,"selected",!1),l.storgCompanyList.splice(a,1))}):(this.storgCompanyList.push(t),this.$set(t,"selected",!0))},allSelectTable:function(e){var t=this;0!=e.length?(e.forEach(function(e){t.$set(e,"selected",!0)}),this.storgCompanyList=e):(this.storgCompanyList=e,this.enterprise_list.forEach(function(e){t.$set(e,"selected",!1)}))},deleteChoiced:function(e,t){var l=this;this.chooseCompanyList.splice(t,1),this.storgCompanyList=JSON.parse(s()(this.chooseCompanyList)),this.enterprise_list.forEach(function(t){t.crmCompanyId==e.crmCompanyId&&(l.$set(t,"selected",!1),l.$refs.enterpriseTable.toggleRowSelection(t,!1))})},checkSelect:function(){this.storgCompanyList.length<=0?this.$message.warning("请先选择企业！"):(this.dialogVisible=!0,this.chooseCompanyList=JSON.parse(s()(this.storgCompanyList)))},handleClose:function(){this.dialogVisible=!1,this.chooseCompanyList=[]},createFreeOrder:function(){this.storgCompanyList.length<=0?this.$message.warning("请先选择企业！"):(this.getPersonList("业务员,业务主管"),this.createForm.projectName=this.$route.query.projectName,this.createForm.projectId=this.$route.query.projectId,this.createForm.projectList=[],this.createForm.projectList.push(this.projectBox),this.createVisible=!0)},cancel:function(){this.listQuery={page:0,pageSize:20,companyPosition:[]},this.storgCompanyList=[],this.closeCurrent(this.$store.state.tagsView.visitedViews,this.$route,"/policy/project/list")},saveCreateOrder:function(e){var t=this;this.storgCompanyList.length<=0?this.$message.warning("请先选择企业！"):(this.createForm.crmCompanyIdList=[],this.storgCompanyList.forEach(function(e){t.createForm.crmCompanyIdList.push(e.crmCompanyId)}),this.$refs[e].validate(function(e){if(!e)return!1;Object(u.v)(t.createForm).then(function(e){200==e.code&&(t.createVisible=!1,t.createForm={unitPrice:0},t.storgCompanyList=[],t.closeCurrent(t.$store.state.tagsView.visitedViews,t.$route,"/declareCoordination/orderManage"),t.$message.success("操作成功"))})}))},createClose:function(){this.createForm={unitPrice:0},this.createVisible=!1}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card box-margin",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"searchCont"},[a("div",{staticClass:"searchLeft"},[a("el-input",{attrs:{size:"small",placeholder:"企业名称/社会信用代码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearch(t)}},model:{value:e.listQuery.companyName,callback:function(t){e.$set(e.listQuery,"companyName",t)},expression:"listQuery.companyName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.goSearch}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"searchRig"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkSelect}},[e._v("查看已选择")])],1)])]),e._v(" "),a("el-card",{staticClass:"box-card box-margin"},[a("div",{staticClass:"clearfix headerTop",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"chooseCompany"},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"选择部门",clearable:"",multiple:""},on:{change:e.deptmentChange},model:{value:e.listQuery.deptIds,callback:function(t){e.$set(e.listQuery,"deptIds",t)},expression:"listQuery.deptIds"}},e._l(e.deptmentList,function(e){return a("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}),1),e._v(" "),a("el-select",{attrs:{filterable:"",size:"small",multiple:"",placeholder:"选择人员",clearable:""},on:{change:e.userChange},model:{value:e.listQuery.userIds,callback:function(t){e.$set(e.listQuery,"userIds",t)},expression:"listQuery.userIds"}},e._l(e.salePersonList,function(e){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})}),1),e._v(" "),a("el-select",{attrs:{multiple:"",clearable:"",size:"small",placeholder:"所属行业"},on:{change:e.handleFilterInvolved},model:{value:e.listQuery.businessIds,callback:function(t){e.$set(e.listQuery,"businessIds",t)},expression:"listQuery.businessIds"}},e._l(e.industry_involved_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{attrs:{multiple:"",clearable:"",size:"small",placeholder:"成立年份"},on:{change:e.handleFilterEntYear},model:{value:e.listQuery.setUpTheYearList,callback:function(t){e.$set(e.listQuery,"setUpTheYearList",t)},expression:"listQuery.setUpTheYearList"}},e._l(e.industry_yeart,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"chooseCompany"},[a("el-select",{directives:[{name:"loadMore",rawName:"v-loadMore",value:e.loadMore,expression:"loadMore"}],attrs:{filterable:"",multiple:"",remote:"","remote-method":e.projectListMethod,loading:e.loading,size:"small",placeholder:"在报项目名称",clearable:""},on:{change:e.nowProjectChange},model:{value:e.listQuery.nowReportProjectIds,callback:function(t){e.$set(e.listQuery,"nowReportProjectIds",t)},expression:"listQuery.nowReportProjectIds"}},e._l(e.projectList,function(e){return a("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}),1),e._v(" "),a("el-select",{attrs:{filterable:"",multiple:"",size:"small",placeholder:"在报项目级别",clearable:""},on:{change:e.nowProjectLevelChange},model:{value:e.listQuery.nowReportProjectLevelList,callback:function(t){e.$set(e.listQuery,"nowReportProjectLevelList",t)},expression:"listQuery.nowReportProjectLevelList"}},e._l(e.projectLevelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{multiple:"",clearable:"",size:"small",placeholder:"在报项目年度"},on:{change:e.nowHandleFilterYear},model:{value:e.listQuery.nowReportProjectYearList,callback:function(t){e.$set(e.listQuery,"nowReportProjectYearList",t)},expression:"listQuery.nowReportProjectYearList"}},e._l(e.industry_yeart,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"chooseCompany"},[a("el-select",{directives:[{name:"loadMore",rawName:"v-loadMore",value:e.loadMore,expression:"loadMore"}],attrs:{filterable:"",multiple:"",remote:"","remote-method":e.projectListMethod,loading:e.loading,size:"small",placeholder:"已报项目名称",clearable:""},on:{change:e.alreadyProjectChange},model:{value:e.listQuery.alreadyReportProjectNames,callback:function(t){e.$set(e.listQuery,"alreadyReportProjectNames",t)},expression:"listQuery.alreadyReportProjectNames"}},e._l(e.projectList,function(e){return a("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectName}})}),1),e._v(" "),a("el-select",{attrs:{filterable:"",multiple:"",size:"small",placeholder:"已报项目级别",clearable:""},on:{change:e.alreadyProjectLevelChange},model:{value:e.listQuery.alreadyReportProjectLevelList,callback:function(t){e.$set(e.listQuery,"alreadyReportProjectLevelList",t)},expression:"listQuery.alreadyReportProjectLevelList"}},e._l(e.projectLevelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{multiple:"",clearable:"",size:"small",placeholder:"已报项目年度"},on:{change:e.alreadyHandleFilterYear},model:{value:e.listQuery.alreadyReportProjectYearList,callback:function(t){e.$set(e.listQuery,"alreadyReportProjectYearList",t)},expression:"listQuery.alreadyReportProjectYearList"}},e._l(e.industry_yeart,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"chooseCompany"},[a("el-select",{attrs:{size:"small",multiple:"",clearable:"",placeholder:"科技类型"},on:{change:e.handleFilterTechType},model:{value:e.listQuery.technologyType,callback:function(t){e.$set(e.listQuery,"technologyType",t)},expression:"listQuery.technologyType"}},e._l(e.technologyTypeList,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{size:"small",clearable:"",placeholder:"新老客户"},on:{change:e.handleFilterIsNewOrNot},model:{value:e.listQuery.newOrOld,callback:function(t){e.$set(e.listQuery,"newOrOld",t)},expression:"listQuery.newOrOld"}},e._l(e.is_new_or_not_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"small",clearable:"",placeholder:"客户级别"},on:{change:e.handleFilterCustomerClassification},model:{value:e.listQuery.companyLevel,callback:function(t){e.$set(e.listQuery,"companyLevel",t)},expression:"listQuery.companyLevel"}},e._l(e.customer_classification_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{size:"small",filterable:"",clearable:"",placeholder:"是否签单"},on:{change:e.handleFilterSignCustomer},model:{value:e.listQuery.isSigning,callback:function(t){e.$set(e.listQuery,"isSigning",t)},expression:"listQuery.isSigning"}},e._l(e.sign_customer_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"chooseCompany"},[a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{clearable:"",size:"small",placeholder:"省份"},on:{change:e.changeProvince},model:{value:e.listQuery.provinceId,callback:function(t){e.$set(e.listQuery,"provinceId",t)},expression:"listQuery.provinceId"}},e._l(e.province_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{clearable:"",size:"small",placeholder:"城市"},on:{change:e.changeCity},model:{value:e.listQuery.cityId,callback:function(t){e.$set(e.listQuery,"cityId",t)},expression:"listQuery.cityId"}},e._l(e.city_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{clearable:"",size:"small",placeholder:"县区"},on:{change:e.changeDistrict},model:{value:e.listQuery.districtId,callback:function(t){e.$set(e.listQuery,"districtId",t)},expression:"listQuery.districtId"}},e._l(e.district_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1),e._v(" "),a("el-select",{staticClass:"inline-block input-150 float-left",attrs:{clearable:"",size:"small",placeholder:"镇街"},on:{change:e.getTownsId},model:{value:e.listQuery.townId,callback:function(t){e.$set(e.listQuery,"townId",t)},expression:"listQuery.townId"}},e._l(e.town_list,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}),1)],1)]),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-bottom":"10px",float:"right"},attrs:{type:"primary",size:"small"},on:{click:e.createFreeOrder}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px",float:"right","margin-right":"10px"},attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-table",{ref:"enterpriseTable",attrs:{data:e.enterprise_list,border:"",fit:"","highlight-current-row":"","row-key":"crmCompanyId","reserve-selection":!0},on:{select:e.onTableSelect,"select-all":e.allSelectTable}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"160px",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"chooseCompanyId",on:{click:function(l){return e.goCompanyName(t.row.crmCompanyId)}}},[e._v(e._s(t.row.companyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"成立时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.setupDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"主营产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainProducts))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"所在地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.provinceName)+e._s(t.row.cityName)+e._s(t.row.districtName)+e._s(t.row.townName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"业务人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.traceSalesManName))])]}}])})],1),e._v(" "),0!=e.enterprise_list.length?a("div",[e.companyTotal-e.enterprise_list.length>0?a("div",{staticClass:"noMore",on:{click:e.pageDown}},[e._v("\n            点击加载更多\n          ")]):a("div",{staticClass:"noMore"},[e._v("没有更多数据了")])]):e._e()],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"查看已选",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{"max-height":"400px",overflow:"auto"}},[a("el-table",{ref:"userTable",attrs:{data:e.chooseCompanyList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"160px",label:"企业名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.companyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"成立时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.setupDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"主营产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainProducts))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"所在地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.provinceName)+e._s(t.row.cityName)+e._s(t.row.districtName)+e._s(t.row.townName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"业务人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.traceSalesManName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"spanButton",staticStyle:{color:"#ff464d"},on:{click:function(l){return e.deleteChoiced(t.row,t.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"创建免费订单",visible:e.createVisible,width:"800px","before-close":e.createClose},on:{"update:visible":function(t){e.createVisible=t}}},[a("el-form",{ref:"createForm",attrs:{model:e.createForm,rules:e.createRule}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"项目名称：","label-width":"120px"}},[a("span",[e._v(e._s(e.createForm.projectName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签订人：","label-width":"120px",prop:"signUserId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择签订人",size:"small",clearable:""},model:{value:e.createForm.signUserId,callback:function(t){e.$set(e.createForm,"signUserId",t)},expression:"createForm.signUserId"}},e._l(e.personList,function(e){return a("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"签订日期：","label-width":"120px",prop:"signDate"}},[a("el-date-picker",{attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"签订日期"},model:{value:e.createForm.signDate,callback:function(t){e.$set(e.createForm,"signDate",t)},expression:"createForm.signDate"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签订公司：","label-width":"120px",prop:"signCompanyId"}},[a("el-select",{attrs:{size:"small",placeholder:"我方签约公司",clearable:""},model:{value:e.createForm.signCompanyId,callback:function(t){e.$set(e.createForm,"signCompanyId",t)},expression:"createForm.signCompanyId"}},e._l(e.sign_company_list,function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"年份：","label-width":"120px",prop:"applyYear"}},[a("el-date-picker",{attrs:{size:"small",clearable:"",type:"year","value-format":"yyyy",placeholder:"年份"},model:{value:e.createForm.applyYear,callback:function(t){e.$set(e.createForm,"applyYear",t)},expression:"createForm.applyYear"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"级别：","label-width":"120px",prop:"applyLevel"}},[a("el-select",{attrs:{size:"small",placeholder:"级别",clearable:""},model:{value:e.createForm.applyLevel,callback:function(t){e.$set(e.createForm,"applyLevel",t)},expression:"createForm.applyLevel"}},e._l(e.projectLevelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"批次：","label-width":"120px",prop:"applyBatchNo"}},[a("el-select",{attrs:{size:"small",placeholder:"批次",clearable:""},model:{value:e.createForm.applyBatchNo,callback:function(t){e.$set(e.createForm,"applyBatchNo",t)},expression:"createForm.applyBatchNo"}},e._l(e.batchNoList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量：","label-width":"120px",prop:"applyNum"}},[a("el-input",{attrs:{size:"small",maxlength:"8",oninput:"value=value.replace(/[^0-9]/g,'');if(value > 9999){value = 9999}",placeholder:"数量"},model:{value:e.createForm.applyNum,callback:function(t){e.$set(e.createForm,"applyNum",t)},expression:"createForm.applyNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"单价：","label-width":"120px",prop:"unitPrice"}},[a("span",[e._v(e._s(e.createForm.unitPrice))])])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.createClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveCreateOrder("createForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticStyle:{height:"60px",position:"fixed",bottom:"100px",right:"0",width:"80px"}},[e.btnFlag?a("a",{attrs:{href:"javascript:",target:"_self"},on:{click:e.backTop}},[a("img",{attrs:{src:l("1XGe"),alt:""}})]):e._e()])],1)},staticRenderFns:[]};var m=l("VU/8")(p,d,!1,function(e){l("3HHd")},"data-v-37c142c8",null);t.default=m.exports},T1iU:function(e,t,l){(e.exports=l("FZ+f")(!1)).push([e.i,"\n[data-v-37c142c8] .chooseCompanyId {\n  cursor: pointer;\n}\n.searchCont[data-v-37c142c8] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.searchCont .searchLeft[data-v-37c142c8] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n[data-v-37c142c8] .el-input {\n  width: auto;\n  margin-right: 10px;\n}\n[data-v-37c142c8] .el-table {\n  border: #d9f2ff 1px solid !important;\n}\n[data-v-37c142c8] .el-table th.gutter {\n  display: table-cell !important;\n}\n[data-v-37c142c8] .el-table--border th,[data-v-37c142c8] .el-table th {\n  background: #2CB1F5 !important;\n  color: #fff;\n  font-weight: 400;\n  border-right: 1px solid rgba(220, 223, 230, 0.21);\n  padding: 7px 0;\n}\n[data-v-37c142c8] .el-table__row:nth-child(even) {\n  background: #ebf8ff !important;\n  border: 1px solid rgba(0, 141, 214, 0.26666667);\n}\n[data-v-37c142c8] .el-table--border td {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n[data-v-37c142c8] .el-table--border td:first-child {\n  border-right: #d9f2ff 1px solid !important;\n}\n[data-v-37c142c8] .el-table--border td:last-child {\n  border-left: #d9f2ff 1px solid !important;\n}\n.spanButton[data-v-37c142c8] {\n  color: #05AAFF;\n}\n.shu[data-v-37c142c8] {\n  margin: 0 10px;\n  color: #ccc;\n}\n.col_red[data-v-37c142c8] {\n  color: #FF6B6B !important;\n}\n.col_red[data-v-37c142c8]:hover {\n  opacity: 0.5;\n}\n.col_skyblue[data-v-37c142c8] {\n  color: #05AAFF !important;\n}\n.col_skyblue[data-v-37c142c8]:hover {\n  opacity: 0.5;\n}\n.colUpDown[data-v-37c142c8] {\n  color: #FD903C !important;\n}\n.colUpDown[data-v-37c142c8]:hover {\n  opacity: 0.5;\n}\n.chooseCompany[data-v-37c142c8] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 10px;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n[data-v-37c142c8] .el-select {\n  margin-right: 10px;\n}\n.noMore[data-v-37c142c8] {\n  text-align: center;\n  font-size: 14px;\n  padding: 10px 0;\n  cursor: pointer;\n}\n[data-v-37c142c8] .el-dialog__header {\n  background: #05AAFF;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n[data-v-37c142c8] .el-dialog__header /deep/ .el-dialog__title {\n  color: #fff;\n  font-size: 16px;\n}\n[data-v-37c142c8] .el-dialog__header /deep/ .el-dialog__headerbtn {\n  border-radius: 50%;\n  background: #fff;\n  padding: 4px;\n  font-size: 12px;\n  font-weight: 400;\n}\n[data-v-37c142c8] .el-dialog__header /deep/ .el-dialog__headerbtn /deep/ .el-dialog__close {\n  color: #05AAFF;\n}\n[data-v-37c142c8] .el-dialog__footer {\n  text-align: center;\n}\n[data-v-37c142c8] .el-dialog__footer /deep/ .el-button {\n  border-radius: 2px;\n  height: 36px;\n  line-height: 36px;\n  padding: 0 20px;\n}\n",""])}});