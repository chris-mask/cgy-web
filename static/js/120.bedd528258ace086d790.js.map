{"version":3,"sources":["webpack:///./src/views/project/customer_detail/list.vue?eeee","webpack:///src/views/project/customer_detail/list.vue","webpack:///./src/views/project/customer_detail/list.vue?b393","webpack:///./src/views/project/customer_detail/list.vue","webpack:///./src/views/project/customer_detail/list.vue?032c"],"names":["module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","customer_detail_list","required","message","trigger","getMaterialList","_this","this","id","data","_this2","companyId","_this3","fileList","name","filePath","size","addFile","companyName","FileList","_this4","getModalList","_this5","projectId","applyYear","applyLevel","materialType","orderId","provinceId","cityId","districtId","townId","materialId","_this6","fileId","clearFiles","_this7","item","url","_this8","applyFileId","fileIdString","chin_list","sn","Math","floor","project_customer_detail_list","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","upFileBtnHandle","_v","_l","index","_s","_f","projectName","applyBatchNo","_e","nums","materialTypeName","list","listNum","fileName","$event","downFileHandle","delFileList","directives","rawName","attrs","title","before-close","cananlAddAnnex","visible","addAnnexModal","width","update:visible","ref","model","upFilesParams","rules","upFilesRules","label-width","label","prop","change","projectChange","value","callback","$$v","$set","expression","key","maxlength","placeholder","annaxChange","dictId","dictName","modalList","length","staticStyle","color","font-weight","padding-left","margin-right","display","http-request","handleFilesUpload","on-remove","delFilesUploadHandle","show-file-list","slot","setAddAnnex","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","content","locals"],"mappings":"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","file":"static/js/120.bedd528258ace086d790.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\nul li[data-v-0e4cfe97] {\\n  list-style: none;\\n}\\n.customer-files .up-file-btn[data-v-0e4cfe97] {\\n  padding: 9px 15px;\\n  background: #409EFF;\\n  border: 0;\\n  color: #fff;\\n  margin-bottom: 10px;\\n}\\n.customer-files .up-file-btn[data-v-0e4cfe97]:active {\\n  opacity: 0.5;\\n}\\n.customer-files .one-list[data-v-0e4cfe97] {\\n  margin-bottom: 12px;\\n  padding-left: 5px;\\n}\\n.customer-files .one-list .two-list[data-v-0e4cfe97] {\\n  padding-left: 30px;\\n  margin-top: 12px;\\n}\\n.customer-files .one-list .three-list[data-v-0e4cfe97] {\\n  padding-left: 40px;\\n  margin-top: 5px;\\n}\\n.customer-files .one-list .three-list .file-list li[data-v-0e4cfe97] {\\n  margin-top: 12px;\\n}\\n.customer-files .one-list .three-list .file-list .read[data-v-0e4cfe97] {\\n  color: #409EFF;\\n  cursor: pointer;\\n  margin-left: 10px;\\n}\\n.customer-files .one-list .three-list .file-list .del[data-v-0e4cfe97] {\\n  color: red;\\n  cursor: pointer;\\n  margin-left: 5px;\\n}\\n.customer-files .editorUserModal .add-file-btn[data-v-0e4cfe97] {\\n  background: #05aaff;\\n  color: #fff;\\n  border: 0;\\n  padding: 9px 15px;\\n}\\n.customer-files .editorUserModal .add-file-btn[data-v-0e4cfe97]:active {\\n  opacity: 0.5;\\n}\\n.customer-files .editorUserModal .model-files-list li[data-v-0e4cfe97] {\\n  color: #05aaff;\\n}\\n.customer-files .editorUserModal .model-files-list li .down[data-v-0e4cfe97] {\\n  cursor: pointer;\\n}\\n.customer-files .editorUserModal .update-files-list .del-upFile[data-v-0e4cfe97] {\\n  color: red;\\n  cursor: pointer;\\n}\\n.customer-files .editorUserModal .dialog-footer .setBtn[data-v-0e4cfe97] {\\n  color: #fff;\\n  background: #05aaff;\\n}\\n.customer-files .editorUserModal .dialog-footer .cananl[data-v-0e4cfe97] {\\n  background: #fff;\\n  color: #444444;\\n}\\n.customer-files .update-file-form[data-v-0e4cfe97] .el-form-item__content {\\n  margin-left: 0 !important;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"H:/chengguoyun-web/src/views/project/customer_detail/list.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,iBAAiB;CAClB;AACD;EACE,kBAAkB;EAClB,oBAAoB;EACpB,UAAU;EACV,YAAY;EACZ,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,oBAAoB;EACpB,kBAAkB;CACnB;AACD;EACE,mBAAmB;EACnB,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,gBAAgB;CACjB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,WAAW;EACX,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,YAAY;EACZ,UAAU;EACV,kBAAkB;CACnB;AACD;EACE,aAAa;CACd;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,WAAW;EACX,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,oBAAoB;CACrB;AACD;EACE,iBAAiB;EACjB,eAAe;CAChB;AACD;EACE,0BAA0B;EAC1B,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;CACf\",\"file\":\"list.vue\",\"sourcesContent\":[\"\\nul li[data-v-0e4cfe97] {\\n  list-style: none;\\n}\\n.customer-files .up-file-btn[data-v-0e4cfe97] {\\n  padding: 9px 15px;\\n  background: #409EFF;\\n  border: 0;\\n  color: #fff;\\n  margin-bottom: 10px;\\n}\\n.customer-files .up-file-btn[data-v-0e4cfe97]:active {\\n  opacity: 0.5;\\n}\\n.customer-files .one-list[data-v-0e4cfe97] {\\n  margin-bottom: 12px;\\n  padding-left: 5px;\\n}\\n.customer-files .one-list .two-list[data-v-0e4cfe97] {\\n  padding-left: 30px;\\n  margin-top: 12px;\\n}\\n.customer-files .one-list .three-list[data-v-0e4cfe97] {\\n  padding-left: 40px;\\n  margin-top: 5px;\\n}\\n.customer-files .one-list .three-list .file-list li[data-v-0e4cfe97] {\\n  margin-top: 12px;\\n}\\n.customer-files .one-list .three-list .file-list .read[data-v-0e4cfe97] {\\n  color: #409EFF;\\n  cursor: pointer;\\n  margin-left: 10px;\\n}\\n.customer-files .one-list .three-list .file-list .del[data-v-0e4cfe97] {\\n  color: red;\\n  cursor: pointer;\\n  margin-left: 5px;\\n}\\n.customer-files .editorUserModal .add-file-btn[data-v-0e4cfe97] {\\n  background: #05aaff;\\n  color: #fff;\\n  border: 0;\\n  padding: 9px 15px;\\n}\\n.customer-files .editorUserModal .add-file-btn[data-v-0e4cfe97]:active {\\n  opacity: 0.5;\\n}\\n.customer-files .editorUserModal .model-files-list li[data-v-0e4cfe97] {\\n  color: #05aaff;\\n}\\n.customer-files .editorUserModal .model-files-list li .down[data-v-0e4cfe97] {\\n  cursor: pointer;\\n}\\n.customer-files .editorUserModal .update-files-list .del-upFile[data-v-0e4cfe97] {\\n  color: red;\\n  cursor: pointer;\\n}\\n.customer-files .editorUserModal .dialog-footer .setBtn[data-v-0e4cfe97] {\\n  color: #fff;\\n  background: #05aaff;\\n}\\n.customer-files .editorUserModal .dialog-footer .cananl[data-v-0e4cfe97] {\\n  background: #fff;\\n  color: #444444;\\n}\\n.customer-files .update-file-form[data-v-0e4cfe97] .el-form-item__content {\\n  margin-left: 0 !important;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0e4cfe97\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/customer_detail/list.vue\n// module id = 1svc\n// module chunks = 3 120","<template>\n  <div class=\"customer-files\">\n    <el-button class=\"up-file-btn\" @click=\"upFileBtnHandle\">上传附件</el-button>\n    <div class=\"one-list\" v-for=\"(item,index) in listData\">\n      <div class=\"title\">\n        {{index | toCN}}、{{item.projectName}}\n        <span v-if=\"item.applyYear || item.applyBatchNo\">\n          (年份：{{item.applyYear && item.applyYear!==''?item.applyYear:'-'}} 批次：{{item.applyBatchNo && item.applyBatchNo !==''?item.applyBatchNo:'-'}})\n        </span>\n      </div>\n      <div class=\"two-list\" v-for=\"(data,nums) in item.crmProjectApplyFileVos\">\n        <div class=\"title\">\n          ({{nums+1}}) 、{{data.materialTypeName}}\n          <div class=\"three-list\">\n            <ul class=\"file-list\">\n              <li v-for=\"(list,listNum) in data.fileIdsList\">\n                {{listNum+1}} . {{list.fileName}}\n                <span class=\"read\" @click=\"downFileHandle(list)\">下载</span>\n                <span class=\"del\" @click=\"delFileList(item,data,list)\">删除</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--上传附件--弹窗-->\n    <el-dialog title=\"上传附件\" class=\"editorUserModal\" :before-close=\"cananlAddAnnex\" :visible.sync=\"addAnnexModal\"\n               width=\"650px\" v-dialogDrag>\n      <el-form :model=\"upFilesParams\" :rules=\"upFilesRules\" ref=\"upFilesModal\" label-width=\"100px\">\n\n        <el-form-item label=\"项目：\" prop=\"orderId\">\n          <el-select v-model=\"upFilesParams.orderId\" @change=\"projectChange\">\n            <el-option\n              v-for=\"(item,index) in projectListData\"\n              :value=\"item.orderId\"\n              :label=\"item.projectName\"\n              :key=\"index\"\n            />\n          </el-select>\n        </el-form-item>\n\n\n        <el-form-item v-if=\"upFilesParams.orderId == 1\" label=\"\" prop=\"projectName\">\n          <el-input maxlength=\"100\" v-model=\"upFilesParams.projectName\" placeholder=\"项目名称\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"附件分类：\" prop=\"materialType\">\n          <el-select @change=\"annaxChange\" v-model=\"upFilesParams.materialType\">\n            <el-option\n              v-for=\"item in annexTypeData\"\n              :value=\"item.dictId\"\n              :label=\"item.dictName\"\n              :key=\"item.dictId\"\n            />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"下载模板：\" v-if=\"modalList.length !== 0\">\n          <ul class=\"model-files-list\">\n            <li v-for=\"(item,index) in modalList\">\n              {{index+1}}.{{item.fileName}} <span class=\"down\" @click=\"downFileHandle(item)\">下载</span>\n            </li>\n          </ul>\n        </el-form-item>\n\n        <el-form-item class=\"update-file-form\">\n          <div style=\"width: 100px;color: #606266;font-weight: bold;padding-left: 7px;\"><span\n            style=\"color:#F56C6C;margin-right: 4px;\">*</span>上传附件：\n          </div>\n          <div>\n            <el-upload style=\"display: inline-block;width:100%;\"\n                       ref=\"upload\"\n                       class=\"upload-box upload-box-width\"\n                       :http-request=\"handleFilesUpload\"\n                       :on-remove=\"delFilesUploadHandle\"\n                       :show-file-list=\"true\">\n              <el-button class=\"add-file-btn\">增加文件</el-button>\n            </el-upload>\n          </div>\n        </el-form-item>\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"setBtn\" @click=\"setAddAnnex\">确 定</el-button>\n        <el-button class=\"cananl\" @click=\"cananlAddAnnex\">取 消</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\n  import {\n    getOrderApplyMaterialListInfo,\n    queryProjectApplyFile,\n    updateProjectApplyFile,\n    deleteProjectApplyFileIds,\n    ossFileDownload,\n    queryCompanyOrderList\n  } from '@/api/customerCenter'\n  import {getFileDownload} from '@/api/fileManage'\n  import {addFileBatch, commonDict, getFileListWithFileIds} from '@/api/utils'\n  import {uploadFilesOss} from '@/utils/uploadFilesOss'\n  import {annexUpload} from '@/utils/uploadPathMethods'\n  import cloneDeep from \"lodash/cloneDeep\";\n\n\n  export default {\n    data() {\n      return {\n        // 上传附件--弹窗--显示/隐藏\n        addAnnexModal: false,\n\n        // 列表数据\n        listData: [],\n\n        // 项目数据列表\n        projectListData: [],\n\n        //附件分类数据\n        annexTypeData: [],\n\n        //上传附件提交数据\n        upFilesParams: {},\n\n        //附件列表的数据\n        annexList: [],\n        fileList: [],\n\n        //下载模板数据\n        modalList: [],\n\n        //判断是否显示下载模板\n        isShowDownModel: false,\n\n        //监听上传附件弹窗form数据不能为空\n        upFilesRules: {\n          orderId: [\n            {required: true, message: '请选择项目', trigger: 'blur'}\n          ],\n          projectName: [\n            {required: true, message: '请输入项目名称', trigger: 'blur'}\n          ],\n          materialType: [\n            {required: true, message: '请选择附件分类', trigger: 'blur'}\n          ],\n        },\n\n        //获取下载模板--参数\n        downModalParams: {}\n      }\n    },\n    props: ['id', 'companyNames', 'provinceId', 'cityId', 'districtId', 'townId'],\n    mounted() {\n      this.getMaterialList();\n    },\n    activated() {\n      this.getMaterialList();\n    },\n    methods: {\n      //获取列表信息\n      getMaterialList() {\n        let params = {\n          companyId: this.id,\n          page: 0,\n          pageSize: 20\n        };\n        queryProjectApplyFile(params).then(res => {\n          if (res.code === 200) {\n            res.data.data.forEach(item => {\n              if (item.crmProjectApplyFileVos.length !== 0) {\n                item.crmProjectApplyFileVos.forEach(data => {\n                  if (data.fileIds) {\n                    data.fileIds = data.fileIds.split(',');\n                    getFileListWithFileIds({fileIds: data.fileIds, haveView: false}).then(res => {\n                      if (res.code == 200) {\n                        data.fileIdsList = cloneDeep(res.data);\n                      } else {\n                        this.$message.warning(res.message)\n                      }\n                    })\n                  }\n\n                })\n              }\n            });\n\n            setTimeout(() => {\n              this.listData = res.data.data;\n            }, 500)\n          }\n        })\n      },\n\n      //点击上传附件按钮\n      upFileBtnHandle() {\n        this.addAnnexModal = true;\n        let params = {\n          keyList: 'DICT:MATERIALTYPE',\n          companyId: this.$store.getters.companyId\n        };\n        commonDict(params).then(res => {\n          if (res.code == 200) {\n            this.annexTypeData = res.data['DICT:MATERIALTYPE'];\n          } else {\n            this.$message({type: 'error', message: res.message})\n          }\n        })\n\n        let proParams = {\n          page: 0,\n          pageSize: 30,\n          companyId: this.id\n        }\n\n        queryCompanyOrderList(proParams).then(res => {\n          if (res.code === 200) {\n            res.data.data.forEach(item => {\n              item.projectName = `${item.projectName}  ${item.applyYear ? '年份:' + item.applyYear : ''}  ${item.applyBatchNo ? '批次:' + item.applyBatchNo : ''} `\n            });\n            this.projectListData = res.data.data;\n          }\n        })\n\n      },\n\n      //增加文件\n      handleFilesUpload(option) {\n        if (option.file.name.length >= 150) {\n          this.$message.error('文件名称超长，请检查');\n          this.fileList = JSON.parse(JSON.stringify(this.fileList))\n          return;\n        }\n        // 调用 ali-oss 中的方法\n        let fileName = option.file.name.split('.');\n        let filePath = annexUpload(this.companyNames, fileName[0]) + '.' + fileName[fileName.length-1];\n        uploadFilesOss(filePath, option.file, option).then(res => {\n          if (res) {\n            let FileList = [];\n            let addFile = {\n              fileName: option.file.name,\n              filePath: filePath,\n              fileSize: option.file.size,\n              fileType: fileName[fileName.length - 1],\n              parentType: 4\n            }\n            FileList.push(addFile)\n            let params = {\n              companyId: this.$store.getters.companyId,\n              companyName: this.$store.getters.companyName,\n              addFileDtos: FileList,\n              haveView: true\n            }\n\n            addFileBatch(params).then(response => {\n              if (response.code == 200) {\n                this.$message.success('上传成功');\n                this.annexList.push(response.data[0]);\n              }\n            })\n          }\n        })\n      },\n\n      //删除--增加文件\n      delFilesUploadHandle(file, index) {\n        this.annexList.forEach((item, i) => {\n          if (file.name == item.fileName) {\n            this.annexList.splice(i, 1);\n          }\n        })\n      },\n\n      //选择项目获取模板\n      projectChange(val) {\n        if (val == 0 || val == 1 || !this.upFilesParams.materialType || this.upFilesParams.materialType == '') {\n          this.isShowDownModel = false;\n          this.modalList = [];\n          this.downModalParams = {};\n        } else {\n          this.isShowDownModel = true;\n          this.getModalList();\n        }\n      },\n\n      //选择附件分类\n      annaxChange() {\n        if (this.upFilesParams.orderId && this.upFilesParams.orderId != '' && this.upFilesParams.orderId != 0 && this.upFilesParams.orderId !=1) {\n          this.getModalList();\n        }\n      },\n\n      //获取下载模板数据\n      getModalList() {\n        this.projectListData.forEach(item => {\n          if (item.orderId == this.upFilesParams.orderId) {\n            this.downModalParams.projectId = item.projectId;\n            this.downModalParams.applyYear = item.applyYear;\n            this.downModalParams.applyLevel = item.applyLevel;\n          }\n        });\n\n        this.downModalParams.materialType = this.upFilesParams.materialType;\n        this.downModalParams.orderId = this.upFilesParams.orderId;\n        this.downModalParams.provinceId = this.provinceId;\n        this.downModalParams.cityId = this.cityId;\n        this.downModalParams.districtId = this.districtId;\n        this.downModalParams.townId = this.townId;\n\n        getOrderApplyMaterialListInfo(this.downModalParams).then(res => {\n          if (res.code == 200) {\n            if (res.data.templateFileIds) {\n              let arr = res.data.templateFileIds.split(',');\n              this.upFilesParams.materialId = res.data.materialId;\n              getFileListWithFileIds({fileIds: arr, haveView: false}).then(res => {\n                if (res.code == 200) {\n                  this.modalList = res.data;\n                } else {\n                  this.$message.warning(res.message)\n                }\n              })\n            } else {\n              this.modalList = [];\n            }\n          }\n        })\n      },\n\n      //确定新增上传附件\n      setAddAnnex() {\n        this.$refs.upFilesModal.validate((valid, error) => {\n          if (valid) {\n            if (this.annexList.length == 0) {\n              this.$message.warning('请上传附件');\n              return\n            }\n\n            let arr = this.annexList.map(item => {\n              return item.fileId\n            });\n            this.upFilesParams.fileIds = arr.join(',');\n            this.upFilesParams.crmCompanyId = this.id;\n\n            updateProjectApplyFile(this.upFilesParams).then(res => {\n              if (res.code === 200) {\n                this.getMaterialList();\n                this.upFilesParams = {};\n                this.downModalParams = {};\n                this.annexList = [];\n                this.modalList = [];\n                this.$refs.upload.clearFiles()\n                this.addAnnexModal = false;\n              }\n            })\n\n          }\n        })\n      },\n\n      //取消上传附件\n      cananlAddAnnex() {\n        this.upFilesParams = {};\n        this.downModalParams = {};\n        this.annexList = [];\n        this.fileList = [];\n        this.modalList = []\n        this.addAnnexModal = false;\n      },\n\n      //下载附件\\模板\n      downFileHandle(data) {\n        if(!data.fileId){\n          this.annexList.forEach(item=>{\n            if(item.fileName == data.name){\n              data = item;\n            }\n          })\n        }\n\n        if (data.fileId) {\n          let params = {\n            companyId: this.$store.getters.companyId,\n            fileId: data.fileId\n          };\n          ossFileDownload(params).then(res => {\n            if (res.code == 200) {\n              // window.open(res.data)\n              let url = res.data.split('//')\n              url = 'https://' + url[1]\n              window.location.href = url;\n              // this.$message({type: 'success', message: '下载成功'});\n            } else {\n              this.$message({type: 'error', message: res.message})\n            }\n          })\n        }\n      },\n\n      // 删除文件\n      delFileList(item, data, list) {\n        let newFileIdlist = data.fileIdsList.filter(item => {\n          if (item.fileId !== list.fileId) {\n            return item\n          }\n        });\n        let fileIdarr = newFileIdlist.map(item => {\n          return item.fileId\n        });\n\n        let fileIdString = fileIdarr.join(',');\n\n        let params = {\n          applyFileId: data.applyFileId,\n          fileIds: fileIdString\n        };\n\n        deleteProjectApplyFileIds(params).then(res => {\n          if (res.code === 200) {\n            this.getMaterialList();\n            this.$message.success('删除成功');\n          }\n        })\n      },\n\n\n    },\n    filters: {\n      toCN(val) {\n        let chin_list = ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十'];//所有的数值对应的汉字\n        let sn = parseInt(val) + 1;//这里由于我的后台是从0开始排序\n        if (sn <= 10) {\n          return chin_list[sn - 1];\n        } else if (sn <= 100) {\n          if (sn < 20)\n            return '十' + chin_list[sn % 10 - 1];\n          if (sn % 10 == 0)\n            return chin_list[Math.floor(sn / 10) - 1] + '十';\n          else\n            return chin_list[Math.floor(sn / 10) - 1] + '十' + chin_list[sn % 10 - 1];\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  ul li {\n    list-style: none;\n  }\n\n  .customer-files {\n    .up-file-btn {\n      padding: 9px 15px;\n      background: #409EFF;\n      border: 0;\n      color: #fff;\n      margin-bottom: 10px;\n\n      &:active {\n        opacity: 0.5;\n      }\n    }\n\n    .one-list {\n      margin-bottom: 12px;\n      padding-left: 5px;\n\n      .two-list {\n        padding-left: 30px;\n        margin-top: 12px;\n      }\n\n      .three-list {\n        padding-left: 40px;\n        margin-top: 5px;\n\n        .file-list {\n          li {\n            margin-top: 12px;\n          }\n\n          .read {\n            color: #409EFF;\n            cursor: pointer;\n            margin-left: 10px;\n          }\n\n          .del {\n            color: red;\n            cursor: pointer;\n            margin-left: 5px;\n          }\n        }\n      }\n    }\n\n    .editorUserModal {\n      .add-file-btn {\n        background: rgba(5, 170, 255, 1);\n        color: #fff;\n        border: 0;\n        padding: 9px 15px;\n\n        &:active {\n          opacity: 0.5;\n        }\n      }\n\n      .model-files-list {\n        li {\n          color: rgba(5, 170, 255, 1);\n\n          .down {\n            cursor: pointer;\n          }\n        }\n      }\n\n      .update-files-list {\n        .del-upFile {\n          color: red;\n          cursor: pointer;\n        }\n      }\n\n      .dialog-footer {\n        .setBtn {\n          color: #fff;\n          background: rgba(5, 170, 255, 1);\n        }\n\n        .cananl {\n          background: #fff;\n          color: rgba(68, 68, 68, 1);\n        }\n      }\n    }\n\n    .update-file-form {\n      /deep/ .el-form-item__content {\n        margin-left: 0 !important;\n        display: flex;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/project/customer_detail/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"customer-files\"},[_c('el-button',{staticClass:\"up-file-btn\",on:{\"click\":_vm.upFileBtnHandle}},[_vm._v(\"上传附件\")]),_vm._v(\" \"),_vm._l((_vm.listData),function(item,index){return _c('div',{staticClass:\"one-list\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n      \"+_vm._s(_vm._f(\"toCN\")(index))+\"、\"+_vm._s(item.projectName)+\"\\n      \"),(item.applyYear || item.applyBatchNo)?_c('span',[_vm._v(\"\\n        (年份：\"+_vm._s(item.applyYear && item.applyYear!==''?item.applyYear:'-')+\" 批次：\"+_vm._s(item.applyBatchNo && item.applyBatchNo !==''?item.applyBatchNo:'-')+\")\\n      \")]):_vm._e()]),_vm._v(\" \"),_vm._l((item.crmProjectApplyFileVos),function(data,nums){return _c('div',{staticClass:\"two-list\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n        (\"+_vm._s(nums+1)+\") 、\"+_vm._s(data.materialTypeName)+\"\\n        \"),_c('div',{staticClass:\"three-list\"},[_c('ul',{staticClass:\"file-list\"},_vm._l((data.fileIdsList),function(list,listNum){return _c('li',[_vm._v(\"\\n              \"+_vm._s(listNum+1)+\" . \"+_vm._s(list.fileName)+\"\\n              \"),_c('span',{staticClass:\"read\",on:{\"click\":function($event){return _vm.downFileHandle(list)}}},[_vm._v(\"下载\")]),_vm._v(\" \"),_c('span',{staticClass:\"del\",on:{\"click\":function($event){return _vm.delFileList(item,data,list)}}},[_vm._v(\"删除\")])])}),0)])])])})],2)}),_vm._v(\" \"),_c('el-dialog',{directives:[{name:\"dialogDrag\",rawName:\"v-dialogDrag\"}],staticClass:\"editorUserModal\",attrs:{\"title\":\"上传附件\",\"before-close\":_vm.cananlAddAnnex,\"visible\":_vm.addAnnexModal,\"width\":\"650px\"},on:{\"update:visible\":function($event){_vm.addAnnexModal=$event}}},[_c('el-form',{ref:\"upFilesModal\",attrs:{\"model\":_vm.upFilesParams,\"rules\":_vm.upFilesRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"项目：\",\"prop\":\"orderId\"}},[_c('el-select',{on:{\"change\":_vm.projectChange},model:{value:(_vm.upFilesParams.orderId),callback:function ($$v) {_vm.$set(_vm.upFilesParams, \"orderId\", $$v)},expression:\"upFilesParams.orderId\"}},_vm._l((_vm.projectListData),function(item,index){return _c('el-option',{key:index,attrs:{\"value\":item.orderId,\"label\":item.projectName}})}),1)],1),_vm._v(\" \"),(_vm.upFilesParams.orderId == 1)?_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"projectName\"}},[_c('el-input',{attrs:{\"maxlength\":\"100\",\"placeholder\":\"项目名称\"},model:{value:(_vm.upFilesParams.projectName),callback:function ($$v) {_vm.$set(_vm.upFilesParams, \"projectName\", $$v)},expression:\"upFilesParams.projectName\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"附件分类：\",\"prop\":\"materialType\"}},[_c('el-select',{on:{\"change\":_vm.annaxChange},model:{value:(_vm.upFilesParams.materialType),callback:function ($$v) {_vm.$set(_vm.upFilesParams, \"materialType\", $$v)},expression:\"upFilesParams.materialType\"}},_vm._l((_vm.annexTypeData),function(item){return _c('el-option',{key:item.dictId,attrs:{\"value\":item.dictId,\"label\":item.dictName}})}),1)],1),_vm._v(\" \"),(_vm.modalList.length !== 0)?_c('el-form-item',{attrs:{\"label\":\"下载模板：\"}},[_c('ul',{staticClass:\"model-files-list\"},_vm._l((_vm.modalList),function(item,index){return _c('li',[_vm._v(\"\\n            \"+_vm._s(index+1)+\".\"+_vm._s(item.fileName)+\" \"),_c('span',{staticClass:\"down\",on:{\"click\":function($event){return _vm.downFileHandle(item)}}},[_vm._v(\"下载\")])])}),0)]):_vm._e(),_vm._v(\" \"),_c('el-form-item',{staticClass:\"update-file-form\"},[_c('div',{staticStyle:{\"width\":\"100px\",\"color\":\"#606266\",\"font-weight\":\"bold\",\"padding-left\":\"7px\"}},[_c('span',{staticStyle:{\"color\":\"#F56C6C\",\"margin-right\":\"4px\"}},[_vm._v(\"*\")]),_vm._v(\"上传附件：\\n        \")]),_vm._v(\" \"),_c('div',[_c('el-upload',{ref:\"upload\",staticClass:\"upload-box upload-box-width\",staticStyle:{\"display\":\"inline-block\",\"width\":\"100%\"},attrs:{\"http-request\":_vm.handleFilesUpload,\"on-remove\":_vm.delFilesUploadHandle,\"show-file-list\":true}},[_c('el-button',{staticClass:\"add-file-btn\"},[_vm._v(\"增加文件\")])],1)],1)])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"setBtn\",on:{\"click\":_vm.setAddAnnex}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"cananl\",on:{\"click\":_vm.cananlAddAnnex}},[_vm._v(\"取 消\")])],1)],1)],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e4cfe97\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/project/customer_detail/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e4cfe97\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e4cfe97\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0e4cfe97\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/customer_detail/list.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e4cfe97\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/less-loader/dist/cjs.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./list.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"06ac7d66\", content, true);\n\n\n// WEBPACK FOOTER //\n// \"}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0e4cfe97\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/customer_detail/list.vue"],"sourceRoot":""}