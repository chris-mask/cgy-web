webpackJsonp([13],{"3Fj2":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.row-width-auto-margin-0-90[data-v-5d43061e] {\n  width: auto;\n  margin: auto 1%;\n}\n[data-v-5d43061e] .el-card__header {\n  padding: 10px 20px;\n}\n.cardCont[data-v-5d43061e] {\n  margin-bottom: 15px;\n}\n.cardCont[data-v-5d43061e] .el-card__body {\n  padding: 0;\n}\n.headerTop[data-v-5d43061e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.headerLeft[data-v-5d43061e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.headerLeft span[data-v-5d43061e] {\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n  border-left: 2px solid #05AAFF;\n  padding-left: 10px;\n}\n.headerLeft span span[data-v-5d43061e] {\n  color: #F56C6C;\n}\n.headerLeft .orginLeft[data-v-5d43061e] {\n  border-left: 2px solid #FFA96A;\n}\n.headerLeft .headBtn[data-v-5d43061e] {\n  margin-left: 40px;\n  font-size: 14px;\n}\n.headerLeft .headBtn .allChoose[data-v-5d43061e] {\n  padding: 6px 8px;\n  color: #05AAFF;\n  border: 1px solid #05AAFF;\n  background-color: #fff;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .export[data-v-5d43061e] {\n  padding: 6px 8px;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .allDelete[data-v-5d43061e] {\n  padding: 6px 8px;\n  color: #fff;\n  border: 1px solid #FF8585;\n  background-color: #FF8585;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .originBtn[data-v-5d43061e] {\n  padding: 6px 8px;\n  color: #fff;\n  border: 1px solid #FD903C;\n  background-color: #FD903C;\n  border-radius: 2px;\n}\n.conditionCont[data-v-5d43061e] {\n  padding: 10px 20px;\n}\n.conditionCont .conditionBox[data-v-5d43061e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 10px;\n  position: relative;\n}\n.conditionCont .conditionBox span[data-v-5d43061e] {\n  font-size: 14px;\n  color: #606266;\n  margin-right: 10px;\n  min-width: 70px;\n}\n.conditionCont .conditionBox .el-select[data-v-5d43061e] {\n  margin-right: 10px;\n}\n.conditionCont .conditionBox .el-date-editor[data-v-5d43061e] {\n  margin-right: 10px;\n}\n.star[data-v-5d43061e] {\n  color: #ff3d4c !important;\n  position: absolute;\n  left: -8px;\n}\n.dataHead[data-v-5d43061e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.14901961);\n  padding: 0 20px;\n  /*overflow: auto;*/\n}\n.dataHead[data-v-5d43061e]::-webkit-scrollbar {\n  /*滚动条整体样式*/\n  width: 10px;\n  /*高宽分别对应横竖滚动条的尺寸*/\n  height: 2px;\n}\n.dataHead[data-v-5d43061e]::-webkit-scrollbar-thumb {\n  /*滚动条里面小方块*/\n  border-radius: 50px;\n  -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n  background: rgba(5, 170, 255, 0.75);\n}\n.dataHead[data-v-5d43061e]::-webkit-scrollbar-track {\n  /*滚动条里面轨道*/\n  -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n  border-radius: 50px;\n  background: #f9f9f9;\n}\n.dataHead .dataHeadBox[data-v-5d43061e] {\n  -webkit-box-flex: 3;\n      -ms-flex: 3;\n          flex: 3;\n  text-align: center;\n  padding: 15px 0;\n  font-weight: bold;\n  /*min-width: 300px;*/\n}\n.dataHead .dataHeadBox[data-v-5d43061e]:first-child {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  min-width: 174px;\n}\n.conditionList[data-v-5d43061e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-left: 10px;\n}\n.conditionList .conditionBox[data-v-5d43061e] {\n  border: 1px solid #33B3EE;\n  font-size: 12px;\n  color: #33B3EE;\n  padding: 5px;\n  margin-right: 10px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.conditionClear[data-v-5d43061e] {\n  border: 1px solid #ff0000;\n  font-size: 12px;\n  color: #ff0000;\n  padding: 5px;\n  cursor: pointer;\n}\n[data-v-5d43061e] .el-table {\n  border: #d9f2ff 1px solid !important;\n}\n[data-v-5d43061e] .el-table th.gutter {\n  display: table-cell !important;\n}\n[data-v-5d43061e] .el-table--border th,[data-v-5d43061e] .el-table th {\n  background: #2CB1F5 !important;\n  color: #fff;\n  font-weight: 400;\n  border-right: 1px solid rgba(220, 223, 230, 0.21);\n  padding: 7px 0;\n}\n[data-v-5d43061e] .el-table__row:nth-child(even) {\n  background: #ebf8ff !important;\n  border: 1px solid rgba(0, 141, 214, 0.26666667);\n}\n[data-v-5d43061e] .el-table--border td {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n[data-v-5d43061e] .el-table--border td:first-child {\n  border-right: #d9f2ff 1px solid !important;\n}\n[data-v-5d43061e] .el-table--border td:last-child {\n  border-left: #d9f2ff 1px solid !important;\n}\n[data-v-5d43061e] .el-table--scrollable-x .el-table__body-wrapper {\n  max-height: 50vh;\n  overflow-y: auto;\n}\n.spanButton[data-v-5d43061e] {\n  color: #05AAFF;\n}\n.shu[data-v-5d43061e] {\n  margin: 0 10px;\n  color: #ccc;\n}\n.col_red[data-v-5d43061e] {\n  color: #FF6B6B !important;\n}\n.col_red[data-v-5d43061e]:hover {\n  opacity: 0.5;\n}\n.col_skyblue[data-v-5d43061e] {\n  color: #05AAFF !important;\n}\n.col_skyblue[data-v-5d43061e]:hover {\n  opacity: 0.5;\n}\n.colUpDown[data-v-5d43061e] {\n  color: #FD903C !important;\n}\n.colUpDown[data-v-5d43061e]:hover {\n  opacity: 0.5;\n}\n.projectTable[data-v-5d43061e] {\n  padding: 10px;\n}\n.noMore[data-v-5d43061e] {\n  text-align: center;\n  padding: 20px 0;\n  cursor: pointer;\n  font-size: 14px;\n}\n",""])},"4y0q":function(t,e,n){var a=n("3Fj2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("92d17c0c",a,!0)},gxZ5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Q5rI"),i=(n("evsg"),n("uB1z")),o=n("rN1C"),s=n("5ybE"),r=n("l8D1"),d=n("c8+v"),l={data:function(){return{btnFlag:0,singnForm:{page:0,pageSize:20},total:0,projectList:[],deptmentList:[],companyList:[],userList:[],selectConditionsList:{},signDate:[],entryDate:[],projectReport:[],provinceList:[],cityList:[],districtList:[],townList:[],level:3,parentId:0,projectForm:{page:0,pageSize:1e7,orderField:"sales",orderType:"DESC"},loading:!1,allowGetDeptList:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:DEPT:MANAGE","SYSTEM:DEPT:LIST"),signReport:[]}},activated:function(){this.getProjectList(),this.getCompanyList(),this.getDepartmentList()},directives:{loadMore:{bind:function(t,e){t.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&e.value()})}}},methods:{backTop:function(){var t=this,e=setInterval(function(){var n=Math.floor(-t.scrollTop/5);document.documentElement.scrollTop=document.body.scrollTop=t.scrollTop+n,0===t.scrollTop&&clearInterval(e)},16)},scrollToTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,this.scrollTop>0?this.btnFlag=!0:this.btnFlag=!1},showSignOrder:function(){var t=this;""!=this.singnForm.deptId&&void 0!=this.singnForm.deptId&&""!=this.entryDate&&void 0!=this.entryDate?(console.log(this.singnForm,"==singnForm=>"),Object(i.c)(this.singnForm).then(function(e){200==e.code&&(console.log(e.data),t.signReport=e.data)})):this.$message.warning("必选条件必须全选")},getMore:function(){this.singnForm.page=this.singnForm.page+20,this.showSignOrder()},getProjectList:function(t){var e=this;this.projectForm.projectName=t||"",Object(o.e)(this.projectForm).then(function(t){200==t.code?e.projectForm.page>0?e.projectList=e.projectList.concat(t.data.data):e.projectList=t.data.data:e.$message.warning(t.message)})},loadMore:function(){this.projectForm.page=this.projectForm.page+20,this.getProjectList()},getCompanyList:function(){var t=this;Object(r.o)().then(function(e){200==e.code?t.companyList=e.data:t.$message.warning(e.message)})},getDepartmentList:function(){var t=this;Object(s.f)({}).then(function(e){200==e.code?t.deptmentList=e.data.deptInfoTreeVos:t.$message.warning(e.message)})},getPersonList:function(t,e){var n=this,a=new FormData;a.append("roleNameList",t),void 0!=e&&a.append("deptIdList",e),Object(d.E)(a).then(function(t){200==t.code?n.userList=t.data:n.$message.warning(t.message)})},handleExport:function(){var t=this;if(""!=this.singnForm.deptId&&void 0!=this.singnForm.deptId)if(""!=this.entryDate&&void 0!=this.entryDate){var e=this.$loading({lock:!0,text:"导出中，请稍等..."});Object(i.d)(this.singnForm).then(function(n){if(200==n.code){var i={fileName:n.message,delete:!0};Object(a.g)(i).then(function(n){var a=window.URL.createObjectURL(n),i=document.createElement("a");document.body.appendChild(i);var o=(new Date).getFullYear()+""+((new Date).getMonth()+1)+(new Date).getDate()+(new Date).getHours()+(new Date).getMinutes()+"-工单统计表.xlsx";i.href=a,i.download=o,i.click(),window.URL.revokeObjectURL(a),e.close(),t.$message.success("导出成功！")})}else t.$message.warning(n.message)})}else this.$message.warning("必选条件必须全选");else this.$message.warning("必选条件必须全选")},projectYearChange:function(t){t?this.$set(this.selectConditionsList,"applyYear","项目年份 - "+t):this.$delete(this.selectConditionsList,"applyYear"),this.singnForm.page=0},signCompanyChange:function(t){t?(this.$set(this.selectConditionsList,"signCompanyId","签约公司 - "+this.companyList.find(function(e){return e.companyId===t}).companyName),this.getPersonList("项目主管,项目员,专利主管,专利员,审计员")):this.$delete(this.selectConditionsList,"signCompanyId"),this.singnForm.page=0},deptmentChange:function(t){var e=this;this.deptmentList.forEach(function(n){n.deptId==t&&(e.$set(e.selectConditionsList,"deptIds","部门 - "+n.deptName),console.log(e.selectConditionsList))}),this.getPersonList("项目主管,项目员,专利主管,专利员,审计员",t),this.singnForm.page=0},userChange:function(t){var e=this;0!=t.length?this.userList.forEach(function(n){n.userId==t&&e.$set(e.selectConditionsList,"signUserId","工程师 - "+n.userName)}):this.$delete(this.selectConditionsList,"signUserId"),this.singnForm.page=0},signDateChange:function(t){t?(this.$set(this.selectConditionsList,"signDate","签单时间 - "+t[0]+"-"+t[1]),this.singnForm.signDateStart=t[0],this.singnForm.signDateEnd=t[1]):(this.$delete(this.selectConditionsList,"signDate"),this.singnForm.signDateStart="",this.singnForm.signDateEnd=""),this.singnForm.page=0},entryDateChange:function(t){t?(console.log(t),this.$set(this.selectConditionsList,"entryDate","录入时间 - "+t[0]+"-"+t[1]),this.singnForm.entryDateStart=t[0],this.singnForm.entryDateEnd=t[1]):(this.$delete(this.selectConditionsList,"entryDate"),this.singnForm.entryDateStart="",this.singnForm.entryDateEnd=""),this.singnForm.page=0},deleteOneClick:function(t){this.$delete(this.selectConditionsList,t),this.$delete(this.singnForm,t),"signDate"==t&&(this.signDate=[],this.singnForm.signDateStart="",this.singnForm.signDateEnd=""),"entryDate"==t&&(this.entryDate=[],this.singnForm.entryDateStart="",this.singnForm.entryDateEnd=""),this.singnForm.page=0,this.singnForm.pageSize=20},deleteAllClick:function(){this.selectConditionsList={},this.singnForm={},this.signDate=[],this.entryDate=[],this.singnForm.signDateStart="",this.singnForm.signDateEnd="",this.singnForm.entryDateStart="",this.singnForm.entryDateEnd="",this.singnForm.page=0,this.singnForm.pageSize=20}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"row-width-auto-margin-0-90"},[a("el-card",{staticClass:"box-card cardCont"},[a("div",{staticClass:"headerTop",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"conditionChoose"},[t._v("已选条件:")]),t._v(" "),a("div",{staticClass:"conditionList"},[t._l(t.selectConditionsList,function(e,i){return a("div",{key:i,staticClass:"conditionBox"},[t._v(" \n              "+t._s(e)),a("img",{staticClass:"hoverCursor",attrs:{src:n("cFCn")},on:{click:function(e){return t.deleteOneClick(i)}}})])}),t._v(" "),Object.keys(t.selectConditionsList).length>1?a("div",{staticClass:"conditionClear",on:{click:t.deleteAllClick}},[t._v("\n              清空所有\n            ")]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"conditionCont"},[a("el-row",[a("el-col",[a("div",{staticClass:"conditionBox"},[a("span",[t._v("必选：")]),t._v(" "),t.allowGetDeptList.twoAllow?a("el-select",{attrs:{size:"small",filterable:"",placeholder:"选择部门",clearable:""},on:{change:t.deptmentChange},model:{value:t.singnForm.deptId,callback:function(e){t.$set(t.singnForm,"deptId",e)},expression:"singnForm.deptId"}},t._l(t.deptmentList,function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})}),1):t._e(),t._v(" "),a("el-date-picker",{staticClass:"date-select",attrs:{type:"daterange",align:"left",size:"small","unlink-panels":"","range-separator":"至","start-placeholder":"分配时间段","end-placeholder":"分配时间段","value-format":"yyyy-MM-dd"},on:{change:t.entryDateChange},model:{value:t.entryDate,callback:function(e){t.entryDate=e},expression:"entryDate"}})],1)])],1),t._v(" "),a("el-row",[a("el-col",[a("div",{staticClass:"conditionBox"},[a("span",[t._v("可选项目：")]),t._v(" "),a("el-select",{attrs:{filterable:"",size:"small",placeholder:"工程师",clearable:""},on:{change:t.userChange},model:{value:t.singnForm.signUserId,callback:function(e){t.$set(t.singnForm,"signUserId",e)},expression:"singnForm.signUserId"}},t._l(t.userList,function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})}),1)],1)])],1)],1)]),t._v(" "),a("el-card",{staticClass:"box-card cardCont"},[a("div",{staticClass:"headerTop",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"headerLeft"},[a("span",{staticClass:"conditionChoose orginLeft"},[t._v("搜索到 "+t._s(t.total)+" 条记录")]),t._v(" "),a("div",{staticClass:"headBtn"},[a("el-button",{staticClass:"btn export",attrs:{type:"primary",size:"small"},on:{click:t.showSignOrder}},[t._v("统计")]),t._v(" "),a("el-button",{staticClass:"btn export",attrs:{type:"primary",size:"small"},on:{click:t.handleExport}},[t._v("导出")])],1)])]),t._v(" "),a("div",{staticClass:"projectTable"},[a("el-table",{ref:"signReport",attrs:{data:t.signReport,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"用户名称",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.userName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"部门名称",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.deptName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"立项数量",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.approvalCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"高企认定复审数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.companyAffirmCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"完成提交数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.endProcessCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"财务审计数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.financeCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"进度在第一环节数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.firstProcessCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"知识产权数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.intellectualCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"其他重点项目数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.otherProjectCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"立项数",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.projectApprovalCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.projectName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.signCount))])]}}])})],1)],1)])],1),t._v(" "),a("div",{staticStyle:{height:"60px",position:"fixed",bottom:"20px",right:"0",width:"80px"}},[t.btnFlag?a("a",{attrs:{href:"javascript:",target:"_self"},on:{click:t.backTop}},[a("img",{attrs:{src:n("1XGe"),alt:""}})]):t._e()])])},staticRenderFns:[]};var p=n("VU/8")(l,c,!1,function(t){n("4y0q")},"data-v-5d43061e",null);e.default=p.exports},uB1z:function(t,e,n){"use strict";e.a=function(t){return Object(a.a)({url:o+"/api/crm/orderstatistics/querySignOrderStatistical",method:"post",data:t})},e.b=function(t){return Object(i.a)({url:o+"/api/crm/orderstatistics/querySignOrderStatisticalExportForExcel",method:"post",data:t})},e.c=function(t){return Object(a.a)({url:o+"/api/crm/orderstatistics/queryWorkOrderStatistical",method:"post",data:t})},e.d=function(t){return Object(i.a)({url:o+"/api/crm/orderstatistics/queryWorkOrderStatisticalExportForExcel",method:"post",data:t})};var a=n("vLgD"),i=n("s01O"),o="/crm"}});