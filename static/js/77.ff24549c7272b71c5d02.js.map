{"version":3,"sources":["webpack:///./src/views/policy/projectManage/collect.vue?e351","webpack:///src/views/policy/projectManage/collect.vue","webpack:///./src/views/policy/projectManage/collect.vue?ec3e","webpack:///./src/views/policy/projectManage/collect.vue","webpack:///./src/views/policy/projectManage/collect.vue?c8a7"],"names":["content","__webpack_require__","module","i","locals","exports","collect","waves","id","getList","material_file_name","params","data","url","filename","link","click","original","val","obj","CollectList","num","p_item","item","projectManage_collect","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","placeholder","readonly","model","value","callback","$$v","project_name","expression","_v","directives","name","rawName","staticStyle","margin-left","type","icon","on","AddMainItem","key","tableKey","ref","width","border","fit","row-key","tree-props","children","default-expand-all","align","label","scopedSlots","_u","fn","scope","row","edit","_e","_s","idx","undefined","min-width","header-align","is_main","clearable","$set","_l","dict_value","material_type","size","$event","ParentAddItem","material_name","material_need","material_url","action","host","upload_url","on-preview","handlePreview","on-remove","handleRemove","file-list","fileList","on-change","file","onUploadChange","show-file-list","uploadData","limit","margin","color","cursor","display","removeFile","placement","trigger","slot","preview_one","remarks","class-name","goSure","goEdit","goDel","text-align","margin-top","submitForm","goback","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","push","version","sources","names","mappings","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/77.ff24549c7272b71c5d02.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-830252ca\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./collect.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7c2511c8\", content, true);\n\n\n// WEBPACK FOOTER //\n// \"}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-830252ca\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/policy/projectManage/collect.vue","<!-- 文件资料增删改查页面 -->\r\n<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"10\">\r\n          <el-input class=\"filter-item\" placeholder=\"项目名称\" v-model=\"project_name\" readonly>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"3\">\r\n          <el-button class=\"filter-item\" type=\"success\"  style=\"margin-left: 100px;\" v-waves icon=\"el-icon-edit\" @click=\"AddMainItem\">创建</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n\r\n    <el-table :key='tableKey' :data=\"CollectList\" ref=\"collect_table\" v-loading=\"listLoading\" border fit\r\n              style=\"width: 100%;\" row-key=\"num\" :tree-props=\"{children: 'children'}\"  :default-expand-all=\"true\" >\r\n      <el-table-column align=\"center\" width=\"65\" label=\"次序\" type=\"selection\">\r\n        <template slot-scope=\"scope\" v-if=\"scope.row.is_parent\">\r\n          <span v-if=\"!scope.row.edit\">{{scope.row.idx}}</span>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column min-width=\"120px\" header-align=\"center\"  label=\"材料类型\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.edit\">\r\n            <el-select width=\"80%\" v-if=\"scope.row.edit && scope.row.is_main\" clearable  class=\"filter-item\"\r\n                       v-model=\"scope.row.material_type\" placeholder=\"事件类型\" >\r\n              <el-option v-for=\"item in material_type_list\" :value=\"item.dict_value\" :key=\"item.dict_value\" :label=\"item.dict_value\">\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <span v-else>\r\n            <span >{{ scope.row.material_type }}</span>\r\n            <el-button v-if=\"scope.row.children\" type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" @click=\"ParentAddItem(scope.row)\"></el-button>\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"材料名称\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"!scope.row.is_main\">\r\n            <el-input v-if=\"scope.row.edit\" style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\"\r\n                      v-model=\"scope.row.material_name\"></el-input>\r\n            <span v-else>{{ scope.row.material_name }}</span>\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"资料所需要求\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"!scope.row.is_main\">\r\n            <el-input v-if=\"scope.row.edit\" style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\"\r\n                      v-model=\"scope.row.material_need\"></el-input>\r\n            <span v-else>{{ scope.row.material_need }}</span>\r\n\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"材料模板文件\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"!scope.row.is_main\">\r\n            <div v-if=\"!scope.row.material_url || scope.row.edit \">\r\n              <el-upload\r\n                class=\"upload-box upload-box-width\"\r\n                :action=\"host + upload_url\"\r\n                :on-preview=\"handlePreview\"\r\n                :on-remove=\"handleRemove\"\r\n                :file-list=\"fileList\"\r\n                :on-change=\"(file)=> onUploadChange(file, scope.row)\"\r\n                :show-file-list=\"true\"\r\n                :data=\"uploadData\"\r\n                :limit=\"limit\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <span style=\"margin:10px;color:gray;cursor: default;display: inline-block\">{{scope.row.material_url?'已上传':'未上传'}}\r\n\r\n                </span>\r\n              </el-upload>\r\n              <i v-if=\"scope.row.material_url\" class=\"el-icon-error\" @click=\"removeFile(scope.row)\"></i>\r\n            </div>\r\n            <el-popover  v-else\r\n                         placement=\"top-start\"\r\n                         width=\"200\"\r\n                         trigger=\"hover\"\r\n                         :content=\"scope.row.material_file_name\">\r\n              <el-button slot=\"reference\" class=\"download-btn\" @click=\"preview_one(scope.row)\">{{scope.row.material_url?'下载':'未上传'}}</el-button>\r\n\r\n            </el-popover>\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"备注\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.edit&!scope.row.children \">\r\n            <el-input style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\" v-model=\"scope.row.remarks\"></el-input>\r\n          </template>\r\n          <span v-else>{{ scope.row.remarks }}</span>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <el-table-column align=\"center\" label=\"操作\" width=\"230px\" class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" v-if=\"!scope.row.edit\"   size=\"mini\" @click=\"goEdit(scope.row)\">编辑</el-button>\r\n          <el-button type=\"primary\" v-else=\"\"   size=\"mini\" @click=\"goSure(scope.row)\">确定</el-button>\r\n          <el-button type=\"danger\"   size=\"mini\" @click=\"goDel(scope.row.num)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--<el-divider></el-divider>-->\r\n    <div style=\"text-align: right;margin-top: 50px\">\r\n      <el-button type=\"primary\" @click=\"submitForm()\">保存</el-button>\r\n      <el-button @click=\"goback\">取消</el-button>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import waves from '@/directive/waves' // 水波纹指令\r\n  // import AreaSelect from '@/components/AreaSelect/AreaSelect'\r\n  // import { GetProjectMaterialList, SaveProjectMaterial } from '@/api/grp'\r\n  import axios from 'axios'\r\n\r\n  export default {\r\n    name: 'complexTable',\r\n    directives: {\r\n      waves\r\n    },\r\n    // components: {\r\n    //   AreaSelect\r\n    // },\r\n    data() {\r\n      return {\r\n        count: 1,\r\n        tableKey: 0,\r\n        host: process.env.BASE_API,\r\n        upload_url: '/core/upload-files-api/',\r\n        uploadData: { save_path: 'project_material/' },\r\n        limit: 1,\r\n        fileList: [],\r\n        CollectList: [],\r\n        total: null,\r\n        listLoading: false,\r\n        num: 1,\r\n        project_name: '',\r\n        material_type_list: []\r\n      }\r\n    },\r\n    filters: {\r\n    },\r\n    created() {\r\n    },\r\n    mounted() {\r\n      if (this.$route.query.id) {\r\n        this.id = this.$route.query.id\r\n      }\r\n      this.getList()\r\n    },\r\n    methods: {\r\n      getList() {\r\n        // GetProjectMaterialList({ id: this.id }).then(res => {\r\n        //   if (res.data.code === 1) {\r\n        //     this.CollectList = this.initList(res.data.data)\r\n        //     this.project_name = res.data.project_name\r\n        //     this.material_type_list = res.data.material_type_list\r\n        //     this.CollectList.map(item => {\r\n        //       item.is_main = true\r\n        //     })\r\n        //   }\r\n        // })\r\n      },\r\n\r\n      handlePreview(file) {\r\n      },\r\n      handleRemove(file, fileList) {\r\n        this.ruleForm.official_file = null\r\n      },\r\n      removeFile(data) {\r\n        data.material_file_name = null\r\n        data.material_url = null\r\n      },\r\n      preview_one(file_obj) {\r\n        this.a_downfile(this.host + file_obj.material_url, file_obj.material_file_name)\r\n      },\r\n      a_downfile(path, filename) {\r\n        window.open(path, '_blank')\r\n      },\r\n      mydownfile(path, filename) {\r\n        const downloadFile = (params) => {\r\n          return axios({\r\n            url: params,\r\n            method: 'get',\r\n            responseType: 'blob'\r\n          })\r\n        }\r\n        downloadFile(path).then(data => {\r\n          if (!data) {\r\n            return false\r\n          }\r\n          const url = window.URL.createObjectURL(data.data)\r\n          const link = document.createElement('a')\r\n          link.style.display = 'none'\r\n          link.href = url\r\n          link.setAttribute('download', filename)\r\n          document.body.appendChild(link)\r\n          link.click()\r\n          // 销毁添加的a标签\r\n          setTimeout(() => {\r\n            link.parentNode.removeChild(link)\r\n          }, 200)\r\n        })\r\n      },\r\n      onUploadChange(file, data) {\r\n        var form = data\r\n        if (file.response) {\r\n          form.material_url = file.response.url\r\n          form.material_file_name = file.response.original\r\n        }\r\n      },\r\n\r\n      handleFilter() {\r\n        this.listQuery.page = 1\r\n        this.getList()\r\n      },\r\n      handleSizeChange(val) {\r\n        this.listQuery.limit = val\r\n        this.getList()\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.listQuery.page = val\r\n        this.getList()\r\n      },\r\n      AddMainItem() {\r\n        // 添加主项\r\n        var idx = this.CollectList.length + 1\r\n        var obj = { material_name: '', edit: true, children: [], is_parent: true, is_main: true, idx: idx }\r\n        this.setNum(obj)\r\n        this.CollectList.push(obj)\r\n      },\r\n      ParentAddItem(data) {\r\n        // 主项下添加子项\r\n        var obj = { material_name: '', edit: true, is_main: false, material_need: '', remarks: '',\r\n          file_mould: null }\r\n        this.setNum(obj)\r\n        data.children.push(obj)\r\n      },\r\n      goDel(num) {\r\n        var data = this.CollectList\r\n        for (var p_item in data) {\r\n          if (data[p_item].num === num) {\r\n            data.splice(p_item, 1)\r\n            break\r\n          }\r\n          if (data[p_item].children) {\r\n            for (var item in data[p_item].children) {\r\n              if (data[p_item].children[item].num === num) {\r\n                data[p_item].children.splice(item, 1)\r\n                return\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      submitForm() {\r\n        if (!this.checkList()) {\r\n          this.$message.error('主项必须添加子项')\r\n          return\r\n        }\r\n        var form = this.CollectList\r\n        // SaveProjectMaterial({ id: this.id, data: form }).then(response => {\r\n        //   if (response.data.code === 1) {\r\n        //     this.$message({\r\n        //       message: '操作成功',\r\n        //       type: 'success'\r\n        //     })\r\n        //     this.$router.go(-1)\r\n        //   }\r\n        // })\r\n      },\r\n      checkList() {\r\n        for (var item in this.CollectList) {\r\n          if (this.CollectList[item].is_main) {\r\n            if (this.CollectList[item].children.length === 0) {\r\n              return false\r\n            }\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      setNum(data) {\r\n        data.num = this.num\r\n        this.num += 1\r\n      },\r\n      initList(data) {\r\n        for (var p_item in data) {\r\n          data[p_item].edit = false\r\n          this.setNum(data[p_item])\r\n          if (data[p_item].children) {\r\n            for (var item in data[p_item].children) {\r\n              data[p_item].children[item].edit = false\r\n              this.setNum(data[p_item].children[item])\r\n            }\r\n          }\r\n        }\r\n        return data\r\n      },\r\n      goback() {\r\n        this.$router.go(-1)\r\n      },\r\n      getArea(val) {\r\n        this.listQuery.areaId = val\r\n      },\r\n      goEdit(data) {\r\n        data.edit = true\r\n      },\r\n      goSure(data) {\r\n        data.edit = false\r\n      },\r\n      changeType() {\r\n        var lists = this.CollectList\r\n        for (var item in lists) {\r\n          if (!lists[item].is_main) {\r\n            lists[item].material_type = ''\r\n          } else {\r\n            for (var c_item in lists[item].children) {\r\n              lists[item].children[c_item].material_type = ''\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .download-btn {\r\n    border: none;\r\n    background: none;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/policy/projectManage/collect.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-input',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"项目名称\",\"readonly\":\"\"},model:{value:(_vm.project_name),callback:function ($$v) {_vm.project_name=$$v},expression:\"project_name\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"100px\"},attrs:{\"type\":\"success\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.AddMainItem}},[_vm._v(\"创建\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],key:_vm.tableKey,ref:\"collect_table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.CollectList,\"border\":\"\",\"fit\":\"\",\"row-key\":\"num\",\"tree-props\":{children: 'children'},\"default-expand-all\":true}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"65\",\"label\":\"次序\",\"type\":\"selection\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (scope.row.is_parent)?[(!scope.row.edit)?_c('span',[_vm._v(_vm._s(scope.row.idx))]):_vm._e()]:undefined}}],null,true)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"120px\",\"header-align\":\"center\",\"label\":\"材料类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.edit)?[(scope.row.edit && scope.row.is_main)?_c('el-select',{staticClass:\"filter-item\",attrs:{\"width\":\"80%\",\"clearable\":\"\",\"placeholder\":\"事件类型\"},model:{value:(scope.row.material_type),callback:function ($$v) {_vm.$set(scope.row, \"material_type\", $$v)},expression:\"scope.row.material_type\"}},_vm._l((_vm.material_type_list),function(item){return _c('el-option',{key:item.dict_value,attrs:{\"value\":item.dict_value,\"label\":item.dict_value}})}),1):_vm._e()]:_c('span',[_c('span',[_vm._v(_vm._s(scope.row.material_type))]),_vm._v(\" \"),(scope.row.children)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.ParentAddItem(scope.row)}}}):_vm._e()],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"材料名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(scope.row.edit)?_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.material_name),callback:function ($$v) {_vm.$set(scope.row, \"material_name\", $$v)},expression:\"scope.row.material_name\"}}):_c('span',[_vm._v(_vm._s(scope.row.material_name))])]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"资料所需要求\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(scope.row.edit)?_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.material_need),callback:function ($$v) {_vm.$set(scope.row, \"material_need\", $$v)},expression:\"scope.row.material_need\"}}):_c('span',[_vm._v(_vm._s(scope.row.material_need))])]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"材料模板文件\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(!scope.row.material_url || scope.row.edit )?_c('div',[_c('el-upload',{staticClass:\"upload-box upload-box-width\",attrs:{\"action\":_vm.host + _vm.upload_url,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"file-list\":_vm.fileList,\"on-change\":function (file){ return _vm.onUploadChange(file, scope.row); },\"show-file-list\":true,\"data\":_vm.uploadData,\"limit\":_vm.limit}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin\":\"10px\",\"color\":\"gray\",\"cursor\":\"default\",\"display\":\"inline-block\"}},[_vm._v(_vm._s(scope.row.material_url?'已上传':'未上传')+\"\\n\\n              \")])]),_vm._v(\" \"),(scope.row.material_url)?_c('i',{staticClass:\"el-icon-error\",on:{\"click\":function($event){return _vm.removeFile(scope.row)}}}):_vm._e()],1):_c('el-popover',{attrs:{\"placement\":\"top-start\",\"width\":\"200\",\"trigger\":\"hover\",\"content\":scope.row.material_file_name}},[_c('el-button',{staticClass:\"download-btn\",attrs:{\"slot\":\"reference\"},on:{\"click\":function($event){return _vm.preview_one(scope.row)}},slot:\"reference\"},[_vm._v(_vm._s(scope.row.material_url?'下载':'未上传'))])],1)]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"备注\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.edit&!scope.row.children )?[_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.remarks),callback:function ($$v) {_vm.$set(scope.row, \"remarks\", $$v)},expression:\"scope.row.remarks\"}})]:_c('span',[_vm._v(_vm._s(scope.row.remarks))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"230px\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.edit)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goEdit(scope.row)}}},[_vm._v(\"编辑\")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goSure(scope.row)}}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goDel(scope.row.num)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"50px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.goback}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-830252ca\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/policy/projectManage/collect.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-830252ca\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./collect.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./collect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./collect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-830252ca\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./collect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-830252ca\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/policy/projectManage/collect.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.download-btn[data-v-830252ca] {\\n  border: none;\\n  background: none;\\n}\\n\\n\", \"\", {\"version\":3,\"sources\":[\"H:/java/chengguoyun-web/src/views/policy/projectManage/collect.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,aAAa;EACb,iBAAiB;CAClB\",\"file\":\"collect.vue\",\"sourcesContent\":[\"\\n.download-btn[data-v-830252ca] {\\n  border: none;\\n  background: none;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-830252ca\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/policy/projectManage/collect.vue\n// module id = tv0T\n// module chunks = 77"],"sourceRoot":""}