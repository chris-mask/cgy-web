webpackJsonp([72],{"4Edj":function(e,t,n){"use strict";t.c=function(e){return Object(a.a)({url:"/crm/api/crm/crmFaq/saveCrmFaq",method:"POST",data:e})},t.a=function(e){return Object(a.a)({url:"/crm/api/crm/crmFaq/delCrmFaqByIds",method:"POST",data:e})},t.d=function(e){return Object(a.a)({url:"/crm/api/crm/crmFaq/updateCrmFaqByIds",method:"POST",data:e})},t.b=function(e){return Object(a.a)({url:"/crm/api/crm/crmFaq/queryCrmFaqList",method:"POST",data:e})};var a=n("vLgD")},a2ed:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),r=n.n(a),o=n("fZjL"),i=n.n(o),s=n("Q5rI"),d=n("4Edj"),l={data:function(){return{pageType:"",titleName:"",userNameList:[],userNameTotal:null,userParams:{page:0,pageSize:20},workType:[],form:{questionType:null,questionAnswer:""},rules:{questionType:[{required:!0,message:"请选择问题分类",trigger:"blur"}],questionContent:[{required:!0,message:"请输入问题内容",trigger:"blur"}],questionAnswer:[{required:!0,message:"请输入问题解答",trigger:"blur"}]},loading:!1,allowAdd:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:FAQ:MANAGE","SYSTEM:FAQ:INSERT"),allowUpdate:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:FAQ:MANAGE","SYSTEM:FAQ:UPDATE"),allowDetail:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:FAQ:MANAGE","SYSTEM:FAQ:LIST")}},created:function(){this.pageType=this.$route.query.type},mounted:function(){this.getCommonDict()},activated:function(){var e=this;this.isHeaderName(),this.form={faqId:"",questionType:"",questionContent:"",questionAnswer:""},this.$route.query.faqId&&(this.form.faqId=this.$route.query.faqId),"edit"!==this.pageType&&"read"!==this.pageType||setTimeout(function(){e.getFormDetail()},500)},directives:{},methods:{cananlHandle:function(){this.$router.go(-1),this.form={}},callbackError:function(e){for(var t in e){this.tempArr=e[t];break}this.$message({type:"error",message:this.tempArr[0].message})},getCommonDict:function(){var e=this;Object(s.d)({keyList:"DICT:QUESTION_TYPE",companyId:"697480101377343488"}).then(function(t){200===t.code&&(e.workType=t.data["DICT:QUESTION_TYPE"])})},isHeaderName:function(){"read"===this.pageType?this.titleName="常见问题详情":"add"===this.pageType?this.titleName="新增常见问题":"edit"===this.pageType&&(this.titleName="编辑常见问题")},handSubmit:function(e){var t=this;this.$refs[e].validate(function(e,n){if(!e)return t.callbackError(n),!1;t.form.questionContent.length>100?t.$message.warning("问题内容字符长度不能大于100"):t.form.questionAnswer.length>2e3?t.$message.warning("问题解答字符长度不能大于2000"):(i()(t.form).forEach(function(e){null!==t.form[e]&&void 0!==t.form[e]||(t.form[e]="")}),Object(d.c)(t.form).then(function(e){200===e.code&&(t.$message({type:"success",message:e.message}),t.form={},t.cananlHandle())}))})},getFormDetail:function(){var e=this;this.allowDetail.twoAllow?Object(d.b)({page:0,pageSize:20,faqId:this.$route.query.faqId}).then(function(t){if(200===t.code&&t.data.data.length>0){var n=JSON.parse(r()(t.data.data[0]));i()(e.form).forEach(function(e){n.hasOwnProperty(e)||(n[e]="")}),e.form=n,"read"===e.pageType&&e.workType.forEach(function(n){t.data.questionType===n.dictId&&(e.form.questionTypeName=n.dictName)})}}):this.$message.warning("抱歉，您没有权限获取此详情")},handSubmitEdit:function(e){var t=this;this.$refs[e].validate(function(e,n){if(!e)return t.callbackError(n),!1;t.form.questionContent.length>100?t.$message.warning("问题内容字符长度不能大于100"):t.form.questionAnswer.length>2e3?t.$message.warning("问题解答字符长度不能大于2000"):(i()(t.form).forEach(function(e){null!==t.form[e]&&void 0!==t.form[e]||(t.form[e]="")}),Object(d.d)(t.form).then(function(e){200===e.code&&(t.$message({type:"success",message:e.message}),t.form={},t.cananlHandle())}))})},handleCascaderChange:function(e){e&&e.length>0&&(this.form.questionType=e[e.length-1])}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"patent-form"},[n("el-form",{ref:"ruleForm",staticClass:"form-box",attrs:{rules:e.rules,model:e.form,"label-width":"auto"}},[n("div",{staticClass:"cart-bar"},[n("div",{staticClass:"cart-title"},[n("div",{staticClass:"line"}),e._v(" "),n("div",{staticClass:"title-name"},[e._v("常见问题列表 - "+e._s(e.titleName))])]),e._v(" "),n("div",{staticClass:"cart-body"},[n("el-form-item",{staticClass:"form-input",attrs:{label:"问题分类：",prop:"questionType"}},["read"!==e.pageType?n("el-cascader",{staticClass:"user-name-item",attrs:{placeholder:"请选择问题分类",options:e.workType,props:{checkStrictly:!0,value:"dictId",label:"dictName",children:"child"},clearable:""},on:{change:e.handleCascaderChange},model:{value:e.form.questionType,callback:function(t){e.$set(e.form,"questionType",t)},expression:"form.questionType"}}):n("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.questionTypeName,callback:function(t){e.$set(e.form,"questionTypeName",t)},expression:"form.questionTypeName"}})],1),e._v(" "),n("el-form-item",{staticClass:"form-input",attrs:{label:"问题内容：",prop:"questionContent"}},["read"!==e.pageType?n("el-input",{staticClass:"patent-name-item",attrs:{maxlength:"100",clearable:"",placeholder:"请输入问题内容"},model:{value:e.form.questionContent,callback:function(t){e.$set(e.form,"questionContent","string"==typeof t?t.trim():t)},expression:"form.questionContent"}}):n("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.questionContent,callback:function(t){e.$set(e.form,"questionContent",t)},expression:"form.questionContent"}})],1),e._v(" "),n("el-form-item",{staticClass:"form-input",attrs:{label:"问题解答：",prop:"questionAnswer"}},[n("el-col",{attrs:{span:12}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"字符长度"+e.form.questionAnswer.length,placement:"bottom-end"}},["read"!==e.pageType?n("el-input",{staticClass:"patent-name-item",attrs:{maxlength:"2000",clearable:"",placeholder:"请输入问题解答,不超过2000字符",type:"textarea",rows:12},model:{value:e.form.questionAnswer,callback:function(t){e.$set(e.form,"questionAnswer","string"==typeof t?t.trim():t)},expression:"form.questionAnswer"}}):n("el-input",{staticClass:"patent-name-item",attrs:{disabled:"",type:"textarea",rows:12},model:{value:e.form.questionAnswer,callback:function(t){e.$set(e.form,"questionAnswer",t)},expression:"form.questionAnswer"}})],1)],1)],1)],1)])]),e._v(" "),n("div",{staticClass:"btn-group-handle"},["add"==e.pageType&&e.allowAdd.twoAllow?n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn blue",on:{click:function(t){return e.handSubmit("ruleForm")}}},[e._v("确定")]):e._e(),e._v(" "),"edit"==e.pageType&&e.allowUpdate.twoAllow?n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn blue",on:{click:function(t){return e.handSubmitEdit("ruleForm")}}},[e._v("确定\n    ")]):e._e(),e._v(" "),n("el-button",{staticClass:"btn cananl",on:{click:e.cananlHandle}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var m=n("VU/8")(l,c,!1,function(e){n("hwVp")},"data-v-0d16dee3",null);t.default=m.exports},ew2D:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.patent-form[data-v-0d16dee3] {\n  margin: auto 5%;\n}\n.patent-form .title[data-v-0d16dee3] {\n  margin-top: 20px;\n  padding-left: 20px;\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n}\n.patent-form .form-box .cart-bar[data-v-0d16dee3] {\n  background: #fff;\n  margin-top: 20px;\n  -webkit-box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n  border-radius: 4px;\n}\n.patent-form .form-box .cart-bar .cart-title[data-v-0d16dee3] {\n  padding: 16px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-bottom: 1px solid #dbe9ff;\n}\n.patent-form .form-box .cart-bar .cart-title .line[data-v-0d16dee3] {\n  width: 3px;\n  height: 14px;\n  background: #05aaff;\n  margin-right: 10px;\n}\n.patent-form .form-box .cart-bar .cart-title .title-name[data-v-0d16dee3] {\n  font-size: 16px;\n  font-family: Microsoft YaHei;\n  font-weight: 400;\n  color: #042b40;\n}\n.patent-form .form-box .cart-bar .cart-body[data-v-0d16dee3] {\n  padding: 20px 0 1px 12px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input[data-v-0d16dee3] .el-form-item__label {\n  font-weight: normal;\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n  border-radius: 0;\n  white-space: nowrap;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0d16dee3] {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0d16dee3] .el-input {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0d16dee3] .el-input__inner {\n  width: 300px;\n  background: none;\n  border-radius: 0;\n  border: 0;\n  color: #444444;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .patent-name-item[data-v-0d16dee3] .el-input__inner {\n  width: 300px;\n  background: none;\n  border-radius: 0;\n  border: 0;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0d16dee3] {\n  width: 300px !important;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0d16dee3] .el-input__inner,\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0d16dee3] .el-date-editor.el-input,\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0d16dee3] .el-date-editor.el-input__inner {\n  width: 300px !important;\n  border-radius: 0;\n  border: 0;\n  background: none;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .patent-area[data-v-0d16dee3] .el-textarea__inner {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input[data-v-0d16dee3] .el-input.is-disabled .el-input__inner {\n  color: #444;\n}\n.patent-form .upload-pic[data-v-0d16dee3] .el-upload--picture-card {\n  width: 100px;\n  height: 100px;\n  line-height: 110px;\n}\n.patent-form .upload-pic[data-v-0d16dee3] .el-upload-list--picture-card .el-upload-list__item {\n  width: 100px;\n  height: 100px;\n}\n.patent-form .pic-modal .pic[data-v-0d16dee3] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.patent-form .btn-group-handle[data-v-0d16dee3] {\n  margin-top: 30px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-bottom: 10px;\n}\n.patent-form .btn-group-handle .btn[data-v-0d16dee3] {\n  padding: 0;\n  width: 100px;\n  height: 38px;\n  font-size: 16px;\n}\n.patent-form .btn-group-handle .btn.blue[data-v-0d16dee3] {\n  color: #fff;\n  background: -webkit-gradient(linear, left top, left bottom, from(#9bddff), to(#37bbff));\n  background: linear-gradient(180deg, #9bddff 0%, #37bbff 100%);\n}\n.patent-form .btn-group-handle .btn.cananl[data-v-0d16dee3] {\n  color: #444444;\n  background: #ffffff;\n  -webkit-box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n}\n",""])},hwVp:function(e,t,n){var a=n("ew2D");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("355d91c9",a,!0)}});