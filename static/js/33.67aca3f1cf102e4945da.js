webpackJsonp([33],{"2/1O":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n[data-v-17327b70] .clearfix:after {\n  display: none;\n}\n[data-v-17327b70] .el-input {\n  width: auto;\n}\n.headerTop[data-v-17327b70] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.headerLeft .searchInput[data-v-17327b70] {\n  margin-right: 10px;\n}\n.headerRig .choose[data-v-17327b70] {\n  margin-right: 22px;\n}\n[data-v-17327b70] .el-table {\n  border: #d9f2ff 1px solid !important;\n}\n[data-v-17327b70] .el-table th.gutter {\n  display: table-cell !important;\n}\n[data-v-17327b70] .el-table--border th,[data-v-17327b70] .el-table th {\n  background: #2CB1F5 !important;\n  color: #fff;\n  font-weight: 400;\n  border-right: 1px solid rgba(220, 223, 230, 0.21);\n  padding: 7px 0;\n}\n[data-v-17327b70] .el-table__row:nth-child(even) {\n  background: #ebf8ff !important;\n  border: 1px solid rgba(0, 141, 214, 0.26666667);\n}\n[data-v-17327b70] .el-table--border td {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n[data-v-17327b70] .el-table--border td:first-child {\n  border-right: #d9f2ff 1px solid !important;\n}\n[data-v-17327b70] .el-table--border td:last-child {\n  border-left: #d9f2ff 1px solid !important;\n}\n.spanButton[data-v-17327b70] {\n  color: #05AAFF;\n}\n.shu[data-v-17327b70] {\n  margin: 0 10px;\n  color: #ccc;\n}\n.col_red[data-v-17327b70] {\n  color: #FF6B6B !important;\n}\n.col_red[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n.col_skyblue[data-v-17327b70] {\n  color: #05AAFF !important;\n}\n.col_skyblue[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n.colUpDown[data-v-17327b70] {\n  color: #FD903C !important;\n}\n.colUpDown[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n[data-v-17327b70] .pagination-container {\n  margin-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n[data-v-17327b70] .el-pagination__total {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.totalText[data-v-17327b70] {\n  font-size: 14px;\n  font-family: 'PingFang SC';\n  font-weight: 400;\n  line-height: 20px;\n  color: #444444;\n}\n.totalText span[data-v-17327b70] {\n  margin-right: 20px;\n}\n[data-v-17327b70] .el-pagination.is-background .btn-next,[data-v-17327b70] .el-pagination.is-background .btn-prev,[data-v-17327b70] .el-pagination.is-background .el-pager li {\n  background: none;\n  border: #D5D5D5 1px solid;\n  color: #8B8B8B;\n  font-size: 12px;\n  font-weight: normal;\n}\n[data-v-17327b70] .el-pagination.is-background .el-pager li.active {\n  background: #05AAFF;\n  color: #fff;\n  border: #05AAFF 1px solid;\n}\n[data-v-17327b70] .el-card.is-always-shadow,[data-v-17327b70] .el-card.is-hover-shadow:focus,[data-v-17327b70] .el-card.is-hover-shadow:hover {\n  -webkit-box-shadow: 0px 2px 6px rgba(68, 68, 68, 0.1) !important;\n          box-shadow: 0px 2px 6px rgba(68, 68, 68, 0.1) !important;\n}\n[data-v-17327b70] .el-table .sort-caret.ascending {\n  border-bottom-color: #fff;\n}\n[data-v-17327b70] .el-table .ascending .sort-caret.ascending {\n  border-bottom-color: #409EFF !important;\n}\n[data-v-17327b70] .el-table .descending .sort-caret.descending {\n  border-top-color: #409EFF !important;\n}\n[data-v-17327b70] .el-table .sort-caret.descending {\n  border-top-color: #fff;\n}\n[data-v-17327b70] .el-table .cell {\n  /*text-align: left;*/\n}\n[data-v-17327b70] .el-table .el-table__expand-icon {\n  display: none;\n}\n.projectName[data-v-17327b70] {\n  cursor: pointer;\n}\n.projectName .showOrHiden[data-v-17327b70] {\n  display: inline-block;\n  color: #333;\n  margin-right: 10px;\n}\n.productName[data-v-17327b70] {\n  padding-left: 24px;\n  color: #333;\n}\n.productName[data-v-17327b70]:hover {\n  opacity: 0.5;\n  cursor: pointer;\n  /*text-decoration: underline;*/\n}\n","",{version:3,sources:["H:/java/chengguoyun-web/src/views/backend/rolesManage/index.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,YAAY;CACb;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,0BAA0B;MACtB,uBAAuB;UACnB,+BAA+B;CACxC;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,qCAAqC;CACtC;AACD;EACE,+BAA+B;CAChC;AACD;EACE,+BAA+B;EAC/B,YAAY;EACZ,iBAAiB;EACjB,kDAAkD;EAClD,eAAe;CAChB;AACD;EACE,+BAA+B;EAC/B,gDAAgD;CACjD;AACD;EACE,aAAa;EACb,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,2CAA2C;CAC5C;AACD;EACE,0CAA0C;CAC3C;AACD;EACE,eAAe;CAChB;AACD;EACE,eAAe;EACf,YAAY;CACb;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,aAAa;CACd;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,aAAa;CACd;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,aAAa;CACd;AACD;EACE,iBAAiB;EACjB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,0BAA0B;MACtB,uBAAuB;UACnB,+BAA+B;CACxC;AACD;EACE,oBAAoB;MAChB,YAAY;UACR,QAAQ;CACjB;AACD;EACE,gBAAgB;EAChB,2BAA2B;EAC3B,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;CAChB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,iBAAiB;EACjB,0BAA0B;EAC1B,eAAe;EACf,gBAAgB;EAChB,oBAAoB;CACrB;AACD;EACE,oBAAoB;EACpB,YAAY;EACZ,0BAA0B;CAC3B;AACD;EACE,iEAAiE;UACzD,yDAAyD;CAClE;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,wCAAwC;CACzC;AACD;EACE,qCAAqC;CACtC;AACD;EACE,uBAAuB;CACxB;AACD;EACE,qBAAqB;CACtB;AACD;EACE,cAAc;CACf;AACD;EACE,gBAAgB;CACjB;AACD;EACE,sBAAsB;EACtB,YAAY;EACZ,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,aAAa;EACb,gBAAgB;EAChB,+BAA+B;CAChC",file:"index.vue",sourcesContent:["\n[data-v-17327b70] .clearfix:after {\n  display: none;\n}\n[data-v-17327b70] .el-input {\n  width: auto;\n}\n.headerTop[data-v-17327b70] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.headerLeft .searchInput[data-v-17327b70] {\n  margin-right: 10px;\n}\n.headerRig .choose[data-v-17327b70] {\n  margin-right: 22px;\n}\n[data-v-17327b70] .el-table {\n  border: #d9f2ff 1px solid !important;\n}\n[data-v-17327b70] .el-table th.gutter {\n  display: table-cell !important;\n}\n[data-v-17327b70] .el-table--border th,[data-v-17327b70] .el-table th {\n  background: #2CB1F5 !important;\n  color: #fff;\n  font-weight: 400;\n  border-right: 1px solid rgba(220, 223, 230, 0.21);\n  padding: 7px 0;\n}\n[data-v-17327b70] .el-table__row:nth-child(even) {\n  background: #ebf8ff !important;\n  border: 1px solid rgba(0, 141, 214, 0.26666667);\n}\n[data-v-17327b70] .el-table--border td {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n[data-v-17327b70] .el-table--border td:first-child {\n  border-right: #d9f2ff 1px solid !important;\n}\n[data-v-17327b70] .el-table--border td:last-child {\n  border-left: #d9f2ff 1px solid !important;\n}\n.spanButton[data-v-17327b70] {\n  color: #05AAFF;\n}\n.shu[data-v-17327b70] {\n  margin: 0 10px;\n  color: #ccc;\n}\n.col_red[data-v-17327b70] {\n  color: #FF6B6B !important;\n}\n.col_red[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n.col_skyblue[data-v-17327b70] {\n  color: #05AAFF !important;\n}\n.col_skyblue[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n.colUpDown[data-v-17327b70] {\n  color: #FD903C !important;\n}\n.colUpDown[data-v-17327b70]:hover {\n  opacity: 0.5;\n}\n[data-v-17327b70] .pagination-container {\n  margin-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n[data-v-17327b70] .el-pagination__total {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.totalText[data-v-17327b70] {\n  font-size: 14px;\n  font-family: 'PingFang SC';\n  font-weight: 400;\n  line-height: 20px;\n  color: #444444;\n}\n.totalText span[data-v-17327b70] {\n  margin-right: 20px;\n}\n[data-v-17327b70] .el-pagination.is-background .btn-next,[data-v-17327b70] .el-pagination.is-background .btn-prev,[data-v-17327b70] .el-pagination.is-background .el-pager li {\n  background: none;\n  border: #D5D5D5 1px solid;\n  color: #8B8B8B;\n  font-size: 12px;\n  font-weight: normal;\n}\n[data-v-17327b70] .el-pagination.is-background .el-pager li.active {\n  background: #05AAFF;\n  color: #fff;\n  border: #05AAFF 1px solid;\n}\n[data-v-17327b70] .el-card.is-always-shadow,[data-v-17327b70] .el-card.is-hover-shadow:focus,[data-v-17327b70] .el-card.is-hover-shadow:hover {\n  -webkit-box-shadow: 0px 2px 6px rgba(68, 68, 68, 0.1) !important;\n          box-shadow: 0px 2px 6px rgba(68, 68, 68, 0.1) !important;\n}\n[data-v-17327b70] .el-table .sort-caret.ascending {\n  border-bottom-color: #fff;\n}\n[data-v-17327b70] .el-table .ascending .sort-caret.ascending {\n  border-bottom-color: #409EFF !important;\n}\n[data-v-17327b70] .el-table .descending .sort-caret.descending {\n  border-top-color: #409EFF !important;\n}\n[data-v-17327b70] .el-table .sort-caret.descending {\n  border-top-color: #fff;\n}\n[data-v-17327b70] .el-table .cell {\n  /*text-align: left;*/\n}\n[data-v-17327b70] .el-table .el-table__expand-icon {\n  display: none;\n}\n.projectName[data-v-17327b70] {\n  cursor: pointer;\n}\n.projectName .showOrHiden[data-v-17327b70] {\n  display: inline-block;\n  color: #333;\n  margin-right: 10px;\n}\n.productName[data-v-17327b70] {\n  padding-left: 24px;\n  color: #333;\n}\n.productName[data-v-17327b70]:hover {\n  opacity: 0.5;\n  cursor: pointer;\n  /*text-decoration: underline;*/\n}\n"],sourceRoot:""}])},DfpI:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("mvHQ"),o=t.n(a),r=t("i3ot"),l={name:"index",data:function(){return{page:1,pageSize:10,parentId:0,roleName:"",total:0,rolesList:[],listLoading:!1,sortType:"",sortFieldName:"",allowGetList:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:LIST"),allowAdd:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:INSTER"),allowAddSon:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:INSTER","SYSTEM:ROLE:INSERTSON"),allowUpdate:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:EDIT"),allowDelete:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:DELETE"),allowUpDown:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:UPORDOWN"),allowDetail:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:ROLE:MANAGE","SYSTEM:ROLE:DETAILS")}},activated:function(){this.getRoles()},methods:{getRoles:function(){var e=this,n={page:this.page,pageSize:this.pageSize,parentId:this.parentId,roleName:this.roleName,companyId:this.$store.getters.companyId};Object(r.e)(n).then(function(n){200==n.code?(e.rolesList=n.data.data,e.rolesList.forEach(function(e){e.fatherId=e.parentId}),e.total=Number(n.data.total)):e.$message({type:"error",message:n.message})})},goSearch:function(){this.page=1,this.pageSize=10,this.getRoles()},addChildren:function(e){var n=this;this.parentId=e.roleId;var t={page:this.page,pageSize:this.pageSize,parentId:this.parentId,roleName:this.roleName};Object(r.e)(t).then(function(t){200==t.code?(0===t.data.data.length?n.$message.warning("当前角色没有子角色，请先进行添加"):(e.children=t.data.data,e.children.forEach(function(e){e.fatherId=e.parentId})),n.rolesList=JSON.parse(o()(n.rolesList)),n.parentId=0):n.$message({type:"error",message:t.message})})},deleteChildren:function(e){delete e.children,this.rolesList=JSON.parse(o()(this.rolesList))},goAddRoles:function(){this.$router.push({path:"/backend/addRole"})},goAddSonRoles:function(e,n){this.$router.push({path:"/backend/addSonRole",query:{parentId:e,parentIds:n}})},goEditRole:function(e){this.$router.push({path:"/backend/editRole",query:{roleId:e.roleId,parentId:e.fatherId,parentIds:e.parentIds}})},deleteRoleBox:function(e){var n=this,t={roleId:e,companyId:this.$store.getters.companyId};Object(r.b)(t).then(function(e){200==e.code?(n.$message({type:"success",message:"删除成功"}),n.parentId=0,n.getRoles()):n.$message({type:"error",message:e.message})})},dataUpDown:function(e,n){var t=this,a={operationType:n,parentId:e.fatherId,roleId:e.roleId};Object(r.f)(a).then(function(e){200==e.code?(t.$message({type:"success",message:e.message}),t.getRoles()):t.$message({type:"error",message:e.message})})},handleSortChange:function(e){this.sortFieldName=e.prop,"ascending"===e.order?this.sortType="ASC":"descending"===e.order?this.sortType="DESC":(this.sortType="",this.sortFieldName=""),this.getRoles()},handleSizeChange:function(e){this.pageSize=e,this.getRoles()},handleCurrentChange:function(e){this.page=e,this.getRoles()}}},i={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card box-margin"},[t("div",{staticClass:"clearfix headerTop",attrs:{slot:"header"},slot:"header"},[t("div",{staticClass:"headerLeft"},[t("el-input",{staticClass:"searchInput",attrs:{size:"small",placeholder:"角色名称",clearable:""},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.goSearch(n)}},model:{value:e.roleName,callback:function(n){e.roleName=n},expression:"roleName"}}),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.goSearch}},[e._v("搜索")])],1),e._v(" "),t("div",{staticClass:"headerRig"},[e.allowAdd.twoAllow?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goAddRoles}},[e._v("新建角色")]):e._e()],1)]),e._v(" "),t("div",{staticClass:"materielTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.rolesList,border:"",fit:"","highlight-current-row":"","row-key":"roleId","default-expand-all":"","tree-props":{children:"children"}},on:{"sort-change":e.handleSortChange}},[t("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","min-width":"100px",label:"角色名称",sortable:"custom",prop:"roleName"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.permission?t("span",[e._v(e._s(n.row.roleName))]):t("span",{staticClass:"projectName"},[n.row.children?t("span",{staticClass:"showOrHiden",on:{click:function(t){return e.deleteChildren(n.row)}}},[e._v("-")]):t("span",{staticClass:"showOrHiden",on:{click:function(t){return e.addChildren(n.row)}}},[e._v("+")]),e._v(" "),t("span",[e._v(e._s(n.row.roleName))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center","min-width":"100px",label:"数据权限",sortable:"custom",prop:"dataPermissions"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v("\n              "+e._s(0==n.row.dataPermissions?"全部数据权限":-1==n.row.dataPermissions?"本部门及所有子部门数据权限":-2==n.row.dataPermissions?"本部门数据权限":-3==n.row.dataPermissions?"表示自己的数据权限":-4==n.row.dataPermissions?"自定义":-5==n.row.dataPermissions?"未知":"无")+"\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center","min-width":"100px",label:"备注",sortable:"custom",prop:"roleDesc"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{domProps:{innerHTML:e._s(n.row.roleDesc)}},[e._v(e._s(n.row.roleDesc))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"350px","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(n){return[(n.row.parentId=e.allowAddSon.threeAllow)?t("span",{staticClass:"spanButton col_skyblue",on:{click:function(t){return e.goAddSonRoles(n.row.roleId,n.row.parentIds)}}},[e._v("添加子角色")]):e._e(),e._v(" "),(n.row.parentId=e.allowAddSon.threeAllow)?t("span",{staticClass:"shu"},[e._v("|")]):e._e(),e._v(" "),e.allowUpdate.twoAllow?t("span",{staticClass:"spanButton col_skyblue",on:{click:function(t){return e.goEditRole(n.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.allowUpdate.twoAllow?t("span",{staticClass:"shu"},[e._v("|")]):e._e(),e._v(" "),e.allowDelete.twoAllow?t("el-popconfirm",{attrs:{confirmButtonText:"好的",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"是否确定删除？"},on:{onConfirm:function(t){return e.deleteRoleBox(n.row.roleId)}}},[t("span",{staticClass:"spanButton col_red",attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])]):e._e(),e._v(" "),e.allowDelete.twoAllow?t("span",{staticClass:"shu"},[e._v("|")]):e._e(),e._v(" "),e.allowUpDown.twoAllow?t("span",{staticClass:"spanButton colUpDown",on:{click:function(t){return e.dataUpDown(n.row,1)}}},[e._v("上升")]):e._e(),e._v(" "),t("span",{staticClass:"shu"},[e._v("|")]),e._v(" "),e.allowUpDown.twoAllow?t("span",{staticClass:"spanButton colUpDown",on:{click:function(t){return e.dataUpDown(n.row,2)}}},[e._v("下降")]):e._e()]}}])})],1),e._v(" "),t("div",{staticClass:"pagination-container"},[t("div",{staticClass:"totalText"},[t("span",[e._v("总数："+e._s(e.total))]),e._v(" "),t("span",[e._v("总页数:"+e._s(Math.ceil(e.total/e.pageSize)||Math.ceil(e.total/10)))]),e._v(" "),t("span",[e._v("当前页："+e._s(e.page||1))])]),e._v(" "),t("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var s=t("VU/8")(l,i,!1,function(e){t("Enkg")},"data-v-17327b70",null);n.default=s.exports},Enkg:function(e,n,t){var a=t("2/1O");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("7b150342",a,!0)}});
//# sourceMappingURL=33.67aca3f1cf102e4945da.js.map