webpackJsonp([93],{R6Vw:function(e,t,a){var r=a("SrTH");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("80698bde",r,!0)},SrTH:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.patent-form[data-v-0dafe23e] {\n  margin: auto 5%;\n}\n.patent-form .title[data-v-0dafe23e] {\n  margin-top: 20px;\n  padding-left: 20px;\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n}\n.patent-form .form-box .cart-bar[data-v-0dafe23e] {\n  background: #fff;\n  margin-top: 20px;\n  -webkit-box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n  border-radius: 4px;\n}\n.patent-form .form-box .cart-bar .cart-title[data-v-0dafe23e] {\n  padding: 16px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-bottom: 1px solid #dbe9ff;\n}\n.patent-form .form-box .cart-bar .cart-title .line[data-v-0dafe23e] {\n  width: 3px;\n  height: 14px;\n  background: #05aaff;\n  margin-right: 10px;\n}\n.patent-form .form-box .cart-bar .cart-title .title-name[data-v-0dafe23e] {\n  font-size: 16px;\n  font-family: Microsoft YaHei;\n  font-weight: 400;\n  color: #042b40;\n}\n.patent-form .form-box .cart-bar .cart-body[data-v-0dafe23e] {\n  padding: 20px 0 1px 12px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input[data-v-0dafe23e] .el-form-item__label {\n  font-weight: normal;\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n  border-radius: 0;\n  white-space: nowrap;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0dafe23e] {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0dafe23e] .el-input {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .user-name-item[data-v-0dafe23e] .el-input__inner {\n  width: 300px;\n  background: none;\n  border-radius: 0;\n  border: 0;\n  color: #444444;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .patent-name-item[data-v-0dafe23e] .el-input__inner {\n  width: 300px;\n  background: none;\n  border-radius: 0;\n  border: 0;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0dafe23e] {\n  width: 300px !important;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0dafe23e] .el-input__inner,\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0dafe23e] .el-date-editor.el-input,\n.patent-form .form-box .cart-bar .cart-body .form-input .select-date[data-v-0dafe23e] .el-date-editor.el-input__inner {\n  width: 300px !important;\n  border-radius: 0;\n  border: 0;\n  background: none;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.patent-form .form-box .cart-bar .cart-body .form-input .patent-area[data-v-0dafe23e] .el-textarea__inner {\n  width: 300px;\n}\n.patent-form .form-box .cart-bar .cart-body .form-input[data-v-0dafe23e] .el-input.is-disabled .el-input__inner {\n  color: #444;\n}\n.patent-form .upload-pic[data-v-0dafe23e] .el-upload--picture-card {\n  width: 100px;\n  height: 100px;\n  line-height: 110px;\n}\n.patent-form .upload-pic[data-v-0dafe23e] .el-upload-list--picture-card .el-upload-list__item {\n  width: 100px;\n  height: 100px;\n}\n.patent-form .pic-modal .pic[data-v-0dafe23e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.patent-form .btn-group-handle[data-v-0dafe23e] {\n  margin-top: 30px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-bottom: 10px;\n}\n.patent-form .btn-group-handle .btn[data-v-0dafe23e] {\n  padding: 0;\n  width: 100px;\n  height: 38px;\n  font-size: 16px;\n}\n.patent-form .btn-group-handle .btn.blue[data-v-0dafe23e] {\n  color: #fff;\n  background: -webkit-gradient(linear, left top, left bottom, from(#9bddff), to(#37bbff));\n  background: linear-gradient(180deg, #9bddff 0%, #37bbff 100%);\n}\n.patent-form .btn-group-handle .btn.cananl[data-v-0dafe23e] {\n  color: #444444;\n  background: #ffffff;\n  -webkit-box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: 0 2px 12px rgba(5, 170, 255, 0.08);\n}\n",""])},fAxJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),n=a("fZjL"),i=a.n(n),s=a("Q5rI"),l=a("AvzY"),m=a("ZWSL"),p={data:function(){return{pageType:"",titleName:"",userNameList:[],userNameTotal:null,userParams:{page:0,pageSize:20},workType:[],form:{},rules:{crmCompanyId:[{required:!0,message:"请选择客户",trigger:"blur"}],copyrightName:[{required:!0,message:"请输入著作权名称",trigger:"blur"}],copyrightType:[{required:!0,message:"请选择类别",trigger:"blur"}],registerNo:[{required:!0,message:"请输入登记号",trigger:"blur"}]},loading:!1,allowAdd:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CENTER:PROPERTY:Copyright:INSERT"),allowUpdate:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CENTER:PROPERTY:Copyright:UPDATE"),allowDetail:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CENTER:PROPERTY:Copyright:DETAILS")}},created:function(){this.getCopyRightData(),this.pageType=this.$route.query.type},activated:function(){var e=this;this.isHeaderName(),this.getUserNameData(),this.form={crmCompanyId:"",copyrightName:"",copyrightOwner:"",copyrightType:"",registerNo:"",versionNo:"",approvalDate:"",publicDate:""},this.$route.query.companyId&&(this.form.crmCompanyId=this.$route.query.companyId),"edit"!==this.pageType&&"read"!==this.pageType||setTimeout(function(){e.getFormDetail()},150)},directives:{loadMore:{bind:function(e,t){e.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&t.value()})}}},methods:{getUserNameData:function(){var e=this;Object(l.i)(this.userParams).then(function(t){200===t.code&&(e.userNameList=t.data.data,e.userNameTotal=t.data.total)})},loadMore:function(){var e=this;this.userNameList.length>=this.userNameTotal||(this.userParams.page+=20,Object(l.i)(this.userParams).then(function(t){200===t.code&&(e.userNameList=e.userNameList.concat(t.data.data))}))},getCopyRightData:function(){var e=this;Object(s.d)({keyList:"DICT:COPYRIGHT_CATEGORY"}).then(function(t){200===t.code&&(e.workType=t.data["DICT:COPYRIGHT_CATEGORY"])})},setCompanyNameHandle:function(e){var t=this;this.userNameList.forEach(function(a){a.crmCompanyId===e&&(t.form.crmCompanyName=a.companyName)})},isHeaderName:function(){"read"===this.pageType?this.titleName="著作权详情":"add"===this.pageType?this.titleName="新增著作权":"edit"===this.pageType&&(this.titleName="编辑著作权")},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handlePic:function(e){var t=e.raw.name.substr(e.raw.name.lastIndexOf("."));if(".jpg"===t||".png"===t){var a=new FormData;a.append("file",e.raw),this.picFormData=a}else this.$message({type:"warning",message:"请上传有效的.jpg或.png文件"})},handSubmit:function(e){var t=this;this.$refs[e].validate(function(e,a){if(!e)return t.callbackError(a),!1;if(t.form.copyrightOwner.length>50)t.$message.warning("著作权人字符长度不能大于50");else if(t.form.copyrightName.length>50)t.$message.warning("著作名称字符长度不能大于50");else{i()(t.form).forEach(function(e){null!==t.form[e]&&void 0!==t.form[e]||(t.form[e]="")});var r=new FormData;r.append("companyId",t.form.crmCompanyId),r.append("companyName",t.form.crmCompanyName),r.append("copyrightName",t.form.copyrightName),r.append("copyrightOwner",t.form.copyrightOwner),r.append("copyrightType",t.form.copyrightType),r.append("registerNo",t.form.registerNo),r.append("versionNo",t.form.versionNo),r.append("approvalDate",t.form.approvalDate),r.append("publicDate",t.form.publicDate),Object(m.s)(r).then(function(e){200===e.code&&(t.$message({type:"success",message:e.message}),t.form={},t.$store.commit("SET_COPYRIGHT_SCROLL",0),t.cananlHandle())})}})},getFormDetail:function(){var e=this;this.allowDetail.twoAllow?Object(m.m)({copyrightId:this.$route.query.copyrightId}).then(function(t){if(200===t.code){var a=JSON.parse(o()(t.data));a.crmCompanyId=a.companyId,a.crmCompanyName=a.companyName,i()(e.form).forEach(function(e){a.hasOwnProperty(e)||(a[e]="")}),e.form=a,"read"===e.pageType&&e.workType.forEach(function(a){t.data.copyrightType===a.dictId&&(e.form.copyrightTypeName=a.dictName)})}}):this.$message.warning("抱歉，您没有权限获取此详情")},handSubmitEdit:function(e){var t=this;this.$refs[e].validate(function(e,a){if(!e)return t.callbackError(a),!1;if(t.form.copyrightOwner.length>50)t.$message.warning("著作权人字符长度不能大于50");else if(t.form.copyrightName.length>50)t.$message.warning("著作名称字符长度不能大于50");else{i()(t.form).forEach(function(e){null!==t.form[e]&&void 0!==t.form[e]||(t.form[e]="")});var r=new FormData;r.append("companyId",t.form.crmCompanyId),r.append("companyName",t.form.crmCompanyName),r.append("copyrightName",t.form.copyrightName),r.append("copyrightOwner",t.form.copyrightOwner),r.append("copyrightType",t.form.copyrightType),r.append("registerNo",t.form.registerNo),r.append("versionNo",t.form.versionNo),r.append("approvalDate",t.form.approvalDate),r.append("publicDate",t.form.publicDate),r.append("copyrightId",t.$route.query.copyrightId),Object(m.w)(r).then(function(e){200===e.code&&(t.$message({type:"success",message:e.message}),t.form={},t.$store.commit("SET_COPYRIGHT_SCROLL",0),t.cananlHandle())})}})},cananlHandle:function(){var e=this;this.$router.go(-1),this.$store.state.tagsView.visitedViews.forEach(function(t,a){"客户中心-著作权详情"==t.name&&e.$store.state.tagsView.visitedViews.splice(a,1)}),this.form={}},callbackError:function(e){for(var t in e){this.tempArr=e[t];break}this.$message({type:"error",message:this.tempArr[0].message})},resetCompanyHandle:function(){this.userParams.companyNameOnly="",this.getUserNameData()},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.getCompanyData(e)},200)):(this.userParams.companyNameOnly="",this.loading=!0,setTimeout(function(){t.loading=!1,t.getUserNameData()},200))},getCompanyData:function(e){var t=this;this.userParams.page=0,this.userParams.companyNameOnly=e,Object(l.i)(this.userParams).then(function(e){200==e.code&&(t.userNameList=e.data.data,t.userNameTotal=e.data.total)})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"patent-form"},[a("el-form",{ref:"ruleForm",staticClass:"form-box",attrs:{rules:e.rules,model:e.form,"label-width":"auto"}},[a("div",{staticClass:"cart-bar"},[a("div",{staticClass:"cart-title"},[a("div",{staticClass:"line"}),e._v(" "),a("div",{staticClass:"title-name"},[e._v("著作列表 - "+e._s(e.titleName))])]),e._v(" "),a("div",{staticClass:"cart-body"},[a("el-form-item",{staticClass:"form-input",attrs:{label:"客户名称：",prop:"crmCompanyId"}},["add"!=e.pageType||this.$route.query.companyNames?this.$route.query.companyNames?a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:this.$route.query.companyNames,callback:function(t){e.$set(this.$route.query,"companyNames",t)},expression:"this.$route.query.companyNames"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}}):a("el-select",{directives:[{name:"loadMore",rawName:"v-loadMore",value:e.loadMore,expression:"loadMore"}],staticClass:"user-name-item",attrs:{placeholder:"请选择客户名称",disabled:this.$route.query.isUser,filterable:"",remote:"",loading:e.loading,"remote-method":e.remoteMethod,clearable:""},on:{change:e.setCompanyNameHandle,focus:e.resetCompanyHandle},model:{value:e.form.crmCompanyId,callback:function(t){e.$set(e.form,"crmCompanyId",t)},expression:"form.crmCompanyId"}},e._l(e.userNameList,function(e){return a("el-option",{key:e.crmCompanyId,attrs:{value:e.crmCompanyId,label:e.companyName}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"form-input",attrs:{label:"著作名称：",prop:"copyrightName"}},["read"!==e.pageType?a("el-input",{staticClass:"patent-name-item",attrs:{maxlength:"50",clearable:"",placeholder:"请输入著作名称"},model:{value:e.form.copyrightName,callback:function(t){e.$set(e.form,"copyrightName","string"==typeof t?t.trim():t)},expression:"form.copyrightName"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.copyrightName,callback:function(t){e.$set(e.form,"copyrightName",t)},expression:"form.copyrightName"}})],1)],1)]),e._v(" "),a("div",{staticClass:"cart-bar"},[a("div",{staticClass:"cart-body"},[a("el-row",{staticClass:"floor-form"},[a("el-col",{attrs:{sm:24,md:12,lg:10}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"著作权人："}},["read"!==e.pageType?a("el-input",{staticClass:"patent-name-item",staticStyle:{width:"300px"},attrs:{clearable:"",maxlength:"50",placeholder:"请输入著作权人"},model:{value:e.form.copyrightOwner,callback:function(t){e.$set(e.form,"copyrightOwner",t)},expression:"form.copyrightOwner"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.copyrightOwner,callback:function(t){e.$set(e.form,"copyrightOwner",t)},expression:"form.copyrightOwner"}})],1)],1),e._v(" "),a("el-col",{attrs:{sm:24,md:12,lg:14}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"类别：",prop:"copyrightType"}},["read"!==e.pageType?a("el-select",{staticClass:"user-name-item",attrs:{placeholder:"请选择类别"},model:{value:e.form.copyrightType,callback:function(t){e.$set(e.form,"copyrightType",t)},expression:"form.copyrightType"}},e._l(e.workType,function(e){return a("el-option",{key:e.dictId,attrs:{value:e.dictId,label:e.dictName}})}),1):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.copyrightTypeName,callback:function(t){e.$set(e.form,"copyrightTypeName",t)},expression:"form.copyrightTypeName"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"floor-form"},[a("el-col",{attrs:{md:10}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"登记号：",prop:"registerNo"}},["read"!==e.pageType?a("el-input",{staticClass:"patent-name-item",staticStyle:{width:"300px"},attrs:{clearable:"",maxlength:"50",placeholder:"请输入登记号"},model:{value:e.form.registerNo,callback:function(t){e.$set(e.form,"registerNo","string"==typeof t?t.trim():t)},expression:"form.registerNo"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.registerNo,callback:function(t){e.$set(e.form,"registerNo",t)},expression:"form.registerNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:14}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"版本号："}},["read"!==e.pageType?a("el-input",{staticClass:"patent-name-item",staticStyle:{width:"300px"},attrs:{clearable:"",maxlength:"50",placeholder:"请输入版本号"},model:{value:e.form.versionNo,callback:function(t){e.$set(e.form,"versionNo",t)},expression:"form.versionNo"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.versionNo,callback:function(t){e.$set(e.form,"versionNo",t)},expression:"form.versionNo"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"floor-form"},[a("el-col",{attrs:{md:10}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"登记批准日期："}},["read"!==e.pageType?a("el-date-picker",{staticClass:"select-date",attrs:{type:"date",placeholder:"选择登记批准日期","value-format":"yyyy-MM-dd"},model:{value:e.form.approvalDate,callback:function(t){e.$set(e.form,"approvalDate",t)},expression:"form.approvalDate"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.approvalDate,callback:function(t){e.$set(e.form,"approvalDate",t)},expression:"form.approvalDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:14}},[a("el-form-item",{staticClass:"form-input",attrs:{label:"发布日期："}},["read"!==e.pageType?a("el-date-picker",{staticClass:"select-date",attrs:{type:"date",placeholder:"选择发布日期","value-format":"yyyy-MM-dd"},model:{value:e.form.publicDate,callback:function(t){e.$set(e.form,"publicDate",t)},expression:"form.publicDate"}}):a("el-input",{staticClass:"patent-name-item",attrs:{disabled:""},model:{value:e.form.publicDate,callback:function(t){e.$set(e.form,"publicDate",t)},expression:"form.publicDate"}})],1)],1)],1)],1)])]),e._v(" "),a("div",{staticClass:"btn-group-handle"},["add"==e.pageType&&e.allowAdd.twoAllow?a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn blue",on:{click:function(t){return e.handSubmit("ruleForm")}}},[e._v("确定")]):e._e(),e._v(" "),"edit"==e.pageType&&e.allowUpdate.twoAllow?a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"btn blue",on:{click:function(t){return e.handSubmitEdit("ruleForm")}}},[e._v("确定")]):e._e(),e._v(" "),a("el-button",{staticClass:"btn cananl",on:{click:e.cananlHandle}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(p,c,!1,function(e){a("R6Vw")},"data-v-0dafe23e",null);t.default=d.exports}});