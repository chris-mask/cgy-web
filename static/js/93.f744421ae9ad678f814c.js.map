{"version":3,"sources":["webpack:///src/views/policy/projectManage/collect.vue","webpack:///./src/views/policy/projectManage/collect.vue?4d68","webpack:///./src/views/policy/projectManage/collect.vue","webpack:///./src/views/policy/projectManage/collect.vue?8e90","webpack:///./src/views/policy/projectManage/collect.vue?c36e"],"names":["collect","waves","id","getList","material_file_name","params","data","url","filename","link","click","original","val","obj","CollectList","num","p_item","item","projectManage_collect","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","placeholder","readonly","model","value","callback","$$v","project_name","expression","_v","directives","name","rawName","staticStyle","margin-left","type","icon","on","AddMainItem","key","tableKey","ref","width","border","fit","row-key","tree-props","children","default-expand-all","align","label","scopedSlots","_u","fn","scope","row","edit","_e","_s","idx","undefined","min-width","header-align","is_main","clearable","$set","_l","dict_value","material_type","size","$event","ParentAddItem","material_name","material_need","material_url","action","host","upload_url","on-preview","handlePreview","on-remove","handleRemove","file-list","fileList","on-change","file","onUploadChange","show-file-list","uploadData","limit","margin","color","cursor","display","removeFile","placement","trigger","content","slot","preview_one","remarks","class-name","goSure","goEdit","goDel","text-align","margin-top","submitForm","goback","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","push","i","version","sources","names","mappings","sourcesContent","sourceRoot","locals"],"mappings":"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","file":"static/js/93.f744421ae9ad678f814c.js","sourcesContent":["<!-- 文件资料增删改查页面 -->\n<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"10\">\n          <el-input class=\"filter-item\" placeholder=\"项目名称\" v-model=\"project_name\" readonly>\n          </el-input>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button class=\"filter-item\" type=\"success\"  style=\"margin-left: 100px;\" v-waves icon=\"el-icon-edit\" @click=\"AddMainItem\">创建</el-button>\n        </el-col>\n      </el-row>\n    </div>\n\n    <el-table :key='tableKey' :data=\"CollectList\" ref=\"collect_table\" v-loading=\"listLoading\" border fit\n              style=\"width: 100%;\" row-key=\"num\" :tree-props=\"{children: 'children'}\"  :default-expand-all=\"true\" >\n      <el-table-column align=\"center\" width=\"65\" label=\"次序\" type=\"selection\">\n        <template slot-scope=\"scope\" v-if=\"scope.row.is_parent\">\n          <span v-if=\"!scope.row.edit\">{{scope.row.idx}}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column min-width=\"120px\" header-align=\"center\"  label=\"材料类型\">\n        <template slot-scope=\"scope\">\n          <template v-if=\"scope.row.edit\">\n            <el-select width=\"80%\" v-if=\"scope.row.edit && scope.row.is_main\" clearable  class=\"filter-item\"\n                       v-model=\"scope.row.material_type\" placeholder=\"事件类型\" >\n              <el-option v-for=\"item in material_type_list\" :value=\"item.dict_value\" :key=\"item.dict_value\" :label=\"item.dict_value\">\n              </el-option>\n            </el-select>\n          </template>\n          <span v-else>\n            <span >{{ scope.row.material_type }}</span>\n            <el-button v-if=\"scope.row.children\" type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" @click=\"ParentAddItem(scope.row)\"></el-button>\n          </span>\n        </template>\n      </el-table-column>\n\n\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"材料名称\">\n        <template slot-scope=\"scope\">\n          <template v-if=\"!scope.row.is_main\">\n            <el-input v-if=\"scope.row.edit\" style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\"\n                      v-model=\"scope.row.material_name\"></el-input>\n            <span v-else>{{ scope.row.material_name }}</span>\n          </template>\n        </template>\n      </el-table-column>\n\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"资料所需要求\">\n        <template slot-scope=\"scope\">\n          <template v-if=\"!scope.row.is_main\">\n            <el-input v-if=\"scope.row.edit\" style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\"\n                      v-model=\"scope.row.material_need\"></el-input>\n            <span v-else>{{ scope.row.material_need }}</span>\n\n          </template>\n        </template>\n      </el-table-column>\n\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"材料模板文件\">\n        <template slot-scope=\"scope\">\n          <template v-if=\"!scope.row.is_main\">\n            <div v-if=\"!scope.row.material_url || scope.row.edit \">\n              <el-upload\n                class=\"upload-box upload-box-width\"\n                :action=\"host + upload_url\"\n                :on-preview=\"handlePreview\"\n                :on-remove=\"handleRemove\"\n                :file-list=\"fileList\"\n                :on-change=\"(file)=> onUploadChange(file, scope.row)\"\n                :show-file-list=\"true\"\n                :data=\"uploadData\"\n                :limit=\"limit\">\n                <i class=\"el-icon-upload\"></i>\n                <span style=\"margin:10px;color:gray;cursor: default;display: inline-block\">{{scope.row.material_url?'已上传':'未上传'}}\n\n                </span>\n              </el-upload>\n              <i v-if=\"scope.row.material_url\" class=\"el-icon-error\" @click=\"removeFile(scope.row)\"></i>\n            </div>\n            <el-popover  v-else\n                         placement=\"top-start\"\n                         width=\"200\"\n                         trigger=\"hover\"\n                         :content=\"scope.row.material_file_name\">\n              <el-button slot=\"reference\" class=\"download-btn\" @click=\"preview_one(scope.row)\">{{scope.row.material_url?'下载':'未上传'}}</el-button>\n\n            </el-popover>\n          </template>\n        </template>\n      </el-table-column>\n\n      <el-table-column min-width=\"100px\" align=\"center\" label=\"备注\">\n        <template slot-scope=\"scope\">\n          <template v-if=\"scope.row.edit&!scope.row.children \">\n            <el-input style=\"margin-left: 10px; width: 90%;\" class=\"edit-input\" size=\"small\" v-model=\"scope.row.remarks\"></el-input>\n          </template>\n          <span v-else>{{ scope.row.remarks }}</span>\n        </template>\n      </el-table-column>\n\n\n      <el-table-column align=\"center\" label=\"操作\" width=\"230px\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" v-if=\"!scope.row.edit\"   size=\"mini\" @click=\"goEdit(scope.row)\">编辑</el-button>\n          <el-button type=\"primary\" v-else=\"\"   size=\"mini\" @click=\"goSure(scope.row)\">确定</el-button>\n          <el-button type=\"danger\"   size=\"mini\" @click=\"goDel(scope.row.num)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!--<el-divider></el-divider>-->\n    <div style=\"text-align: right;margin-top: 50px\">\n      <el-button type=\"primary\" @click=\"submitForm()\">保存</el-button>\n      <el-button @click=\"goback\">取消</el-button>\n    </div>\n\n\n\n  </div>\n</template>\n\n<script>\n  import waves from '@/directive/waves' // 水波纹指令\n  // import AreaSelect from '@/components/AreaSelect/AreaSelect'\n  // import { GetProjectMaterialList, SaveProjectMaterial } from '@/api/grp'\n  import axios from 'axios'\n\n  export default {\n    name: 'complexTable',\n    directives: {\n      waves\n    },\n    // components: {\n    //   AreaSelect\n    // },\n    data() {\n      return {\n        count: 1,\n        tableKey: 0,\n        host: process.env.BASE_API,\n        upload_url: '/core/upload-files-api/',\n        uploadData: { save_path: 'project_material/' },\n        limit: 1,\n        fileList: [],\n        CollectList: [],\n        total: null,\n        listLoading: false,\n        num: 1,\n        project_name: '',\n        material_type_list: []\n      }\n    },\n    filters: {\n    },\n    created() {\n    },\n    mounted() {\n      if (this.$route.query.id) {\n        this.id = this.$route.query.id\n      }\n      this.getList()\n    },\n    methods: {\n      getList() {\n        // GetProjectMaterialList({ id: this.id }).then(res => {\n        //   if (res.data.code === 1) {\n        //     this.CollectList = this.initList(res.data.data)\n        //     this.project_name = res.data.project_name\n        //     this.material_type_list = res.data.material_type_list\n        //     this.CollectList.map(item => {\n        //       item.is_main = true\n        //     })\n        //   }\n        // })\n      },\n\n      handlePreview(file) {\n      },\n      handleRemove(file, fileList) {\n        this.ruleForm.official_file = null\n      },\n      removeFile(data) {\n        data.material_file_name = null\n        data.material_url = null\n      },\n      preview_one(file_obj) {\n        this.a_downfile(this.host + file_obj.material_url, file_obj.material_file_name)\n      },\n      a_downfile(path, filename) {\n        window.open(path, '_blank')\n      },\n      mydownfile(path, filename) {\n        const downloadFile = (params) => {\n          return axios({\n            url: params,\n            method: 'get',\n            responseType: 'blob'\n          })\n        }\n        downloadFile(path).then(data => {\n          if (!data) {\n            return false\n          }\n          const url = window.URL.createObjectURL(data.data)\n          const link = document.createElement('a')\n          link.style.display = 'none'\n          link.href = url\n          link.setAttribute('download', filename)\n          document.body.appendChild(link)\n          link.click()\n          // 销毁添加的a标签\n          setTimeout(() => {\n            link.parentNode.removeChild(link)\n          }, 200)\n        })\n      },\n      onUploadChange(file, data) {\n        var form = data\n        if (file.response) {\n          form.material_url = file.response.url\n          form.material_file_name = file.response.original\n        }\n      },\n\n      handleFilter() {\n        this.listQuery.page = 1\n        this.getList()\n      },\n      handleSizeChange(val) {\n        this.listQuery.limit = val\n        this.getList()\n      },\n      handleCurrentChange(val) {\n        this.listQuery.page = val\n        this.getList()\n      },\n      AddMainItem() {\n        // 添加主项\n        var idx = this.CollectList.length + 1\n        var obj = { material_name: '', edit: true, children: [], is_parent: true, is_main: true, idx: idx }\n        this.setNum(obj)\n        this.CollectList.push(obj)\n      },\n      ParentAddItem(data) {\n        // 主项下添加子项\n        var obj = { material_name: '', edit: true, is_main: false, material_need: '', remarks: '',\n          file_mould: null }\n        this.setNum(obj)\n        data.children.push(obj)\n      },\n      goDel(num) {\n        var data = this.CollectList\n        for (var p_item in data) {\n          if (data[p_item].num === num) {\n            data.splice(p_item, 1)\n            break\n          }\n          if (data[p_item].children) {\n            for (var item in data[p_item].children) {\n              if (data[p_item].children[item].num === num) {\n                data[p_item].children.splice(item, 1)\n                return\n              }\n            }\n          }\n        }\n      },\n      submitForm() {\n        if (!this.checkList()) {\n          this.$message.error('主项必须添加子项')\n          return\n        }\n        var form = this.CollectList\n        // SaveProjectMaterial({ id: this.id, data: form }).then(response => {\n        //   if (response.data.code === 1) {\n        //     this.$message({\n        //       message: '操作成功',\n        //       type: 'success'\n        //     })\n        //     this.$router.go(-1)\n        //   }\n        // })\n      },\n      checkList() {\n        for (var item in this.CollectList) {\n          if (this.CollectList[item].is_main) {\n            if (this.CollectList[item].children.length === 0) {\n              return false\n            }\n          }\n        }\n        return true\n      },\n      setNum(data) {\n        data.num = this.num\n        this.num += 1\n      },\n      initList(data) {\n        for (var p_item in data) {\n          data[p_item].edit = false\n          this.setNum(data[p_item])\n          if (data[p_item].children) {\n            for (var item in data[p_item].children) {\n              data[p_item].children[item].edit = false\n              this.setNum(data[p_item].children[item])\n            }\n          }\n        }\n        return data\n      },\n      goback() {\n        this.$router.go(-1)\n      },\n      getArea(val) {\n        this.listQuery.areaId = val\n      },\n      goEdit(data) {\n        data.edit = true\n      },\n      goSure(data) {\n        data.edit = false\n      },\n      changeType() {\n        var lists = this.CollectList\n        for (var item in lists) {\n          if (!lists[item].is_main) {\n            lists[item].material_type = ''\n          } else {\n            for (var c_item in lists[item].children) {\n              lists[item].children[c_item].material_type = ''\n            }\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .download-btn {\n    border: none;\n    background: none;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/policy/projectManage/collect.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-input',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"项目名称\",\"readonly\":\"\"},model:{value:(_vm.project_name),callback:function ($$v) {_vm.project_name=$$v},expression:\"project_name\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"100px\"},attrs:{\"type\":\"success\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.AddMainItem}},[_vm._v(\"创建\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],key:_vm.tableKey,ref:\"collect_table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.CollectList,\"border\":\"\",\"fit\":\"\",\"row-key\":\"num\",\"tree-props\":{children: 'children'},\"default-expand-all\":true}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"65\",\"label\":\"次序\",\"type\":\"selection\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (scope.row.is_parent)?[(!scope.row.edit)?_c('span',[_vm._v(_vm._s(scope.row.idx))]):_vm._e()]:undefined}}],null,true)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"120px\",\"header-align\":\"center\",\"label\":\"材料类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.edit)?[(scope.row.edit && scope.row.is_main)?_c('el-select',{staticClass:\"filter-item\",attrs:{\"width\":\"80%\",\"clearable\":\"\",\"placeholder\":\"事件类型\"},model:{value:(scope.row.material_type),callback:function ($$v) {_vm.$set(scope.row, \"material_type\", $$v)},expression:\"scope.row.material_type\"}},_vm._l((_vm.material_type_list),function(item){return _c('el-option',{key:item.dict_value,attrs:{\"value\":item.dict_value,\"label\":item.dict_value}})}),1):_vm._e()]:_c('span',[_c('span',[_vm._v(_vm._s(scope.row.material_type))]),_vm._v(\" \"),(scope.row.children)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.ParentAddItem(scope.row)}}}):_vm._e()],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"材料名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(scope.row.edit)?_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.material_name),callback:function ($$v) {_vm.$set(scope.row, \"material_name\", $$v)},expression:\"scope.row.material_name\"}}):_c('span',[_vm._v(_vm._s(scope.row.material_name))])]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"资料所需要求\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(scope.row.edit)?_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.material_need),callback:function ($$v) {_vm.$set(scope.row, \"material_need\", $$v)},expression:\"scope.row.material_need\"}}):_c('span',[_vm._v(_vm._s(scope.row.material_need))])]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"材料模板文件\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.is_main)?[(!scope.row.material_url || scope.row.edit )?_c('div',[_c('el-upload',{staticClass:\"upload-box upload-box-width\",attrs:{\"action\":_vm.host + _vm.upload_url,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"file-list\":_vm.fileList,\"on-change\":function (file){ return _vm.onUploadChange(file, scope.row); },\"show-file-list\":true,\"data\":_vm.uploadData,\"limit\":_vm.limit}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin\":\"10px\",\"color\":\"gray\",\"cursor\":\"default\",\"display\":\"inline-block\"}},[_vm._v(_vm._s(scope.row.material_url?'已上传':'未上传')+\"\\n\\n              \")])]),_vm._v(\" \"),(scope.row.material_url)?_c('i',{staticClass:\"el-icon-error\",on:{\"click\":function($event){return _vm.removeFile(scope.row)}}}):_vm._e()],1):_c('el-popover',{attrs:{\"placement\":\"top-start\",\"width\":\"200\",\"trigger\":\"hover\",\"content\":scope.row.material_file_name}},[_c('el-button',{staticClass:\"download-btn\",attrs:{\"slot\":\"reference\"},on:{\"click\":function($event){return _vm.preview_one(scope.row)}},slot:\"reference\"},[_vm._v(_vm._s(scope.row.material_url?'下载':'未上传'))])],1)]:_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"align\":\"center\",\"label\":\"备注\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.edit&!scope.row.children )?[_c('el-input',{staticClass:\"edit-input\",staticStyle:{\"margin-left\":\"10px\",\"width\":\"90%\"},attrs:{\"size\":\"small\"},model:{value:(scope.row.remarks),callback:function ($$v) {_vm.$set(scope.row, \"remarks\", $$v)},expression:\"scope.row.remarks\"}})]:_c('span',[_vm._v(_vm._s(scope.row.remarks))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"230px\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.edit)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goEdit(scope.row)}}},[_vm._v(\"编辑\")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goSure(scope.row)}}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goDel(scope.row.num)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"50px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.goback}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0a9e0f66\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/policy/projectManage/collect.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a9e0f66\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./collect.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./collect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./collect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a9e0f66\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./collect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0a9e0f66\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/policy/projectManage/collect.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.download-btn[data-v-0a9e0f66] {\\n  border: none;\\n  background: none;\\n}\\n\\n\", \"\", {\"version\":3,\"sources\":[\"H:/chengguoyun-web/src/views/policy/projectManage/collect.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,aAAa;EACb,iBAAiB;CAClB\",\"file\":\"collect.vue\",\"sourcesContent\":[\"\\n.download-btn[data-v-0a9e0f66] {\\n  border: none;\\n  background: none;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0a9e0f66\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/policy/projectManage/collect.vue\n// module id = mcpS\n// module chunks = 93","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a9e0f66\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./collect.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"154e8f03\", content, true);\n\n\n// WEBPACK FOOTER //\n// \"}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0a9e0f66\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/policy/projectManage/collect.vue"],"sourceRoot":""}