webpackJsonp([101],{"0icv":function(t,e,a){"use strict";e.c=function(t){return Object(l.a)({url:"/crm/api/crm/crmProjectPlan/saveProjectPlan",method:"POST",data:t})},e.d=function(t){return Object(l.a)({url:"/crm/api/crm/crmProjectPlan/updateProjectPlan",method:"POST",data:t})},e.b=function(t){return Object(n.a)({url:"/crm/api/crm/crmProjectPlan/queryProjectPlanList",method:"POST",data:t})},e.a=function(t){return Object(l.a)({url:"/crm/api/crm/crmProjectPlan/deleteProjectPlanByIds",method:"POST",data:t})};var n=a("vLgD"),l=a("s01O")},JrG4:function(t,e,a){var n=a("W9+3");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("3ec3ba76",n,!0)},"W9+3":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.sales-plan-box[data-v-1d9b7949] {\n  margin: auto 5%;\n}\n.sales-plan-box .list[data-v-1d9b7949] {\n  background: #ffffff;\n  -webkit-box-shadow: 0 3px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: 0 3px 12px rgba(5, 170, 255, 0.08);\n  margin-top: 16px;\n}\n.sales-plan-box .list .list-title[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding: 5px 16px;\n  -webkit-box-shadow: -1px 2px 12px rgba(5, 170, 255, 0.08);\n          box-shadow: -1px 2px 12px rgba(5, 170, 255, 0.08);\n}\n.sales-plan-box .list .list-title .left[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.sales-plan-box .list .list-title .left .title-text[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-right: 38px;\n}\n.sales-plan-box .list .list-title .left .title-text .line[data-v-1d9b7949] {\n  margin-right: 8px;\n  display: inline-block;\n  width: 3px;\n  height: 14px;\n  background: #ffa96a;\n}\n.sales-plan-box .list .list-title .left .title-text .search-total-num[data-v-1d9b7949] {\n  font-size: 14px;\n  font-family: Microsoft YaHei;\n  font-weight: 400;\n  color: rgba(68, 68, 68, 0.75);\n}\n.sales-plan-box .list .list-title .left .title-text .search-total-num .num[data-v-1d9b7949] {\n  color: #FF6C6C;\n}\n.sales-plan-box .list .list-title .left .title-btn-group[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 50px;\n}\n.sales-plan-box .list .list-title .left .title-btn-group .btn[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-right: 20px;\n  padding: 4px 9px;\n  font-size: 16px;\n  color: #05aaff;\n  border: 1px solid #05aaff;\n  border-radius: 2px;\n  cursor: pointer;\n}\n.sales-plan-box .list .list-title .left .title-btn-group .btn[data-v-1d9b7949]:hover {\n  color: #fff;\n  background: #05aaff;\n}\n.sales-plan-box .list .list-title .left .title-btn-group .btn.del[data-v-1d9b7949] {\n  border: 1px solid #f56c6c;\n  color: #f56c6c;\n}\n.sales-plan-box .list .list-title .left .title-btn-group .btn.del[data-v-1d9b7949]:hover {\n  color: #fff;\n  background: #f56c6c;\n}\n.sales-plan-box .list .list-title .left .title-btn-group .btn[data-v-1d9b7949]:active {\n  opacity: 0.5;\n}\n.sales-plan-box .list .list-detail .item[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 20px;\n  padding-bottom: 2px;\n  padding-right: 4px;\n  position: relative;\n}\n.sales-plan-box .list .list-detail .item .check-num[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 10px;\n}\n.sales-plan-box .list .list-detail .item .check-num .check-box[data-v-1d9b7949] {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  margin-right: 10px;\n  margin-top: 1px;\n}\n.sales-plan-box .list .list-detail .item .check-num .item-num[data-v-1d9b7949] {\n  width: 18px;\n  height: 18px;\n  background: #91e5a1;\n  color: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  font-size: 14px;\n  border-radius: 50%;\n}\n.sales-plan-box .list .list-detail .item .item-body[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  font-size: 14px;\n  width: 90%;\n}\n.sales-plan-box .list .list-detail .item .item-body .cate[data-v-1d9b7949] {\n  width: 33%;\n  padding-right: 10px;\n  white-space: nowrap;\n  margin-bottom: 10px;\n  color: rgba(68, 68, 68, 0.75);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.sales-plan-box .list .list-detail .item .item-body .cate span[data-v-1d9b7949] {\n  color: #444;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 90%;\n  display: inline-block;\n}\n.sales-plan-box .list .list-detail .item .handle-btn-group[data-v-1d9b7949] {\n  width: 70px;\n  min-width: 70px;\n  margin-top: -5px;\n}\n.sales-plan-box .list .list-detail .item .handle-btn-group .btn-img[data-v-1d9b7949] {\n  cursor: pointer;\n  width: 70px;\n  height: 30px;\n}\n.sales-plan-box .list .list-detail .item .handle-btn-group .btn-img.edit-img[data-v-1d9b7949] {\n  background-size: cover;\n  background: url("+a("cuAl")+") no-repeat;\n}\n.sales-plan-box .list .list-detail .item .handle-btn-group .btn-img.edit-img[data-v-1d9b7949]:hover {\n  background: url("+a("L74e")+") no-repeat;\n}\n.sales-plan-box .list .list-detail .bg-list[data-v-1d9b7949]:nth-child(even) {\n  background: #dee6ff;\n}\n.sales-plan-box .list .list-detail .bg-list[data-v-1d9b7949]:nth-child(even):hover {\n  background: #C5D4FF;\n}\n.sales-plan-box .list .list-detail .bg-list[data-v-1d9b7949]:nth-child(odd) {\n  background: #effaff;\n}\n.sales-plan-box .list .list-detail .bg-list[data-v-1d9b7949]:nth-child(odd):hover {\n  background: #CDEEFF;\n}\n.sales-plan-box .list .list-detail .get-more[data-v-1d9b7949] {\n  padding: 30px 0;\n  text-align: center;\n  cursor: pointer;\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-dialog__header {\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n  padding: 20px 20px 16px;\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-dialog__title {\n  line-height: 0;\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-dialog__headerbtn {\n  top: 19px;\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-dialog__body {\n  padding: 14px;\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-form-item__label {\n  font-weight: normal;\n  color: rgba(68, 68, 68, 0.75);\n}\n.sales-plan-box .editorUserModal[data-v-1d9b7949] .el-form-item__content {\n  width: 73%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.sales-plan-box .editorUserModal .user-input[data-v-1d9b7949] .el-input__inner {\n  border: 0;\n  border-radius: 0;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.sales-plan-box .editorUserModal .user-input.input[data-v-1d9b7949] {\n  width: 100%;\n  border-radius: 0;\n  border: 0;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.sales-plan-box .editorUserModal .user-input.input[data-v-1d9b7949]:focus {\n  border: 0;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.3);\n}\n.sales-plan-box .editorUserModal .user-select[data-v-1d9b7949] {\n  width: 100%;\n}\n.sales-plan-box .editorUserModal .switch-btn[data-v-1d9b7949] {\n  font-size: 14px;\n  color: #fff;\n  background: #05aaff;\n  margin-left: 10px;\n}\n.sales-plan-box .editorUserModal .switch-btn[data-v-1d9b7949]:active {\n  opacity: 0.5;\n}\n.sales-plan-box .editorUserModal .modal-radio[data-v-1d9b7949] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.sales-plan-box .editorUserModal .modal-radio[data-v-1d9b7949] .el-form-item__content {\n  margin-left: 0 !important;\n}\n.sales-plan-box .editorUserModal .dialog-footer .setBtn[data-v-1d9b7949] {\n  color: #fff;\n  background: #05aaff;\n}\n.sales-plan-box .editorUserModal .dialog-footer .cananl[data-v-1d9b7949] {\n  background: #fff;\n  color: #444444;\n}\n",""])},spyW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),l=a.n(n),i=a("0icv"),s=a("rN1C"),o={data:function(){return{projectList:[],projectForm:{page:0,pageSize:20},projectPlanParams:{page:0,pageSize:20},listData:[],listTotal:"",dialogVisible:!1,ruleForm:{},rules:{projectId:[{required:!0,message:"请选择项目名称",trigger:"blur"}],policyInfo:[{required:!0,message:"请输入政策信息",trigger:"blur"}]},updatetitleName:null,check_biz_ids:[],isCheckAll:!1,allowGetProjectplanList:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CRM:PROJECTPLAN:LIST"),allowAdd:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CRM:PROJECTPLAN:INSERT"),allowUpdate:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CRM:PROJECTPLAN:UPDATE"),allowDelete:this.authorityControl("SYSTEM:CUSTOMER:MANAGE","SYSTEM:CUSTOMER:CENTER","SYSTEM:CUSTOMER:CRM:PROJECTPLAN:DELETED")}},props:["id"],mounted:function(){this.allowGetProjectplanList.twoAllow&&this.getListData()},directives:{loadMore:{bind:function(t,e){t.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&e.value()})}}},methods:{getProjectList:function(){var t=this;Object(s.e)(this.projectForm).then(function(e){200==e.code?t.projectForm.page>0?t.projectList=t.projectList.concat(e.data.data):t.projectList=e.data.data:t.$message.warning(e.message)})},projectListMethod:function(t){var e=this;this.projectForm.page=0,this.projectForm.projectName=t,this.loading=!0,setTimeout(function(){e.loading=!1,e.getProjectList(t)},200)},loadMore:function(){this.projectForm.page=this.projectForm.page+20,this.getProjectList()},removeProjectList:function(){this.projectForm.page=0,this.projectForm.projectName=""},getListData:function(){var t=this;this.projectPlanParams.companyId=this.id,Object(i.b)(this.projectPlanParams).then(function(e){200===e.code&&(t.$emit("projectPlanTotal",e.data.total),t.projectPlanParams.page>0?(t.listData=t.listData.concat(e.data.data),t.listTotal=e.data.total):(t.listData=e.data.data,t.listTotal=e.data.total))})},btnHandle:function(t,e){this.ruleForm={},this.dialogVisible=!0,this.updatetitleName=t,!1===t&&(this.ruleForm=JSON.parse(l()(e)),this.projectListMethod(this.ruleForm.projectName),this.getProjectList())},getFocusProject:function(){this.ruleForm.planId&&(this.projectForm.projectName=""),this.getProjectList()},cananlHandle:function(){this.ruleForm={},this.dialogVisible=!1},setBtnHandle:function(t){var e=this;this.ruleForm.companyId=this.id,this.$refs[t].validate(function(t,a){t&&(e.updatetitleName?Object(i.c)(e.ruleForm).then(function(t){200===t.code&&(e.$message({type:"success",message:t.message}),e.dialogVisible=!1,e.ruleForm={},e.getListData())}):Object(i.d)(e.ruleForm).then(function(t){200===t.code&&(e.$message({type:"success",message:t.message}),e.ruleForm={},e.dialogVisible=!1,e.getListData())}))})},checkAllOrNo:function(){if(this.isCheckAll)this.check_biz_ids=[],this.isCheckAll=!1;else{var t=this;this.listData.forEach(function(e,a){-1===t.check_biz_ids.indexOf(e.planId)&&t.check_biz_ids.push(e.planId),t.isCheckAll=!0})}},checkOneOrNo:function(){this.check_biz_ids.length===this.listData.length?this.isCheckAll=!0:this.isCheckAll=!1},delAccountHandle:function(){var t=this;0===this.check_biz_ids.length?this.$message({message:"请勾选要删除的行！",type:"warning"}):Object(i.a)(this.check_biz_ids).then(function(e){200===e.code&&(t.$message({type:"success",message:e.message}),t.isCheckAll=!1,t.getListData())})},getMore:function(){this.projectPlanParams.page+=20,this.listData.length<this.listTotal&&this.getListData()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sales-plan-box"},[a("div",{staticClass:"list"},[a("div",{staticClass:"list-title"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title-text"},[a("span",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"search-total-num"},[t._v("搜索到 "),a("span",{staticClass:"num"},[t._v(t._s(t.listData.length))]),t._v(" 条记录")])]),t._v(" "),a("div",{staticClass:"title-btn-group"},[a("div",{staticClass:"btn",on:{click:t.checkAllOrNo}},[t._v(" "+t._s(t.isCheckAll?"取消全选":"全选"))]),t._v(" "),t.allowAdd.twoAllow?a("div",{staticClass:"btn",on:{click:function(e){return t.btnHandle(!0)}}},[t._v("新增")]):t._e(),t._v(" "),t.allowDelete.twoAllow?a("div",{staticClass:"btn del",on:{click:t.delAccountHandle}},[t._v("删除")]):t._e()])])]),t._v(" "),a("div",{staticClass:"list-detail bg-list"},[t._l(t.listData,function(e,n){return a("div",{staticClass:"item bg-list"},[a("div",{staticClass:"check-num"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.check_biz_ids,expression:"check_biz_ids"}],staticClass:"check-box",attrs:{type:"checkbox"},domProps:{value:e.planId,checked:Array.isArray(t.check_biz_ids)?t._i(t.check_biz_ids,e.planId)>-1:t.check_biz_ids},on:{change:[function(a){var n=t.check_biz_ids,l=a.target,i=!!l.checked;if(Array.isArray(n)){var s=e.planId,o=t._i(n,s);l.checked?o<0&&(t.check_biz_ids=n.concat([s])):o>-1&&(t.check_biz_ids=n.slice(0,o).concat(n.slice(o+1)))}else t.check_biz_ids=i},t.checkOneOrNo]}}),t._v(" "),a("span",{staticClass:"item-num"},[t._v(t._s(n+1))])]),t._v(" "),a("div",{staticClass:"item-body"},[a("div",{staticClass:"cate",attrs:{title:e.projectName}},[t._v("项目名称："),a("span",[t._v(t._s(e.projectName))])]),t._v(" "),a("div",{staticClass:"cate",attrs:{title:e.policyInfo}},[t._v("政策信息："),a("span",[t._v(t._s(e.policyInfo))])]),t._v(" "),a("div",{staticClass:"cate",attrs:{title:e.planRemark}},[t._v("备注："),a("span",[t._v(t._s(e.planRemark))])])]),t._v(" "),a("div",{staticClass:"handle-btn-group"},[t.allowUpdate.twoAllow?a("div",{staticClass:"btn-img edit-img",on:{click:function(a){return t.btnHandle(!1,e)}}}):t._e()])])}),t._v(" "),t.listData.length>=t.listTotal?a("div",{staticClass:"get-more"},[t._v("\n        没有更多\n      ")]):a("div",{staticClass:"get-more",on:{click:t.getMore}},[t._v("\n        加载更多\n      ")])],2)]),t._v(" "),a("el-dialog",{staticClass:"editorUserModal",attrs:{title:t.updatetitleName?"项目规划-新增":"项目规划-编辑",visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"projectId"}},[a("el-select",{directives:[{name:"loadMore",rawName:"v-loadMore",value:t.loadMore,expression:"loadMore"}],staticClass:"inline-block float-left",attrs:{remote:"","remote-method":t.projectListMethod,filterable:"",loading:t.loading,placeholder:"项目名称"},on:{focus:t.getFocusProject,blur:t.removeProjectList},model:{value:t.ruleForm.projectId,callback:function(e){t.$set(t.ruleForm,"projectId",e)},expression:"ruleForm.projectId"}},t._l(t.projectList,function(t){return a("el-option",{key:t.projectId,attrs:{label:t.projectName,value:t.projectId}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"政策信息：",prop:"policyInfo"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:5,maxlength:"100",placeholder:"请输入政策信息"},model:{value:t.ruleForm.policyInfo,callback:function(e){t.$set(t.ruleForm,"policyInfo",e)},expression:"ruleForm.policyInfo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:5,maxlength:"100",placeholder:"请输入备注"},model:{value:t.ruleForm.planRemark,callback:function(e){t.$set(t.ruleForm,"planRemark",e)},expression:"ruleForm.planRemark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cananl",on:{click:t.cananlHandle}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"setBtn",on:{click:function(e){return t.setBtnHandle("ruleForm")}}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,r,!1,function(t){a("JrG4")},"data-v-1d9b7949",null);e.default=d.exports}});