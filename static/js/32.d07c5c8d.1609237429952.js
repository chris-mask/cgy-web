webpackJsonp([32],{"7UzA":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.row-width-auto-margin-0-90[data-v-464c5484] {\n  width: auto;\n  margin: auto 4%;\n}\n.searchCont[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  max-width: 740px;\n  margin: 0 auto;\n}\n.searchCont[data-v-464c5484] .el-input__inner {\n  height: 100%;\n  border-radius: 0;\n  border: 1px solid #05AAFF;\n}\n.searchCont .el-input[data-v-464c5484] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.searchCont .btn[data-v-464c5484] {\n  border: 0;\n  border-radius: 0;\n}\n.searchCont .addBtn[data-v-464c5484] {\n  margin-left: 45px;\n}\n.searchCont .el-button[data-v-464c5484] {\n  width: 120px;\n}\n.hotSearch[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  max-width: 740px;\n  margin: 0 auto;\n}\n.hotSearch p[data-v-464c5484] {\n  font-size: 12px;\n  color: #042B40;\n}\n.hotSearch span[data-v-464c5484] {\n  font-size: 12px;\n  color: #979797;\n  margin-right: 18px;\n}\n.box-card[data-v-464c5484] {\n  margin-bottom: 14px;\n}\n.bt_blue[data-v-464c5484] {\n  width: 120px;\n  height: 48px;\n  background: -webkit-gradient(linear, left top, left bottom, from(#69ccff), to(#05aaff));\n  background: linear-gradient(180deg, #69ccff 0%, #05aaff 100%);\n  opacity: 1;\n  border-radius: 2px;\n}\n[data-v-464c5484] .el-card__header {\n  padding: 10px 20px;\n}\n.headerTop[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.headerLeft[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.headerLeft span[data-v-464c5484] {\n  font-size: 14px;\n  color: rgba(68, 68, 68, 0.75);\n  margin-right: 10px;\n}\n.headerLeft span span[data-v-464c5484] {\n  color: #F56C6C;\n  margin-right: 0px;\n}\n.headerLeft .headBtn[data-v-464c5484] {\n  margin-left: 40px;\n  font-size: 14px;\n}\n.headerLeft .headBtn .allChoose[data-v-464c5484] {\n  padding: 6px 8px;\n  color: #05AAFF;\n  border: 1px solid #05AAFF;\n  background-color: #fff;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .export[data-v-464c5484] {\n  padding: 6px 8px;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .allDelete[data-v-464c5484] {\n  padding: 6px 8px;\n  color: #fff;\n  border: 1px solid #FF8585;\n  background-color: #FF8585;\n  border-radius: 2px;\n}\n.headerLeft .headBtn .originBtn[data-v-464c5484] {\n  padding: 6px 8px;\n  color: #fff;\n  border: 1px solid #FD903C;\n  background-color: #FD903C;\n  border-radius: 2px;\n}\n.headerRig[data-v-464c5484] .el-select .el-input__inner {\n  border: none;\n}\n.cardCont[data-v-464c5484] .el-card__body {\n  padding: 0;\n}\n.dataList .dataBox[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 23px 30px;\n  border-bottom: 1px solid rgba(68, 68, 68, 0.14901961);\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  position: relative;\n}\n.dataList .dataBox .freeContract[data-v-464c5484] {\n  width: 8%;\n  /*position: absolute;*/\n  /*right: 50%;*/\n  /*margin-right: -50%;*/\n}\n.dataList .dataBox .dataBoxLeft[data-v-464c5484] {\n  width: 100%;\n  position: relative;\n}\n.dataList .dataBox .dataBoxLeft[data-v-464c5484] .el-checkbox {\n  width: 100%;\n}\n.dataList .dataBox .dataBoxLeft[data-v-464c5484] .el-checkbox__label {\n  width: 100%;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .fileType[data-v-464c5484] {\n  font-size: 18px;\n  width: 60px;\n  min-width: 60px;\n  height: 60px;\n  opacity: 1;\n  border-radius: 2px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  color: #fff;\n  margin-right: 30px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  white-space: pre-wrap;\n  word-break: break-all;\n  padding: 10px;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .fileDoc[data-v-464c5484] {\n  background: #69ccff;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .fileXls[data-v-464c5484] {\n  background: #91E5A1;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .filePpt[data-v-464c5484] {\n  background: #FFCBA6;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .filePdt[data-v-464c5484] {\n  background: #FF8585;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .fileJpg[data-v-464c5484] {\n  background: #9BB5FF;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .filePng[data-v-464c5484] {\n  background: #FE95B2;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail[data-v-464c5484] {\n  width: 100%;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .contractlist[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  margin-bottom: 20px;\n  background: #fffaf3;\n  padding: 10px;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .contractlist .contractBox[data-v-464c5484] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-right: 20px;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .contractlist[data-v-464c5484]:last-child {\n  margin-bottom: 0;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail p[data-v-464c5484] {\n  font-size: 18px;\n  font-weight: bold;\n  color: #444444;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .down-img[data-v-464c5484] {\n  cursor: pointer;\n  margin-left: 12px;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .dataMsg[data-v-464c5484] {\n  font-size: 14px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  color: #444;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.dataList .dataBox .dataBoxLeft .dataLeft .dataDetail .dataMsg span[data-v-464c5484] {\n  margin-right: 60px;\n  margin-bottom: 10px;\n}\n.dataList .dataBox .dataBoxRig .btnMt[data-v-464c5484] {\n  text-align: center;\n  margin-bottom: 5px;\n}\n.dataList .dataBox .dataBoxRig .btnMt .primary[data-v-464c5484] {\n  border: 1px solid #05aaff;\n  background: #05aaff;\n  color: #fff;\n}\n.dataList .dataBox .dataBoxRig .btnMt .primary[data-v-464c5484]:hover {\n  background: rgba(5, 170, 255, 0.9);\n  color: #fff;\n}\n.dataList .dataBox .dataBoxRig .btnMt .violet[data-v-464c5484] {\n  border: 1px solid #799cff;\n  background: #799cff;\n  color: #fff;\n}\n.dataList .dataBox .dataBoxRig .btnMt .violet[data-v-464c5484]:hover {\n  background: rgba(121, 156, 255, 0.9);\n  color: #fff;\n}\n.dataList .dataBox .dataBoxRig .btnMt .origin[data-v-464c5484] {\n  border: 1px solid #ffcba6;\n  background: #ffcba6;\n  color: #fff;\n}\n.dataList .dataBox .dataBoxRig .btnMt .origin[data-v-464c5484]:hover {\n  background: rgba(255, 203, 166, 0.9);\n  color: #fff;\n}\n.conditionCont[data-v-464c5484] {\n  padding: 10px 20px;\n}\n.conditionCont .conditionBox[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 10px;\n}\n.conditionCont .conditionBox span[data-v-464c5484] {\n  font-size: 14px;\n  color: #606266;\n  margin-right: 10px;\n  min-width: 100px;\n  text-align: right;\n}\n.conditionCont .conditionBox .el-select[data-v-464c5484] {\n  margin-right: 10px;\n}\n.conditionCont .conditionBox .el-date-editor[data-v-464c5484] {\n  margin-right: 10px;\n}\n.conditionChoose[data-v-464c5484] {\n  font-size: 14px;\n  color: #444 !important;\n}\n.conditionChoose[data-v-464c5484]::before {\n  content: \'\';\n  border-left: 2px solid #03adf4;\n  margin-right: 4px;\n}\n.conditionList[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.conditionList .conditionBox[data-v-464c5484] {\n  border: 1px solid #33B3EE;\n  font-size: 12px;\n  color: #33B3EE;\n  padding: 5px;\n  margin-right: 10px;\n}\n.conditRig[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.conditRig img[data-v-464c5484] {\n  width: 20%;\n}\n.conditRig span[data-v-464c5484] {\n  cursor: pointer;\n  font-size: 14px;\n  color: #33B3EE;\n  white-space: nowrap;\n  margin-left: 5px;\n}\n.projectList .projectBox[data-v-464c5484] {\n  padding: 10px;\n  background: #EFFAFF;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.projectList .projectBox[data-v-464c5484]:hover {\n  background: #CDEEFF;\n}\n.projectList .projectBox .projectLeft[data-v-464c5484] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-right: 15px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.projectList .projectBox .projectLeft .proNum[data-v-464c5484] {\n  width: 20px;\n  height: 20px;\n  background: #FE95B2;\n  border-radius: 100%;\n  color: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-right: 10px;\n}\n.projectList .projectBox .projectLeft .projectMsg[data-v-464c5484] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.projectList .projectBox .projectLeft .projectMsg .paymentCont[data-v-464c5484] {\n  background: rgba(173, 164, 249, 0.3);\n  padding: 10px 20px;\n  margin-top: 10px;\n}\n.projectList .projectBox .projectLeft .projectMsg .paymentCont h4[data-v-464c5484] {\n  margin-bottom: 10px;\n}\n.projectList .projectBox .projectLeft .projectMsg .paymentCont .payNum[data-v-464c5484] {\n  width: 15px;\n  height: 15px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  background: #009dff;\n  border-radius: 100%;\n  color: #fff;\n  font-size: 12px;\n  margin-right: 10px;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackLeft[data-v-464c5484] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 20px;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackLeft h4[data-v-464c5484] {\n  width: 45%;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackRig span[data-v-464c5484] {\n  color: #5883ff;\n  margin-right: 10px;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackRig .payBlue[data-v-464c5484] {\n  color: #05aaff;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackRig .payZhi[data-v-464c5484] {\n  color: #6e6df9;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox .projectBackRig .payRed[data-v-464c5484] {\n  color: #ff5d65;\n}\n.projectList .projectBox .projectLeft .projectMsg .leftBox h4[data-v-464c5484] {\n  font-size: 12px;\n  font-weight: normal;\n  width: 20%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n  margin-right: 10px;\n}\n.projectList .projectBox .projectRig span[data-v-464c5484] {\n  color: #5883ff;\n  font-size: 12px;\n  margin-left: 10px;\n  display: table;\n}\n.noMore[data-v-464c5484] {\n  text-align: center;\n  padding: 20px 0;\n}\n[data-v-464c5484] .el-dialog__header {\n  background: #05AAFF;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n[data-v-464c5484] .el-dialog__header /deep/ .el-dialog__title {\n  color: #fff;\n  font-size: 16px;\n}\n[data-v-464c5484] .el-dialog__header /deep/ .el-dialog__headerbtn {\n  border-radius: 50%;\n  background: #fff;\n  padding: 4px;\n  font-size: 12px;\n  font-weight: 400;\n}\n[data-v-464c5484] .el-dialog__header /deep/ .el-dialog__headerbtn /deep/ .el-dialog__close {\n  color: #05AAFF;\n}\n[data-v-464c5484] .el-dialog__footer {\n  text-align: center;\n}\n[data-v-464c5484] .el-dialog__footer /deep/ .el-button {\n  border-radius: 2px;\n  height: 36px;\n  line-height: 36px;\n  padding: 0 20px;\n}\ninput[type="checkbox"][data-v-464c5484] {\n  width: 15px;\n  height: 15px;\n  display: inline-block;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 15px;\n  position: relative;\n}\ninput[type="checkbox"][data-v-464c5484]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #d9d9d9;\n}\ninput[type="checkbox"][data-v-464c5484]:checked::before {\n  content: "\\2713";\n  background-color: #05AAFF;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border: 1px solid #05AAFF;\n  color: #ffffff;\n  font-size: 15px;\n  font-weight: bold;\n}\n.conditionClear[data-v-464c5484] {\n  border: 1px solid #ff0000;\n  font-size: 12px;\n  color: #ff0000;\n  padding: 5px;\n  cursor: pointer;\n}\n.hoverCursor[data-v-464c5484] {\n  vertical-align: middle;\n  margin-left: 3px;\n  cursor: pointer;\n}\n[data-v-464c5484] .el-date-editor .el-range-separator {\n  padding: 0;\n}\n.noRead[data-v-464c5484] {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  background: red;\n  border-radius: 100%;\n  color: #fff;\n  z-index: 9;\n  display: inline-block;\n  text-align: center;\n  line-height: 16px;\n}\n.fontOrange[data-v-464c5484] {\n  color: orange;\n}\n',""])},gHwX:function(t,e,a){var n=a("7UzA");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("759430a0",n,!0)},oqT8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),o=a.n(n),i=a("Q5rI"),s=a("5ybE"),c=a("c8+v"),r=a("rN1C"),l=a("jlNU"),d=a("gu65"),p=a("l8D1"),h={data:function(){return{btnFlag:0,contractName:"",moreCondition:!1,checkList:[],department:"",departmentList:[{dictName:"部门1",dictId:1},{dictName:"部门2",dictId:2},{dictName:"部门3",dictId:3}],contractList:[],contractTotalCount:0,orderTotalCount:0,level:3,parentId:0,provinceList:[],cityList:[],districtList:[],townList:[],contractForm:{page:0,pageSize:20},showPaymentState:"",showContractState:"",signingDate:[],availableDate:[],approvalDate:[],planPaymentDate:[],paymentDate:[],fileList:[],planBackVisible:!1,planBackForm:{},editPersonVisible:!1,editPersonForm:{userId:""},planBackRules:{approvalMoney:[{required:!0,message:"请输入项目立项批准金额",trigger:"change"}],paymentLevel:[{required:!0,message:"请选择财政级别",trigger:"change"}],paymentType:[{required:!0,message:"请选择回款阶段",trigger:"change"}],paymentUserId:[{required:!0,message:"请选择收款人",trigger:"change"}],paymentDate:[{required:!0,message:"请选择回款日期",trigger:"change"}],paymentAmount:[{required:!0,message:"请输入回款金额",trigger:"change"}]},selectConditionsList:{},sortId:"",sortList:[{label:"签约日期倒序",value:"c.signDate",key:"DESC",id:1},{label:"签约日期顺序",value:"c.signDate",key:"ASC",id:2}],projectLevelList:[{label:"国家级",value:1},{label:"省级",value:2},{label:"市级",value:3},{label:"区县级",value:4},{label:"镇街级",value:5}],paymentLevelList:[{label:"国家级",value:1},{label:"省级",value:2},{label:"市级",value:3},{label:"区县级",value:4},{label:"镇街级",value:5}],contractStateList:[{label:"履行中",value:0},{label:"解约",value:1},{label:"作废",value:2},{label:"终止",value:3},{label:"已完成",value:-1}],pickerOptions:{shortcuts:[{text:"昨天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.setTime(e.getTime()-864e5),t.$emit("pick",[a,e])}},{text:"今天",onClick:function(t){var e=new Date,a=new Date;t.$emit("pick",[a,e])}},{text:"上周",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5);var a=e.getDay(),n=new Date,o=new Date;0==a?(n.setDate(e.getDate()),o.setDate(e.getDate()+6)):(n.setTime(e.getTime()-864e5*a),o.setTime(e.getTime()+864e5*(6-a))),t.$emit("pick",[n,o])}},{text:"本周",onClick:function(t){var e=new Date,a=new Date,n=a.getDay(),o=a.getDate();0!=n&&a.setDate(o-n),t.$emit("pick",[a,e])}}]},total:0,deptmentList:[],userList:[],projectPersonList:[],auditPersonList:[],companyLevelList:[],projectForm:{page:0,pageSize:20,orderField:"sales",orderType:"DESC"},projectList:[],loading:!1,picBackgroundList:["#FE95B2","#9BB5FF","#69CCFF","#91E5A1","#FFCBA6"],payMethods:[],allowGetList:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:LIST"),allowChooseCompany:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:COMPANY:LIST"),allowSignCompany:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:SIGNCOMPANY:LIST"),allowChannelCompany:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:CHANNELCOMPANY:LIST"),allowGetCompanyNumber:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:GENERATE:NUMBER"),allowGetProjectList:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:PROJECT:QUERYLIST"),allowAdd:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:INSERT"),allowDeleteOrder:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:ORDER:DELETE"),allowDelete:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:DELETE"),allowUpdate:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:UPDATE"),allowExport:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:MANAGE:CONTRACT:EXPORT"),allowChangePerson:this.authorityControl("SYSTEM:CONTRACT:MANAGE","SYSTEM:CONTRACT:MANAGE:LIST","SYSTEM:CONTRACT:MANAGE:BATCHEDITCONTRACTSIGNUSER"),allowGetDeptList:this.authorityControl("SYSTEM:BACKGROUND:MANAGE","SYSTEM:DEPT:MANAGE","SYSTEM:DEPT:LIST")}},directives:{loadMore:{bind:function(t,e){t.querySelector(".el-select-dropdown .el-select-dropdown__wrap").addEventListener("scroll",function(){this.scrollHeight-this.scrollTop<=this.clientHeight&&e.value()})}}},activated:function(){if(""==localStorage.getItem("searchName")&&(this.contractForm={page:0,pageSize:20},this.selectConditionsList={},this.$set(this.contractForm,"companyName",localStorage.getItem("searchName"))),localStorage.getItem("searchName")&&""!==localStorage.getItem("searchName")&&(this.contractForm={page:0,pageSize:20},this.selectConditionsList={},this.$set(this.contractForm,"companyName",localStorage.getItem("searchName"))),localStorage.getItem("orderParams")&&""!==localStorage.getItem("orderParams")){var t=JSON.parse(localStorage.getItem("orderParams"));this.contractForm={page:0,pageSize:20},this.selectConditionsList={},this.contractForm.contractIds=t.arr,this.$set(this.contractForm,"companyName",""),9===t.num&&this.$set(this.selectConditionsList,"contractIds","其他 - 回款待审核")}window.addEventListener("scroll",this.scrollToTop),0!=this.$store.getters.contractPage?(this.contractForm.page=0,this.contractForm.pageSize=this.$store.getters.contractPage+20,this.getContractList()):(this.contractForm.page=this.$store.getters.contractPage,this.contractForm.pageSize=20,this.getContractList()),this.$nextTick(function(){var t=this.$store.getters.contractScroll;document.documentElement.scrollTop=document.body.scrollTop=t})},destroyed:function(){clearInterval(this.timer),window.removeEventListener("scroll",this.scrollToTop)},deactivated:function(){localStorage.removeItem("searchName"),localStorage.removeItem("orderParams")},beforeRouteLeave:function(t,e,a){var n=document.documentElement.scrollTop;this.$store.commit("SET_CONTRACT_SCROLL",n),this.$store.commit("SET_CONTRACT_PAGE",this.contractForm.page),a()},methods:{backTop:function(){var t=this,e=setInterval(function(){var a=Math.floor(-t.scrollTop/5);document.documentElement.scrollTop=document.body.scrollTop=t.scrollTop+a,0===t.scrollTop&&clearInterval(e)},16)},scrollToTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,this.scrollTop>0?this.btnFlag=!0:this.btnFlag=!1},getCompanyList:function(){var t=this;Object(s.f)({}).then(function(e){200==e.code?t.deptmentList=e.data.deptInfoTreeVos:t.$message.warning(e.message)})},getPersonList:function(t,e){var a=this,n=new FormData;n.append("roleNameList",t),void 0!=e&&n.append("deptIdList",e),Object(c.E)(n).then(function(e){200==e.code?("项目主管,项目员,专利主管,专利员,审计员"==t&&(a.projectPersonList=e.data),"业务员,业务主管"==t&&(a.userList=e.data)):a.$message.warning(e.message)})},getCommonData:function(){var t=this;Object(i.d)({keyList:"DICT:CUSTOMER_LEVEL"}).then(function(e){200==e.code?t.companyLevelList=e.data["DICT:CUSTOMER_LEVEL"]:t.$message({type:"error",message:e.message})})},openCond:function(){this.moreCondition=!this.moreCondition,this.userList=[],this.getRegionList(),this.getCompanyList(),this.getCommonData(),this.getProjectList(),this.getPersonList("项目主管,项目员,专利主管,专利员,审计员"),this.getPersonList("业务员,业务主管")},getRegionList:function(){var t=this;void 0!=this.level&&null!=this.level||(this.level=3),void 0!=this.parentId&&""!=this.parentId||(this.level=3,this.parentId=0);var e={level:this.level,parentId:this.parentId};Object(i.f)(e).then(function(e){200==e.code?(3==t.level&&(t.provinceList=e.data),2==t.level&&(t.cityList=e.data),1==t.level&&(t.districtList=e.data),0==t.level&&(t.townList=e.data)):t.$message({type:"error",message:e.message})})},goAddContract:function(){this.$router.push({path:"/contract/addContract"})},getContractList:function(){var t=this;this.allowGetList.twoAllow?Object(p.m)(this.contractForm).then(function(e){if(200==e.code){var a=e.data.data,n=[],o=[],i=void 0;for(i=0;i<a.length;)o.push(a.slice(i,i+=5));o.forEach(function(e){e.forEach(function(e,a){t.picBackgroundList.forEach(function(t,n){a===n&&(e.bgColor=t)})})}),o.forEach(function(t){t.forEach(function(t){n.push(t)})}),t.contractForm.page>0?(t.contractList=t.contractList.concat(n),t.total=e.data.total):(t.contractList=n,t.total=e.data.total,t.checkList=[],0!=t.$store.getters.contractPage&&(t.contractForm.page=t.$store.getters.contractPage,t.contractForm.pageSize=20)),t.contractList.length>0?t.contractTotalCount=t.contractList[0].contractTotalCount:t.contractTotalCount=0,t.contractList.length>0?t.orderTotalCount=t.contractList[0].orderTotalCount:t.orderTotalCount=0,t.contractList.forEach(function(e){e.crmContractVoList.forEach(function(e){e.signUserId==t.$store.getters.userId?t.$set(e,"isOneself",1):t.$set(e,"isOneself",0)})});var s={};t.contractList=t.contractList.reduce(function(t,e){return!s[e.companyIdMain]&&(s[e.companyIdMain]=t.push(e)),t},[])}else t.$message.warning(e.message)}):this.$message.warning("抱歉，您没有权限获取此列表")},goSearch:function(){this.contractForm.page=0,this.getContractList()},goCheckContract:function(t,e){this.$router.push({path:"/contract/checkContract",query:{contractId:t,isCheck:!0,isOneself:e}})},goEditContract:function(t,e){this.$router.push({path:"/contract/checkContract",query:{contractId:t,isOneself:e}}),this.cancelBubble()},allDelete:function(){var t=this;if(this.checkList.length<1)this.$message.error("至少勾选一个合同");else{var e=[];this.checkList.forEach(function(t){e.push(t.contractId)}),this.contractList.forEach(function(a){a.crmContractVoList.forEach(function(a){e.forEach(function(e){if(e==a.contractId&&0==a.isOneself)throw t.$message.warning("包含不是您签订的合同，无法删除，请检查"),new Error})})}),this.$confirm("删除合同会把所有关联订单信息都删除，是否确定删除合同","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=new FormData;a.append("contractIds",e),Object(p.a)(a).then(function(e){200==e.code?(t.$message.success("删除成功！"),t.checkList=[],t.contractForm.page=0,t.getContractList(),t.contractList.forEach(function(e){e.crmContractVoList.forEach(function(e){t.$set(e,"check",!1)})})):t.$message.warning(e.message)})})}},handledSelect:function(t){var e=this;this.contractForm.orderType="",this.contractForm.orderField="",this.sortList.forEach(function(a){t==a.id&&(e.contractForm.orderType=a.key,e.contractForm.orderField=a.value)}),this.contractForm.page=0,this.getContractList()},deptmentChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.deptmentList.forEach(function(e){e.deptId==t&&a.push(e.deptName)});var n=a.join("，");e.$set(e.selectConditionsList,"deptIds","部门 - "+n)}):(this.$delete(this.selectConditionsList,"deptIds"),this.$delete(this.selectConditionsList,"signUserIds"),this.userList=[]),this.getPersonList("业务员,业务主管",t),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},signUserChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.userList.forEach(function(e){e.userId==t&&a.push(e.userName)});var n=a.join("，");e.$set(e.selectConditionsList,"signUserIds","签订人 - "+n)}):this.$delete(this.selectConditionsList,"signUserIds"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},signDateChange:function(t){t?(this.$set(this.selectConditionsList,"signDate","签约日期 - "+t[0]+"-"+t[1]),this.contractForm.signDateStart=t[0],this.contractForm.signDateEnd=t[1]):(this.$delete(this.selectConditionsList,"signDate"),this.contractForm.signDateStart="",this.contractForm.signDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},availableDateChange:function(t){t?(this.$set(this.selectConditionsList,"availableDate","到期日期 - "+t[0]+"-"+t[1]),this.contractForm.availableDateStart=t[0],this.contractForm.availableDateEnd=t[1]):(this.$delete(this.selectConditionsList,"availableDate"),this.contractForm.availableDateStart="",this.contractForm.availableDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},approvalDateChange:function(t){t?(this.$set(this.selectConditionsList,"approvalDate","立项日期 - "+t[0]+"-"+t[1]),this.contractForm.approvalDateStart=t[0],this.contractForm.approvalDateEnd=t[1]):(this.$delete(this.selectConditionsList,"approvalDate"),this.contractForm.approvalDateStart="",this.contractForm.approvalDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},planPaymentDateChange:function(t){t?(this.$set(this.selectConditionsList,"planPaymentDate","计划回款日期 - "+t[0]+"-"+t[1]),this.contractForm.planPaymentDateStart=t[0],this.contractForm.planPaymentDateEnd=t[1]):(this.$delete(this.selectConditionsList,"planPaymentDate"),this.contractForm.planPaymentDateStart="",this.contractForm.planPaymentDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},paymentDateChange:function(t){t?(this.$set(this.selectConditionsList,"paymentDate","回款日期 - "+t[0]+"-"+t[1]),this.contractForm.paymentDateStart=t[0],this.contractForm.paymentDateEnd=t[1]):(this.$delete(this.selectConditionsList,"paymentDate"),this.contractForm.paymentDateStart="",this.contractForm.paymentDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},paymentStateChange:function(t){var e=2==t?"未回款":3==t?"未完全回款":4==t?"已完全回款":"-";0!==t&&""==t?this.$delete(this.selectConditionsList,"paymentState"):this.$set(this.selectConditionsList,"paymentState","回款状态 - "+e),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},signDateStartChange:function(t){t?this.$set(this.selectConditionsList,"signDateStart","签订开始时间 - "+t):this.$delete(this.selectConditionsList,"signDateStart"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},signDateEndChange:function(t){t?this.$set(this.selectConditionsList,"signDateEnd","签订结束时间 - "+t):this.$delete(this.selectConditionsList,"signDateEnd"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},contractStateChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.contractStateList.forEach(function(e){e.value==t&&a.push(e.label)});var n=a.join("，");e.$set(e.selectConditionsList,"contractStates","履行状态 - "+n)}):this.$delete(this.selectConditionsList,"contractStates"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},projectChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.projectList.forEach(function(e){e.projectId==t&&a.push(e.projectName)});var n=a.join("，");e.$set(e.selectConditionsList,"projectIds","项目 - "+n)}):this.$delete(this.selectConditionsList,"projectIds"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},projectYearChange:function(t){t?this.$set(this.selectConditionsList,"projectYear","项目年度 - "+t):this.$delete(this.selectConditionsList,"projectYear"),this.contractForm.page=0,this.contractList=[],this.getContractList()},projectLevelChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.projectLevelList.forEach(function(e){e.value==t&&a.push(e.label)});var n=a.join("，");e.$set(e.selectConditionsList,"areaLevels","项目级别 - "+n)}):this.$delete(this.selectConditionsList,"areaLevels"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},engineerUser:function(t){var e=this,a=[];0!=t.length?this.projectPersonList.forEach(function(n){t.forEach(function(t){if(n.userId==t){a.push(n.userName);var o=a.join("，");e.$set(e.selectConditionsList,"projectPersonnelIdList","项目工程师 - "+o)}})}):this.$delete(this.selectConditionsList,"projectPersonnelIdList"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},auditUserChange:function(t){var e=this,a=[];0!=t.length?this.auditPersonList.forEach(function(n){t.forEach(function(t){if(n.userId==t){a.push(n.userName);var o=a.join("，");e.$set(e.selectConditionsList,"auditorId","审计人员 - "+o)}})}):this.$delete(this.selectConditionsList,"auditorId"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},provinceChange:function(t){t?this.$set(this.selectConditionsList,"provinceId","省份 - "+this.provinceList.find(function(e){return e.dictId===t}).dictName):this.$delete(this.selectConditionsList,"provinceId"),this.$delete(this.selectConditionsList,"cityId"),this.$delete(this.selectConditionsList,"districtId"),this.$delete(this.selectConditionsList,"townId"),this.contractForm.cityId="",this.contractForm.districtId="",this.contractForm.townId="",this.parentId=t,this.level=2,this.getRegionList(),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},cityChange:function(t){t?this.$set(this.selectConditionsList,"cityId","城市 - "+this.cityList.find(function(e){return e.dictId===t}).dictName):this.$delete(this.selectConditionsList,"cityId"),this.$delete(this.selectConditionsList,"districtId"),this.$delete(this.selectConditionsList,"townId"),this.contractForm.districtId="",this.contractForm.townId="",this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.parentId=t,this.level=1,this.getRegionList(),this.getContractList()},districtChange:function(t){t?(this.$set(this.selectConditionsList,"districtId","区县 - "+this.districtList.find(function(e){return e.dictId===t}).dictName),this.$delete(this.selectConditionsList,"townId")):(this.$delete(this.selectConditionsList,"districtId"),this.$delete(this.selectConditionsList,"townId")),this.contractForm.townId="",this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.parentId=t,this.level=0,this.getRegionList(),this.getContractList()},townChange:function(t){t?this.$set(this.selectConditionsList,"townId","镇街 - "+this.townList.find(function(e){return e.dictId===t}).dictName):this.$delete(this.selectConditionsList,"townId"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},newOldChange:function(t){var e="0"==t?"新客户":"1"==t?"老客户":void 0;void 0!=e?this.$set(this.selectConditionsList,"newOrOld","新老客户 - "+e):this.$delete(this.selectConditionsList,"newOrOld"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},companyLevelChange:function(t){var e=this,a=[];0!=t.length?t.forEach(function(t){e.companyLevelList.forEach(function(e){e.dictId==t&&a.push(e.dictName)});var n=a.join("，");e.$set(e.selectConditionsList,"companyLevels","客户级别 - "+n)}):this.$delete(this.selectConditionsList,"companyLevels"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},channelChange:function(t){var e="0"==t?"不是":"1"==t?"是":void 0;void 0!=e?this.$set(this.selectConditionsList,"isChannel","是否渠道商 - "+e):this.$delete(this.selectConditionsList,"isChannel"),this.contractForm.page=0,this.contractForm.pageSize=20,this.contractList=[],this.getContractList()},getProjectList:function(t){var e=this;this.allowGetProjectList.twoAllow?(this.projectForm.projectName=t||"",Object(r.e)(this.projectForm).then(function(t){200==t.code?e.projectForm.page>0?e.projectList=e.projectList.concat(t.data.data):e.projectList=t.data.data:e.$message.warning(t.message)})):this.$message.warning("抱歉，您没有权限获取项目列表")},projectListMethod:function(t){var e=this;this.projectForm.page=0,""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,e.getProjectList(t)},200)):(this.loading=!0,setTimeout(function(){e.loading=!1,e.getProjectList()},200))},loadMore:function(){this.projectForm.page=this.projectForm.page+20,this.getProjectList()},deleteOneClick:function(t){this.contractList=[],this.$delete(this.selectConditionsList,t),this.$delete(this.contractForm,t),"deptIds"==t&&this.getPersonList("业务员,业务主管"),"signDate"==t&&(this.signingDate=[],this.contractForm.signDateStart="",this.contractForm.signDateEnd=""),"availableDate"==t&&(this.availableDate=[],this.contractForm.availableDateStart="",this.contractForm.availableDateEnd=""),"approvalDate"==t&&(this.approvalDate=[],this.contractForm.approvalDateStart="",this.contractForm.approvalDateEnd=""),"planPaymentDate"==t&&(this.planPaymentDate=[],this.contractForm.planPaymentDateStart="",this.contractForm.planPaymentDateEnd=""),"paymentDate"==t&&(this.paymentDate=[],this.contractForm.paymentDateStart="",this.contractForm.paymentDateEnd=""),this.contractForm.page=0,this.contractForm.pageSize=20,this.getContractList()},deleteAllClick:function(){this.contractList=[],this.getPersonList("业务员,业务主管"),this.selectConditionsList={},this.signingDate=[],this.contractForm.signDateStart="",this.contractForm.signDateEnd="",this.availableDate=[],this.contractForm.availableDateStart="",this.contractForm.availableDateEnd="",this.approvalDate=[],this.contractForm.approvalDateStart="",this.contractForm.approvalDateEnd="",this.planPaymentDate=[],this.contractForm.planPaymentDateStart="",this.contractForm.planPaymentDateEnd="",this.paymentDate=[],this.contractForm.paymentDateStart="",this.contractForm.paymentDateEnd="",this.contractForm={},this.contractForm.page=0,this.contractForm.pageSize=20,this.getContractList()},getMore:function(){this.contractForm.page=this.contractForm.page+20,this.getContractList()},goOrderDetail:function(t){this.$router.push({path:"/declareCoordination/orderManage/orderDetail",query:{orderId:t,isCheck:!0}}),this.cancelBubble()},checkContractChange:function(t,e){var a=this;if(1!=t)this.checkList.forEach(function(t,n){e.contractId==t.contractId&&a.checkList.splice(n,1)});else{this.checkList.push(e);var n={};this.checkList=this.checkList.reduce(function(t,e){return!n[e.contractId]&&(n[e.contractId]=t.push(e)),t},[])}},checkAllOrNo:function(){if(this.isCheckAll){this.checkList=[];var t=this;this.contractList.forEach(function(e,a){e.crmContractVoList.forEach(function(e){t.$set(e,"check",!1)})}),this.isCheckAll=!1}else{t=this;this.contractList.forEach(function(e,a){e.crmContractVoList.forEach(function(e){-1===t.checkList.indexOf(e)&&(t.checkList.push(e),t.$set(e,"check",!0))}),t.isCheckAll=!0})}},editPersonOpen:function(){var t=this;this.checkList.length<1?this.$message.error("至少勾选一个合同"):(this.contractList.forEach(function(e){t.checkList.forEach(function(a){if(a==e.contractId&&0==e.isOneself)throw t.$message.warning("包含不是您签订的合同，无法修改，请检查"),new Error})}),this.editPersonForm.userId="",this.editPersonForm.contractIds=this.checkList,this.getPersonList("业务员,业务主管"),this.editPersonVisible=!0)},savePerson:function(){var t=this;if(""!=this.editPersonForm.userId&&void 0!=this.editPersonForm.userId){var e=[];this.editPersonForm.contractIds.forEach(function(t){e.push(t.contractId)});var a=new FormData;a.append("contractIds",e),a.append("userId",this.editPersonForm.userId),Object(p.b)(a).then(function(e){200==e.code?(t.$message.success("修改成功！"),t.checkList=[],t.editPersonVisible=!1,t.contractForm.page=0,t.getContractList(),t.editPersonForm={userId:""}):t.$message.warning(e.message)})}else this.$message.warning("请选择签订人")},exportList:function(){var t=this,e=[];this.checkList.forEach(function(t){e.push(t.contractId)}),this.contractForm.page=0,this.contractForm.pageSize=this.total,this.contractForm.contractIds=e,Object(p.k)(this.contractForm).then(function(e){200===e.code&&Object(i.g)({fileName:e.message,delete:!0}).then(function(e){t.contractForm.contractIds=[];var a=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n);var o=(new Date).getFullYear()+""+((new Date).getMonth()+1)+(new Date).getDate()+(new Date).getHours()+(new Date).getMinutes()+(new Date).getSeconds()+"-合同列表.xlsx";n.href=a,n.download=o,n.click(),window.URL.revokeObjectURL(a),t.$message({type:"success",message:"操作成功！"})})})},goProject:function(t){this.$router.push({path:"/policy/project/detail",query:{id:t,check:!0}})},goCompany:function(t,e){3!=t.relevanceCompanyExist?this.$router.push({path:"/customer/editCustomer",query:{id:e,check:!1,isContractListSkipFlag:1}}):this.$message.warning("该企业不存在，无法跳转")},showBackChange:function(t){this.getContractList()},openPlanBack:function(t,e){this.cancelBubble(),this.planBackForm={},this.planBackVisible=!0,this.planBackForm.companyId=t.companyId,this.planBackForm.companyName=t.companyName,this.planBackForm.projectName=e.projectName,this.planBackForm.contractId=t.contractId,this.planBackForm.orderId=e.orderId,this.planBackForm.planId=e.planId,this.getPersonList("业务员,业务主管"),this.getPaymentData(e.orderId)},getPaymentData:function(t){var e=this,a={options:[]},n={options:[]};this.payMethods=[],Object(p.q)({orderId:t}).then(function(t){200===t.code&&(t.data.forEach(function(t){t.paymentModeType?(a.lable="历史回款阶段",a.options.push(t),e.payMethods.push(a)):(n.lable="",n.options.push(t))}),e.payMethods.push(n))})},cancelBubble:function(t){var e=t||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},cancelPlanBack:function(){this.planBackVisible=!1,this.planBackForm={},this.fileList=[],this.$refs.planBackForm.resetFields()},savePlanBack:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return!1;Object(p.w)(e.planBackForm).then(function(a){200==a.code&&(e.planBackVisible=!1,e.$refs[t].resetFields(),e.$message.success("新建成功"),e.planBackForm={},e.fileList=[],e.contractForm.page=0,e.getContractList())})})},deletePayRecord:function(t){var e=this;this.$confirm("是否确定删除记录","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.j)({recordId:t}).then(function(t){200==t.code&&(e.$message.success("删除成功"),e.contractForm.page=0,e.getContractList())})}),this.cancelBubble()},checkPayment:function(t){this.$router.push({path:"/contract/paymentRecordDetail",query:{recordId:t}}),this.cancelBubble()},goPaymentDetail:function(t){this.$router.push({path:"/contract/paymentRecordDetail",query:{isCheck:!0,recordId:t}}),this.cancelBubble()},inputXz:function(t){t.target.value.indexOf(".")>-1&&(this.planBackForm.approvalMoney=t.target.value.slice(0,t.target.value.indexOf(".")+3))},inputXzPayment:function(t){t.target.value.indexOf(".")>-1&&(this.planBackForm.paymentAmount=t.target.value.slice(0,t.target.value.indexOf(".")+3))},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},uploadBeforeFile:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<100;return a||this.$message.error("上传文件大小不能超过 100MB!"),e||this.$message.error("上传头像图片只能是 JPG或者png 格式!"),e&&a},handleUpload:function(t){var e=this;if(t.file.name.length>=150)return this.$message.error("文件名称超长，请检查"),void(this.fileList=JSON.parse(o()(this.fileList)));var a=t.file.name.split("."),n=Object(d.j)(this.planBackForm.companyName,this.planBackForm.projectName,"其他资料",a[0])+"."+a[a.length-1];Object(l.a)(n,t.file,t).then(function(o){if(o){var s=[],c={fileName:t.file.name,filePath:n,fileSize:t.file.size,fileType:a[a.length-1],parentType:4};s.push(c);var r={companyId:e.planBackForm.companyId,companyName:e.planBackForm.companyName,addFileDtos:s,haveView:!0};Object(i.a)(r).then(function(t){200==t.code&&(e.$message.success("上传成功"),e.$set(e.planBackForm,"basisFileIds",t.data[0].fileId),e.$set(e.planBackForm,"fileIds",t.data[0].fileId),e.$set(e.planBackForm,"fileName",t.data[0].fileName),e.$set(e.planBackForm,"fileUrl",t.data[0].fileUrl))})}})},downFileHandle:function(t){var e=this;if(t.fileId||this.annexList.forEach(function(e){e.fileName==t.name&&(t=e)}),t.fileId){var a={companyId:this.$store.getters.companyId,fileId:t.fileId};Object(c.q)(a).then(function(t){if(200==t.code){var a=t.data.replace(/http/,"https");window.open(a),e.$message({type:"success",message:"下载成功"})}else e.$message({type:"error",message:t.message})})}}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"row-width-auto-margin-0-90"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"searchCont"},[n("el-input",{attrs:{placeholder:"请输入企业名称/项目名称/合同编号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.contractForm.companyName,callback:function(e){t.$set(t.contractForm,"companyName","string"==typeof e?e.trim():e)},expression:"contractForm.companyName"}}),t._v(" "),n("el-button",{staticClass:"btn bt_blue",attrs:{type:"primary"},on:{click:t.goSearch}},[n("span",{staticClass:"bt_font"},[t._v("搜一下")])]),t._v(" "),t.allowAdd.twoAllow?n("el-button",{staticClass:"btn bt_blue addBtn",attrs:{type:"primary"},on:{click:t.goAddContract}},[n("span",{staticClass:"bt_font"},[t._v("+新增")])]):t._e()],1)]),t._v(" "),n("el-card",{staticClass:"box-card cardCont"},[n("div",{staticClass:"headerTop",attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"headerLeft"},[n("span",{staticClass:"conditionChoose"},[t._v("已选条件:")]),t._v(" "),n("div",{staticClass:"conditionList"},[t._l(t.selectConditionsList,function(e,o){return n("div",{staticClass:"conditionBox"},[t._v("\n                "+t._s(e)),n("img",{staticClass:"hoverCursor",attrs:{src:a("cFCn")},on:{click:function(e){return t.deleteOneClick(o)}}})])}),t._v(" "),Object.keys(t.selectConditionsList).length>1?n("div",{staticClass:"conditionClear",on:{click:t.deleteAllClick}},[t._v("\n                清空所有\n              ")]):t._e()],2)]),t._v(" "),n("div",{staticClass:"headerRig conditRig",on:{click:t.openCond}},[t.moreCondition?n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("8DMi")}}):n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("RU3k")}}),t._v(" "),n("span",[t._v("选择筛选条件")])])]),t._v(" "),t.moreCondition?n("div",{staticClass:"conditionCont"},[n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("常用：")]),t._v(" "),t.allowGetDeptList.twoAllow?n("el-select",{attrs:{size:"small",multiple:"",placeholder:"选择部门",clearable:""},on:{change:t.deptmentChange},model:{value:t.contractForm.deptIds,callback:function(e){t.$set(t.contractForm,"deptIds",e)},expression:"contractForm.deptIds"}},t._l(t.deptmentList,function(t){return n("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})}),1):t._e(),t._v(" "),n("el-select",{attrs:{size:"small",filterable:"",placeholder:"选择签订人",clearable:"",multiple:""},on:{change:t.signUserChange},model:{value:t.contractForm.signUserIds,callback:function(e){t.$set(t.contractForm,"signUserIds",e)},expression:"contractForm.signUserIds"}},t._l(t.userList,function(t){return n("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})}),1),t._v(" "),n("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"签订开始时间"},on:{change:t.signDateStartChange},model:{value:t.contractForm.signDateStart,callback:function(e){t.$set(t.contractForm,"signDateStart",e)},expression:"contractForm.signDateStart"}}),t._v(" "),n("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"签订结束时间"},on:{change:t.signDateEndChange},model:{value:t.contractForm.signDateEnd,callback:function(e){t.$set(t.contractForm,"signDateEnd",e)},expression:"contractForm.signDateEnd"}}),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"履行状态",clearable:"",multiple:""},on:{change:t.contractStateChange},model:{value:t.contractForm.contractStates,callback:function(e){t.$set(t.contractForm,"contractStates",e)},expression:"contractForm.contractStates"}},t._l(t.contractStateList,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("项目：")]),t._v(" "),n("el-select",{directives:[{name:"loadMore",rawName:"v-loadMore",value:t.loadMore,expression:"loadMore"}],staticClass:"inline-block float-left",staticStyle:{width:"350px"},attrs:{remote:"","remote-method":t.projectListMethod,multiple:"",size:"mini",filterable:"",loading:t.loading,clearable:"",placeholder:"项目名称"},on:{change:t.projectChange},model:{value:t.contractForm.projectIds,callback:function(e){t.$set(t.contractForm,"projectIds",e)},expression:"contractForm.projectIds"}},t._l(t.projectList,function(t){return n("el-option",{key:t.projectId,attrs:{label:t.projectName,value:t.projectId}})}),1),t._v(" "),n("el-date-picker",{attrs:{clearable:"",size:"small",type:"year","value-format":"yyyy",placeholder:"项目年度"},on:{change:t.projectYearChange},model:{value:t.contractForm.projectYear,callback:function(e){t.$set(t.contractForm,"projectYear",e)},expression:"contractForm.projectYear"}}),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"项目级别",clearable:"",multiple:""},on:{change:t.projectLevelChange},model:{value:t.contractForm.areaLevels,callback:function(e){t.$set(t.contractForm,"areaLevels",e)},expression:"contractForm.areaLevels"}},t._l(t.projectLevelList,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),n("el-select",{attrs:{filterable:"",size:"small",multiple:"",placeholder:"选择项目员",clearable:""},on:{change:t.engineerUser},model:{value:t.contractForm.projectPersonnelIdList,callback:function(e){t.$set(t.contractForm,"projectPersonnelIdList",e)},expression:"contractForm.projectPersonnelIdList"}},t._l(t.projectPersonList,function(t){return n("el-option",{key:t.userId,attrs:{label:t.userName+"-"+t.roleName,value:t.userId}})}),1)],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("地区：")]),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"省份",clearable:""},on:{change:t.provinceChange},model:{value:t.contractForm.provinceId,callback:function(e){t.$set(t.contractForm,"provinceId",e)},expression:"contractForm.provinceId"}},t._l(t.provinceList,function(t){return n("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictId}})}),1),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"城市",clearable:""},on:{change:t.cityChange},model:{value:t.contractForm.cityId,callback:function(e){t.$set(t.contractForm,"cityId",e)},expression:"contractForm.cityId"}},t._l(t.cityList,function(t){return n("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictId}})}),1),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"县区",clearable:""},on:{change:t.districtChange},model:{value:t.contractForm.districtId,callback:function(e){t.$set(t.contractForm,"districtId",e)},expression:"contractForm.districtId"}},t._l(t.districtList,function(t){return n("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictId}})}),1),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"镇街",clearable:""},on:{change:t.townChange},model:{value:t.contractForm.townId,callback:function(e){t.$set(t.contractForm,"townId",e)},expression:"contractForm.townId"}},t._l(t.townList,function(t){return n("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictId}})}),1)],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("性质：")]),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"新老客户",clearable:""},on:{change:t.newOldChange},model:{value:t.contractForm.newOrOld,callback:function(e){t.$set(t.contractForm,"newOrOld",e)},expression:"contractForm.newOrOld"}},[n("el-option",{attrs:{label:"新客户",value:0}}),t._v(" "),n("el-option",{attrs:{label:"老客户",value:1}})],1),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"客户级别",clearable:"",multiple:""},on:{change:t.companyLevelChange},model:{value:t.contractForm.companyLevels,callback:function(e){t.$set(t.contractForm,"companyLevels",e)},expression:"contractForm.companyLevels"}},t._l(t.companyLevelList,function(t){return n("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictId}})}),1),t._v(" "),n("el-select",{attrs:{size:"small",placeholder:"是否渠道",clearable:""},on:{change:t.channelChange},model:{value:t.contractForm.isChannel,callback:function(e){t.$set(t.contractForm,"isChannel",e)},expression:"contractForm.isChannel"}},[n("el-option",{attrs:{label:"不是",value:0}}),t._v(" "),n("el-option",{attrs:{label:"是",value:1}})],1)],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("到期日期：")]),t._v(" "),n("el-date-picker",{staticClass:"date-select",attrs:{type:"daterange",align:"left",size:"small","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},on:{change:t.availableDateChange},model:{value:t.availableDate,callback:function(e){t.availableDate=e},expression:"availableDate"}})],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("立项日期：")]),t._v(" "),n("el-date-picker",{staticClass:"date-select",attrs:{type:"daterange",align:"left",size:"small","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},on:{change:t.approvalDateChange},model:{value:t.approvalDate,callback:function(e){t.approvalDate=e},expression:"approvalDate"}})],1)])],1),t._v(" "),n("el-row",[n("el-col",[n("div",{staticClass:"conditionBox"},[n("span",[t._v("回款：")]),t._v(" "),n("el-date-picker",{staticClass:"date-select",attrs:{type:"daterange",align:"left",size:"small","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},on:{change:t.paymentDateChange},model:{value:t.paymentDate,callback:function(e){t.paymentDate=e},expression:"paymentDate"}}),t._v(" "),n("el-radio-group",{on:{change:t.paymentStateChange},model:{value:t.contractForm.paymentState,callback:function(e){t.$set(t.contractForm,"paymentState",e)},expression:"contractForm.paymentState"}},[n("el-radio",{attrs:{label:2}},[t._v("未回款")]),t._v(" "),n("el-radio",{attrs:{label:3}},[t._v("未完全回款")]),t._v(" "),n("el-radio",{attrs:{label:4}},[t._v("已完全回款")])],1)],1)])],1)],1):t._e()]),t._v(" "),n("el-card",{staticClass:"box-card cardCont"},[n("div",{staticClass:"headerTop",attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"headerLeft"},[n("span",[t._v("搜索到"),n("span",[t._v(t._s(t.total))]),t._v("个企业")]),t._v(" "),n("span",[t._v("合同数量: "+t._s(t.contractTotalCount))]),t._v(" "),n("span",[t._v("订单数量: "+t._s(t.orderTotalCount))]),t._v(" "),t.checkList.length>0?n("span",{staticStyle:{"margin-left":"10px"}},[t._v("已选中"),n("span",[t._v(t._s(t.checkList.length))]),t._v("条记录")]):t._e(),t._v(" "),n("div",{staticClass:"headBtn"},[n("el-button",{staticClass:"btn allChoose",attrs:{type:"primary",size:"small"},on:{click:t.checkAllOrNo}},[t._v("全选")]),t._v(" "),t.allowExport.twoAllow?n("el-button",{staticClass:"btn export",attrs:{type:"primary",size:"small"},on:{click:t.exportList}},[t._v("\n                导出\n              ")]):t._e(),t._v(" "),t.allowDelete.twoAllow?n("el-button",{staticClass:"btn allDelete",attrs:{size:"small"},on:{click:t.allDelete}},[t._v("删除\n              ")]):t._e(),t._v(" "),t.allowChangePerson.twoAllow?n("el-button",{staticClass:"btn originBtn",attrs:{size:"small"},on:{click:t.editPersonOpen}},[t._v("\n                修改签订人\n              ")]):t._e(),t._v(" "),n("el-checkbox",{attrs:{size:"small"},on:{change:t.showBackChange},model:{value:t.showPaymentState,callback:function(e){t.showPaymentState=e},expression:"showPaymentState"}},[t._v("显示回款记录")])],1)]),t._v(" "),n("div",{staticClass:"headerRig"},[n("el-select",{attrs:{placeholder:"默认排序",clearable:""},on:{change:t.handledSelect},model:{value:t.sortId,callback:function(e){t.sortId=e},expression:"sortId"}},t._l(t.sortList,function(t){return n("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],1)]),t._v(" "),n("div",{staticClass:"dataList"},t._l(t.contractList,function(e,o){return n("div",{key:o,staticClass:"dataBox"},[n("div",{staticClass:"dataBoxLeft"},[n("div",{staticClass:"dataLeft"},[n("div",{staticClass:"fileType fileDoc",style:"background:"+e.bgColor},[t._v("企业简称")]),t._v(" "),n("div",{staticClass:"dataDetail"},[n("div",{staticClass:"companyName"},[n("p",{staticStyle:{"margin-bottom":"16px",cursor:"pointer"},on:{click:function(a){return t.goCompany(e,e.companyIdMain)}}},[t._v("\n                        "+t._s(e.companyNameMain)+"\n                      ")])]),t._v(" "),t._l(e.crmContractVoList,function(e,o){return n("div",{key:e.contractId,staticClass:"contractlist"},[n("el-checkbox",{attrs:{label:e.contractId},on:{change:function(a){return t.checkContractChange(a,e)}},model:{value:e.check,callback:function(a){t.$set(e,"check",a)},expression:"item.check"}},[n("div",{staticClass:"contractlist"},[n("div",{staticClass:"contractBox"},[n("div",{staticClass:"dataMsg",on:{click:function(a){return t.goCheckContract(e.contractId,e.isOneself)}}},[n("span",[t._v("合同编号："+t._s(e.contractCode))]),t._v(" "),n("span",[t._v("创建时间："+t._s(e.createDate))]),t._v(" "),n("span",[t._v("有效期："+t._s(e.availableYear)+"年")])]),t._v(" "),n("div",{staticClass:"dataMsg",on:{click:function(a){return t.goCheckContract(e.contractId,e.isOneself)}}},[n("span",[t._v("签约公司："+t._s(0==e.signCompanyId?"其他":e.signCompanyName))]),t._v(" "),n("span",[t._v("签订日期："+t._s(e.signDate))]),t._v(" "),n("span",[t._v("签订人："+t._s(e.signUserName))]),t._v(" "),n("span",[t._v("履行状态：\n                                "),n("span",{class:-1==e.contractState?"fontOrange":""},[t._v("\n                                  "+t._s(-1==e.contractState?"已完成":0==e.contractState?"履行中":1==e.contractState?"解约":2==e.contractState?"作废":3==e.contractState?"终止":"")+"\n                                ")])])]),t._v(" "),n("div",{staticClass:"projectList"},t._l(e.orderVoList,function(a,o){return n("div",{staticClass:"projectBox",on:{click:function(e){return t.goOrderDetail(a.orderId)}}},[n("div",{staticClass:"projectLeft"},[n("span",{staticClass:"proNum"},[t._v(t._s(o+1))]),t._v(" "),n("div",{staticClass:"projectMsg"},[n("div",{staticClass:"leftBox",staticStyle:{"margin-bottom":"0"}},[n("h4",{staticStyle:{width:"auto","min-width":"20%","margin-bottom":"10px"},attrs:{title:a.projectName},on:{click:function(e){return t.goProject(a.projectId)}}},[t._v("项目："+t._s(a.projectName))]),t._v(" "),n("h4",[t._v("级别："+t._s(1==a.applyLevel?"国家":2==a.applyLevel?"省级":3==a.applyLevel?"市级":4==a.applyLevel?"区县级":5==a.applyLevel?"镇街级":"-"))]),t._v(" "),n("h4",{staticStyle:{"margin-bottom":"10px"}},[t._v("开始日期："+t._s(a.projectYearStartDate))]),t._v(" "),n("h4",{staticStyle:{"margin-bottom":"10px"}},[t._v("截止日期："+t._s(a.projectYearEndDate))])]),t._v(" "),n("div",{staticClass:"leftBox",staticStyle:{"margin-bottom":"0"}},[n("h4",{attrs:{title:a.currentEngineerAndProcessName}},[t._v("进度与处理人："+t._s(a.currentEngineerAndProcessName)+" "),0==a.isRead?n("span",{staticClass:"noRead"},[t._v("*")]):t._e()]),t._v(" "),n("h4",[t._v("申报年份："+t._s(a.year))]),t._v(" "),a.unitPrice?n("h4",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n                                        "+t._s(a.unitPrice>1?"单价：":"比例：")+"\n                                        "+t._s(a.unitPrice>1&&a.unitPrice<1e4?a.unitPrice+"元":a.unitPrice>1&&a.unitPrice>=1e4?parseFloat((a.unitPrice/1e4).toPrecision(13))+"万元":1e3*a.unitPrice/10+"%")+"\n                                      ")]):n("h4",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n                                        "+t._s(a.unitPrice>1?"单价：":"比例：")+"\n                                        "+t._s(a.unitPrice>1?0:"0%")+"\n                                      ")]),t._v(" "),n("h4",[t._v("数量："+t._s(a.applyNum))]),t._v(" "),a.unitPrice>1?n("h4",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n                                        总额：\n                                        "+t._s(a.unitPrice*a.applyNum<1e4?a.unitPrice*a.applyNum+"元":a.unitPrice&&a.applyNum?parseFloat((a.unitPrice*a.applyNum/1e4).toPrecision(13))+"万元":0)+"\n                                      ")]):t._e()]),t._v(" "),1==t.showPaymentState&&a.paymentRecordList.length>0?n("div",{staticClass:"paymentCont"},t._l(a.paymentRecordList,function(e,a){return n("div",{staticClass:"leftBox"},[n("span",{staticClass:"payNum"},[t._v(t._s(a+1))]),t._v(" "),n("div",{staticClass:"projectBackLeft"},[n("h4",[t._v("汇款日期："+t._s(e.paymentDate))]),t._v(" "),n("h4",[t._v("回款金额："+t._s(e.paymentAmount&&e.paymentAmount<1e4?e.paymentAmount+"元":e.paymentAmount&&e.paymentAmount>=1e4?parseFloat((e.paymentAmount/1e4).toPrecision(13))+"万元":"-"))]),t._v(" "),n("h4",[t._v("财政级别："+t._s(1==e.paymentLevel?"国家级":2==e.paymentLevel?"省级":3==e.paymentLevel?"市级":4==e.paymentLevel?"区县级":5==e.paymentLevel?"镇街级":"-"))]),t._v(" "),n("h4",[t._v("收款人："+t._s(e.paymentUserName))]),t._v(" "),n("h4",[t._v("录入日期："+t._s(e.entryDate))]),t._v(" "),n("h4",[t._v("回款阶段："+t._s(0==e.paymentType?"签约后":1==e.paymentType?"受理后":2==e.paymentType?"完成（提交）后":3==e.paymentType?"立项公示后":4==e.paymentType?"拨付后":5==e.paymentType?"验收后":6==e.paymentType?"收到通知书后":"-"))]),t._v(" "),n("h4",[t._v("业务主管姓名："+t._s(e.supervisorUserName))]),t._v(" "),n("h4",[t._v("业务主管审核结果："+t._s(0==e.supervisorRecheck?"未审核":1==e.supervisorRecheck?"审核通过":2==e.supervisorRecheck?"审核不通过":""))]),t._v(" "),n("h4",[t._v("财务专员姓名："+t._s(e.financeUserName))]),t._v(" "),n("h4",[t._v("财务专员审核结果："+t._s(0==e.financeRecheck?"未审核":1==e.financeRecheck?"审核通过":2==e.financeRecheck?"审核不通过":""))])]),t._v(" "),n("div",{staticClass:"projectBackRig"},[n("span",{staticClass:"payZhi",on:{click:function(a){return t.checkPayment(e.recordId)}}},[n("i",{staticClass:"el-icon-view"}),t._v("查看")]),t._v(" "),n("span",{staticClass:"payBlue",on:{click:function(a){return t.goPaymentDetail(e.recordId)}}},[n("i",{staticClass:"el-icon-edit"}),t._v("编辑")]),t._v(" "),n("span",{staticClass:"payRed",on:{click:function(a){return t.deletePayRecord(e.recordId)}}},[n("i",{staticClass:"el-icon-delete"}),t._v("删除")])])])}),0):t._e()])]),t._v(" "),n("div",{staticClass:"projectRig"},[n("span",{on:{click:function(e){return t.goOrderDetail(a.orderId)}}},[t._v("查看订单")]),t._v(" "),n("span",{on:{click:function(n){return t.openPlanBack(e,a)}}},[t._v("新建回款记录")])])])}),0)]),t._v(" "),1==e.contractType?n("img",{staticClass:"freeContract",attrs:{src:a("vlIt")}}):t._e(),t._v(" "),n("div",{staticClass:"dataBoxRig"},[n("div",{staticClass:"btnMt"},[n("el-button",{staticClass:"violet",attrs:{size:"small"},on:{click:function(a){return t.goCheckContract(e.contractId,e.isOneself)}}},[t._v("查看")])],1),t._v(" "),n("div",{staticClass:"btnMt"},[t.allowUpdate.twoAllow&&1==e.isOneself?n("el-button",{staticClass:"primary",attrs:{size:"small"},on:{click:function(a){return t.goEditContract(e.contractId,e.isOneself)}}},[t._v("编辑\n                              ")]):t._e()],1)])])])],1)})],2)])])])}),0),t._v(" "),t.total-t.contractList.length>0?n("div",{staticClass:"noMore",staticStyle:{cursor:"pointer"},on:{click:t.getMore}},[t._v("\n          点击加载更多\n        ")]):n("div",{staticClass:"noMore"},[t._v("\n          没有更多\n        ")])]),t._v(" "),n("div",{staticStyle:{height:"60px",position:"fixed",bottom:"20px",right:"0",width:"80px"}},[t.btnFlag?n("a",{attrs:{href:"javascript:",target:"_self"},on:{click:t.backTop}},[n("img",{attrs:{src:a("1XGe"),alt:""}})]):t._e()])],1),t._v(" "),n("el-dialog",{attrs:{title:"新增回款记录",visible:t.planBackVisible,width:"50%","before-close":t.cancelPlanBack},on:{"update:visible":function(e){t.planBackVisible=e}}},[n("el-form",{ref:"planBackForm",attrs:{model:t.planBackForm,rules:t.planBackRules,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"企业名称",prop:"companyName"}},[n("el-input",{attrs:{readonly:""},model:{value:t.planBackForm.companyName,callback:function(e){t.$set(t.planBackForm,"companyName",e)},expression:"planBackForm.companyName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[n("el-input",{attrs:{readonly:""},model:{value:t.planBackForm.projectName,callback:function(e){t.$set(t.planBackForm,"projectName",e)},expression:"planBackForm.projectName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"项目立项批准金额",prop:"approvalMoney"}},[n("el-input",{attrs:{type:"number",min:"0",maxlength:"4",oninput:"if(value && value>9999999)value=9999999",clearable:"",placeholder:"请输入项目立项批准金额"},nativeOn:{input:function(e){return t.inputXz(e)}},model:{value:t.planBackForm.approvalMoney,callback:function(e){t.$set(t.planBackForm,"approvalMoney",e)},expression:"planBackForm.approvalMoney"}},[n("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"财政级别",prop:"paymentLevel"}},[n("el-select",{attrs:{placeholder:"财政级别",clearable:""},model:{value:t.planBackForm.paymentLevel,callback:function(e){t.$set(t.planBackForm,"paymentLevel",e)},expression:"planBackForm.paymentLevel"}},t._l(t.paymentLevelList,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"回款阶段",prop:"paymentType"}},[n("el-select",{attrs:{placeholder:"回款阶段",clearable:""},model:{value:t.planBackForm.paymentType,callback:function(e){t.$set(t.planBackForm,"paymentType",e)},expression:"planBackForm.paymentType"}},t._l(t.payMethods,function(e){return n("el-option-group",{key:e.lable,attrs:{label:e.lable}},t._l(e.options,function(t){return n("el-option",{key:t.paymentMode,attrs:{label:t.paymentModeName,value:t.paymentMode}})}),1)}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"回款日期",prop:"paymentDate"}},[n("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择计划回款日期"},model:{value:t.planBackForm.paymentDate,callback:function(e){t.$set(t.planBackForm,"paymentDate",e)},expression:"planBackForm.paymentDate"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"回款金额",prop:"paymentAmount"}},[n("el-input",{attrs:{type:"number",min:"0",oninput:"if(value && value>9999999)value=9999999",clearable:"",placeholder:"请输入回款金额"},nativeOn:{input:function(e){return t.inputXzPayment(e)}},model:{value:t.planBackForm.paymentAmount,callback:function(e){t.$set(t.planBackForm,"paymentAmount",e)},expression:"planBackForm.paymentAmount"}},[n("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"收款人",prop:"paymentUserId"}},[n("el-select",{attrs:{placeholder:"收款人",clearable:"",filterable:""},model:{value:t.planBackForm.paymentUserId,callback:function(e){t.$set(t.planBackForm,"paymentUserId",e)},expression:"planBackForm.paymentUserId"}},t._l(t.userList,function(t){return n("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"回款依据",prop:"basisFileIds"}},[n("el-upload",{staticClass:"image-uploader",attrs:{"http-request":t.handleUpload,"before-upload":t.uploadBeforeFile,"file-list":t.fileList,limit:1,"on-exceed":t.handleExceed,"on-preview":t.downFileHandle,action:""}},[n("el-button",{staticClass:"btn export",attrs:{type:"primary",size:"small"}},[t._v("上传")])],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancelPlanBack}},[t._v("取 消")]),t._v(" "),n("el-button",{staticClass:"bg_blue",attrs:{type:"primary"},on:{click:function(e){return t.savePlanBack("planBackForm")}}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"修改签订人",visible:t.editPersonVisible,width:"586px"},on:{"update:visible":function(e){t.editPersonVisible=e}}},[n("el-form",{ref:"editPersonForm",attrs:{model:t.editPersonForm,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"签订人",prop:"enterprise_name"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择签订人",size:"small",clearable:""},model:{value:t.editPersonForm.userId,callback:function(e){t.$set(t.editPersonForm,"userId",e)},expression:"editPersonForm.userId"}},t._l(t.userList,function(t){return n("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})}),1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editPersonVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{staticClass:"bg_blue",attrs:{type:"primary"},on:{click:t.savePerson}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,m,!1,function(t){a("gHwX")},"data-v-464c5484",null);e.default=g.exports}});